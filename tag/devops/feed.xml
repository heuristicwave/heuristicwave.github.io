<?xml version="1.0" encoding="utf-8"?>

<feed xmlns="http://www.w3.org/2005/Atom" >
  <generator uri="https://jekyllrb.com/" version="3.9.2">Jekyll</generator>
  <link href="https://heuristicwave.github.io/tag/devops/feed.xml" rel="self" type="application/atom+xml" />
  <link href="https://heuristicwave.github.io/" rel="alternate" type="text/html" />
  <updated>2023-01-26T03:12:38+00:00</updated>
  <id>https://heuristicwave.github.io/tag/devops/feed.xml</id>

  
  
  

  
    <title type="html">Heuristic Wave Blog | </title>
  

  
    <subtitle>Careful Writer</subtitle>
  

  

  
    
      
    
  

  
  

  
    <entry>
      <title type="html">DIY Amazon EKS with eksctl</title>
      <link href="https://heuristicwave.github.io/eksctl_ppt" rel="alternate" type="text/html" title="DIY Amazon EKS with eksctl" />
      <published>2023-01-19T19:00:00+00:00</published>
      <updated>2023-01-19T19:00:00+00:00</updated>
      <id>https://heuristicwave.github.io/eksctl_ppt</id>
      <content type="html" xml:base="https://heuristicwave.github.io/eksctl_ppt">&lt;p&gt;&lt;a href=&quot;https://www.meetup.com/awskrug/events/290666942/&quot;&gt;AWSKRUG ì»¨í…Œì´ë„ˆ ì†Œëª¨ì„ğŸ³ - 1ì›” 19ì¼(ëª©)&lt;/a&gt; ë°œí‘œ ìë£Œ&lt;/p&gt;

&lt;h2 id=&quot;intro&quot;&gt;Intro&lt;/h2&gt;

&lt;p&gt;eksctlì„ í˜„ì—…ì—ì„œ ì ìš©í•˜ê¸° ìœ„í•´ í•„ìˆ˜ì ìœ¼ë¡œ í•„ìš”í•œ ìµœì†Œí•œì˜ ìš”ì†Œë“¤ì„ ë‹¤ë£¹ë‹ˆë‹¤.&lt;/p&gt;

&lt;iframe src=&quot;https://www.slideshare.net/slideshow/embed_code/key/KnHQ8gpSIFKpbE?hostedIn=slideshare&amp;amp;page=upload&quot; width=&quot;840&quot; height=&quot;523&quot; frameborder=&quot;0&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; scrolling=&quot;no&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;ğŸ’¡ SlideShare ë§í¬ë¥¼ í†µí•´ ë‹¤ìš´ë¡œë“œ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;h2 id=&quot;outro&quot;&gt;Outro&lt;/h2&gt;

&lt;p&gt;AWSKRUGì—ì„œëŠ” ì²« ë°œí‘œì˜€ëŠ”ë°, ë¶€ì¡±í•œ ë°œí‘œì„ì—ë„ 19ì¼ ë‹¹ì¼ ì†Œì¤‘í•œ ì‹œê°„ì„ ë‚´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤. 
ì¶”í›„, í•´ë‹¹ ì¥í‘œë“¤ì„ ì„¤ëª…í•˜ëŠ” ë¸”ë¡œê·¸ í¬ìŠ¤íŒ…ì„ í•¨ê»˜ ê°œì œí•  ì˜ˆì •ì…ë‹ˆë‹¤.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;span class=&quot;table-of-contents-list&quot;&gt;EKSCTL Tips&lt;/span&gt;&lt;/p&gt;
&lt;ul class=&quot;table-of-contents-list&quot;&gt;
    &lt;li&gt;&lt;a href=&quot;./eksctl_ppt&quot;&gt;DIY Amazon EKS with eksctl (Deck)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;</content>

      
      
      
      
      

      <author>
          <name>Heuristic Wave</name>
        
        
      </author>

      

      
        <category term="devops" />
      
        <category term="eks" />
      
        <category term="aws" />
      

      
        <summary type="html">AWSKRUG ì»¨í…Œì´ë„ˆ ì†Œëª¨ì„ğŸ³ - 1ì›” 19ì¼(ëª©) ë°œí‘œ ìë£Œ</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">Declarative vs Imperative in Kubernetes</title>
      <link href="https://heuristicwave.github.io/DeclarativeVSImperativeinK8s" rel="alternate" type="text/html" title="Declarative vs Imperative in Kubernetes" />
      <published>2022-08-14T00:00:00+00:00</published>
      <updated>2022-08-14T00:00:00+00:00</updated>
      <id>https://heuristicwave.github.io/DeclarativeVSImperativeinK8s</id>
      <content type="html" xml:base="https://heuristicwave.github.io/DeclarativeVSImperativeinK8s">&lt;p&gt;Kubernetes Object Managementì—ì„œ ë°œê²¬í•œ ëª…ë ¹í˜•/ì„ ì–¸í˜• ë°©ì‹&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;intro&quot;&gt;Intro&lt;/h2&gt;

&lt;p&gt;Kubernetesì˜ ë¦¬ì†ŒìŠ¤ë“¤ì„ ì œì–´í•˜ê¸° ìœ„í•´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kubectl&lt;/code&gt; ëª…ë ¹ì–´ë¥¼ ë‹¤ë£¨ë‹¤ ë³´ë‹ˆ,
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;replace&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;create&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;apply&lt;/code&gt; ë“±ê³¼ ê°™ì´ ë¹„ìŠ·í•˜ê²Œ ë™ì‘í•˜ëŠ” ëª…ë ¹ì–´ë“¤ì— ëŒ€í•´ì„œ ì–´ë–¤ ì°¨ì´ê°€ ìˆëŠ”ì§€ ê¶ê¸ˆì¦ì´ ìƒê²¼ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;help&lt;/code&gt; ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ë©´ ê°ê° ë‹¤ìŒê³¼ ê°™ì´ ë™ì‘í•œë‹¤ëŠ” ì •ë³´ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;apply : Apply a configuration to a resource by file name or stdin &lt;br /&gt;
create : Create a resource from a file or from stdin&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;í•´ë‹¹ ì„¤ëª…ìœ¼ë¡œëŠ” ê¶ê¸ˆì¦ì´ ë§ë”íˆ í•´ì†Œë˜ì§€ ì•Šì•„ ê³µì‹ ë¬¸ì„œë¥¼ ì½ë‹¤, 
&lt;a href=&quot;https://kubernetes.io/docs/concepts/overview/working-with-objects/object-management/&quot;&gt;Kubernetes Object Management&lt;/a&gt;ë¥¼ í†µí•´ ë¨¸ë¦¬ë¥¼ ìŠ¤ì¹˜ëŠ” ê¹¨ë‹¬ìŒì„ ì–»ì—ˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;kubernetes-object-management&quot;&gt;Kubernetes Object Management&lt;/h2&gt;

&lt;p&gt;ë¬¸ì„œì˜ ì²« ë¶€ë¶„ì€ ì¿ ë²„ë„¤í‹°ìŠ¤ ê°ì²´ë¥¼ ê´€ë¦¬í•˜ëŠ” ê¸°ë²•ìœ¼ë¡œ ë‹¤ìŒ 3ê°€ì§€ ê¸°ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Imperative commands&lt;/li&gt;
  &lt;li&gt;Imperative object configuration&lt;/li&gt;
  &lt;li&gt;Declarative object configuration&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Imperative(ëª…ë ¹í˜•, ì ˆì°¨í˜•), Declarative(ì„ ì–¸í˜•)ì˜ ê°œë…ì€ ë‹¨ì–´ ëœ»ì—ì„œë„ ì•Œ ìˆ˜ ìˆì§€ë§Œ, ì œê°€ ê¸°ì¡´ì— ìˆ™ì§€í•˜ê³  ìˆë˜ ê°œë…ì„ ë¨¼ì € ê¸°ìˆ í•˜ê³  ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œëŠ” ì–´ë–»ê²Œ ë‹¤ë¥¸ì§€ ì ì–´ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;declarative-vs-imperative&quot;&gt;Declarative vs Imperative&lt;/h3&gt;

&lt;p&gt;Declarative vs Imperative ê°œë…ì€ í”„ë¡œê·¸ë˜ë°ì—ì„œë„ ì¢…ì¢… ë³´ì´ì§€ë§Œ, AWS ì¸í”„ë¼ êµ¬ì¶•ì— ë¹—ëŒ€ í‘œí˜„í•´ ë³´ê² ìŠµë‹ˆë‹¤.
ì™¼ìª½ í˜„ì¬(Current) ìƒíƒœë¥¼ ì›í•˜ëŠ”(Desired) ìƒíƒœë¡œ ë§Œë“¤ì–´ì•¼ í•˜ëŠ” ìƒí™©ì„ ê°€ì •í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/etc/current&amp;amp;desired.png&quot; alt=&quot;CurrentAndDesired&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ì—¬ê¸°ì„œ &lt;strong&gt;Imperative&lt;/strong&gt;í•˜ê²Œ êµ¬ì„±í•œë‹¤ë©´ AWS CLIì™€ ê°™ì€ ë„êµ¬ë¥¼ í†µí•´ì„œ ë‹¤ìŒ &lt;strong&gt;ìˆœì„œ&lt;/strong&gt;ë¡œ Desired Stateë¥¼ ë§Œë“­ë‹ˆë‹¤.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;em&gt;ì›¹ ì„œë²„ 2ê°œ ì¶”ê°€&lt;/em&gt;&lt;/li&gt;
  &lt;li&gt;&lt;em&gt;Rule ì¶”ê°€&lt;/em&gt;&lt;/li&gt;
  &lt;li&gt;&lt;em&gt;ê¶Œí•œ ë¶€ì—¬&lt;/em&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ë°˜ë©´ &lt;strong&gt;Declarative&lt;/strong&gt;í•˜ê²Œ êµ¬ì„±í•œë‹¤ë©´ Terraformê³¼ ê°™ì€ &lt;strong&gt;ì„ ì–¸ì &lt;/strong&gt; ì„±ê²©ì„ ê°€ì§„ ë„êµ¬ ë‹¤ìŒê³¼ ê°™ì´ êµ¬ì„±í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;ì›¹ ì„œë²„ 3ëŒ€, Rule, ê¶Œí•œ êµ¬ì„±&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Terraformì—ì„œëŠ” Desired Stateë¥¼ ì½”ë“œë¡œ ì‘ì„±í•œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*.tf&lt;/code&gt; í˜•ì‹ì˜ íŒŒì¼ì„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;apply&lt;/code&gt;í•˜ì—¬ &lt;strong&gt;Declarative&lt;/strong&gt;í•˜ê²Œ ì¸í”„ë¼ë¥¼ ë‹¤ë£¹ë‹ˆë‹¤.
ì´ì œ ê¸°ì¡´ì— ì œê°€ ì œëŒ€ë¡œ ì•Œê³  ìˆì§€ ì•Šì•˜ë˜ â€œKubernetesì—ì„œëŠ” Desired Stateë¥¼ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;YAML&lt;/code&gt; í˜•ì‹ì˜ íŒŒì¼ì„ í™œìš©í•´ &lt;strong&gt;Declarative&lt;/strong&gt;í•˜ê²Œ ì¸í”„ë¼ë¥¼ ë‹¤ë£¬ë‹¤.â€
ë¼ëŠ” ë°˜ìª½ì§œë¦¬ ì •ë‹µì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;imperative-commands&quot;&gt;Imperative commands&lt;/h3&gt;

&lt;p&gt;ê³µì‹ ë¬¸ì„œì˜ ëª…ë ¹í˜• ëª…ë ¹ì˜ ì‚¬ìš©ë²•ì€ ë‹¤ìŒê³¼ ê°™ì€ ì˜ˆì‹œì™€, í•´ë‹¹ ë°©ë²•ì€ ì´ì „ &lt;strong&gt;historyë¥¼ ì œê³µí•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì¼íšŒì„± ì‘ì—…&lt;/strong&gt;ì—ë§Œ ì¶”ì²œí•œë‹¤ê³  ê¸°ì¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;kubectl create deployment nginx &lt;span class=&quot;nt&quot;&gt;--image&lt;/span&gt; nginx
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;í•´ë‹¹ ë°©ë²•ì€ ëª…ë ¹ì–´ í•œ ì¤„ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„±í•  ìˆ˜ ìˆì–´ ë¹„êµì  ê°„í¸í•œ ë°©ë²•ì´ì§€ë§Œ, historyë¥¼ ì œê³µí•˜ì§€ ì•ŠëŠ” ì ì´ ë‹¨ì ì´ë¼ëŠ” ì´ìœ ëŠ” ë‹¤ë¥¸ ë°©ë²•ë“¤ì„ ì†Œê°œí•œ ë‹¤ìŒ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤. ğŸ˜’&lt;/p&gt;

&lt;h3 id=&quot;imperative-object-configuration&quot;&gt;Imperative object configuration&lt;/h3&gt;

&lt;p&gt;ëª…ë ¹í˜• ì˜¤ë¸Œì íŠ¸ êµ¬ì„± ë°©ë²• kubectl ëª…ë ¹ì–´ì™€ create, replace ë“±ê³¼ ê°™ì€ ëª…ë ¹ê³¼ ì˜µì…˜ í”Œë˜ê·¸ ë° íŒŒì¼ ì´ë¦„ì´ í•„ìš”í•©ë‹ˆë‹¤.
íŒŒì¼ ì´ë¦„ YAML í˜¹ì€ JSON í˜•ì‹ì˜ ì˜¤ë¸Œì íŠ¸ì— ëŒ€í•œ ì •ì˜ë¥¼ í¬í•¨í•˜ê³  ìˆì–´ì•¼ í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ëª…ë ¹ì–´ì™€ íŒŒì¼ì„ í™œìš©í•´ ë¦¬ì†ŒìŠ¤ë¥¼ Create/Delete/Update í•˜ëŠ” ë°©ë²•&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;kubectl create &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; nginx.yaml
kubectl delete &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; nginx.yaml
kubectl replace &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; nginx.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;í•´ë‹¹ ë°©ë²•ì€ Imperative Command ë°©ì‹ê³¼ ë¹„êµí•˜ì—¬, YAML íŒŒì¼ì„ í™œìš©í•˜ê¸° ë•Œë¬¸ì— í˜•ìƒ ê´€ë¦¬ê°€ ê°€ëŠ¥í•œ ì´ì ì´ ìƒê²¼ìŠµë‹ˆë‹¤.
ê·¸ë ‡ì§€ë§Œ ì§ì ‘ YAML íŒŒì¼ì„ ì‘ì„±í•´ì•¼ í•˜ëŠ” ì¶”ê°€ì ì¸ ë‹¨ê³„ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì—¬ê¸°ì„œ ì €ëŠ” ì˜ë¬¸ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤. Terraformì˜ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*.tf&lt;/code&gt;ê³¼ ê°™ì´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;YAML&lt;/code&gt; íŒŒì¼ë¡œ Desired ìƒíƒœë¥¼ ë§Œë“œëŠ” ë°©ë²•ì´ ì™œ &lt;strong&gt;ëª…ë ¹í˜•&lt;/strong&gt; ì˜¤ë¸Œì íŠ¸ êµ¬ì„± ë°©ë²•ì¸ì§€.
ì´ ë–¡ë°¥ë„ ë§ˆì§€ë§‰ ë°©ë²•ì„ ì†Œê°œí•œ ì´í›„ íšŒìˆ˜í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. ğŸ¤«&lt;/p&gt;

&lt;h3 id=&quot;declarative-object-configuration&quot;&gt;Declarative object configuration&lt;/h3&gt;

&lt;p&gt;ê³µì‹ë¬¸ì„œì—ì„œëŠ” í•´ë‹¹ ê¸°ë²•ì„ ì„¤ëª…í•˜ê¸° ìœ„í•´ ì•„ë˜ì™€ ê°™ì€ ì‰½ê²Œ ì´í•´ë˜ì§€ ì•ŠëŠ” ì„¤ëª…ì´ ê¸°ì¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;When using declarative object configuration, a user operates on object configuration files stored locally,
however the user does not define the operations to be taken on the files.
Create, update, and delete operations are automatically detected per-object by kubectl.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;declarative object configuration ë°©ì‹ì„ ì‚¬ìš©í•  ë•Œ, ì‚¬ìš©ìëŠ” ë¡œì»¬ì— ì €ì¥ëœ ê°œì²´ êµ¬ì„± íŒŒì¼ì— ëŒ€í•´ ì‘ì—…í•˜ì§€ë§Œ,
ì‚¬ìš©ìëŠ” íŒŒì¼ì— ëŒ€í•œ ì‘ì—…ë“¤ì„ ì •ì˜í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤. Create, update, and delete ì‘ì—…ë“¤ì€ ê°ì²´ë³„ë¡œ ìë™ìœ¼ë¡œ ê°ì§€ëœë‹¤.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ì¦‰, Imperative object configuration ë°©ì‹ì—ì„œëŠ” ì‚¬ìš©ìê°€ Create, Update, Deleteë¥¼ ëª…ë ¹ì–´ë¡œ ê²°ì •í–ˆìŠµë‹ˆë‹¤. (ì‚¬ìš©ìì˜ íŒë‹¨)
Declarative object configuration ë°©ì‹ì—ì„œëŠ” ì˜¤ë¡œì§€ êµ¬ì„± íŒŒì¼ì—ì„œ ì •ì˜í•œ ëŒ€ë¡œ ì‚­ì œ í˜¹ì€ ìƒì„± ë“±ì´ ì‘ë™í•©ë‹ˆë‹¤. (ì •ì˜í•œ ëŒ€ë¡œ ì‘ë™)&lt;/p&gt;

&lt;p&gt;Declarative object configuration ë°©ì‹ì€ configuration íŒŒì¼ì´ ìœ„ì¹˜í•œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/config&lt;/code&gt; ë””ë ‰í† ë¦¬ì— &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;diff&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;apply&lt;/code&gt; ëª…ë ¹ì–´ë¡œ ì‘ë™ì‹œí‚µë‹ˆë‹¤.
êµ¬ì„± íŒŒì¼ì´ ì—¬ëŸ¬ ê°œë¼ë©´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-R&lt;/code&gt; ì˜µì…˜ì„ í•¨ê»˜ ë„£ì–´ì¤ë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;kubectl diff &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; configs/    // ì •ì˜í•œ config ì ìš©ì— ëŒ€í•œ ê²°ê³¼ ì˜ˆìƒ
kubectl apply &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; configs/   // ì •ì˜í•œ config ì ìš©
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;diff&lt;/code&gt;ëŠ” ë§ˆì¹˜ í…Œë¼í¼ì˜ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;plan&lt;/code&gt;ê³¼ ê°™ì€ ì—­í• ì„, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;apply&lt;/code&gt; í…Œë¼í¼ì˜ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;apply&lt;/code&gt;ì²˜ëŸ¼ ë™ì‘í•©ë‹ˆë‹¤ :) &lt;br /&gt;
ì—¬ë‹´ìœ¼ë¡œ ì €ëŠ” ê³¼ê±° í…Œë¼í¼ê´€ë ¨ í¬ìŠ¤íŒ… ë‹¹ì‹œ apply í•˜ê¸° ì „, plan ëª…ë ¹ì–´ì˜ ì¤‘ìš”ì„±ì„ ì—¬ëŸ¬ ë²ˆ ê°•ì¡°í–ˆì—ˆëŠ”ë°,
ì •ì‘ ì €ëŠ” kubernetes manifest íŒŒì¼ë“¤ì„ ì ìš©í•  ë•Œ, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--dry-run&lt;/code&gt; ì˜µì…˜ë§Œìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ê°€ í˜„ì¬ ìƒíƒœì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì„ íŒë‹¨í•˜ê³  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;diff&lt;/code&gt;ë¥¼ ì ê·¹ì ìœ¼ë¡œ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ë˜ ëª¨ìŠµì´ ë¶€ë„ëŸ½ìŠµë‹ˆë‹¤. ğŸ˜£&lt;/p&gt;

&lt;p&gt;ì¶”ê°€ì ìœ¼ë¡œ Imperative object configuration ë°©ì‹ê³¼ Declarative object configuration ë°©ì‹ì„ í˜¼ìš©í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ì˜ˆì‹œë¥¼ í†µí•´,
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;apply&lt;/code&gt;ì™€ ë°˜ëŒ€ë˜ëŠ” ëª…ë ¹ì–´ê°€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;delete&lt;/code&gt;ê°€ ì•„ë‹Œ ì´ìœ ë¥¼ ìƒê°í•´ ë³´ë©° ë‹¤ìŒ Annotations ì°¨ë¡€ë¡œ ë„˜ì–´ê°€ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;kubectl apply &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; nginx.yaml   // Declarative object configuration ë°©ì‹ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ ìƒì„±
kubectl delete &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; nginx.yaml  // Imperative object configuration ë°©ì‹ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ ì‚­ì œ
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;annotations&quot;&gt;Annotations&lt;/h2&gt;

&lt;p&gt;ìœ„ 3ê°€ì§€ ë°©ì‹ì„ ì„¤ëª…í•˜ë©´ì„œ ê³µì‹ ë¬¸ì„œì— ê¸°ì¬ëœ ê° ë°©ì‹ì˜ Trade-offsì— ëŒ€í•œ ë‚´ìš©ë“¤ì„ ëŒ€ë¶€ë¶„ ìƒëµí–ˆìŠµë‹ˆë‹¤.
ìƒíƒœì— ëŒ€í•œ ê¸°ë¡ì„ ì„¤ëª…í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì´ì£ . &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kubectl apply&lt;/code&gt;ëŠ” ì´ì „ì˜ í˜¸ì¶œ ì´í›„ &lt;strong&gt;êµ¬ì„±ì˜ ë³€ê²½ ì‚¬í•­ì„ íŒë³„&lt;/strong&gt;í•˜ê¸° ìœ„í•´ ë¦¬ì†ŒìŠ¤ì— ì–´ë…¸í…Œì´ì…˜ì„ ì²¨ë¶€í•©ë‹ˆë‹¤.
ì´ë¥¼ í†µí•´, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Declarative object configuration&lt;/code&gt; ë°©ì‹ì€ Historyë¥¼ ê¸°ë¡í•˜ë©° Auditë„ ê°€ëŠ¥í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;í•´ë‹¹ ì–´ë…¸í…Œì´ì…˜ì€ ì¿ ë²„ë„¤í‹°ìŠ¤ ì˜¤ë¸Œì íŠ¸ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;metadata&lt;/code&gt; í•˜ìœ„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;annotations&lt;/code&gt;ì— &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kubectl.kubernetes.io/last-applied-configuration&lt;/code&gt; ì´ë¦„ìœ¼ë¡œ í˜„ì¬ ë¦¬ì†ŒìŠ¤ì— ì ìš©ëœ config ê°’ë“¤ì´ ì €ì¥ë˜ì–´ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;apply&lt;/code&gt; ëª…ë ¹ì–´ë¡œ ìƒì„±í•œ ë¦¬ì†ŒìŠ¤ë¥¼ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kubectl get {Type} {Name} -o yaml&lt;/code&gt; ëª…ë ¹ì–´ë¡œ ì¡°íšŒí•˜ë©´ ì–´ë–¤ ê°’ì´ ì ìš©ë˜ì—ˆëŠ”ì§€ ì¡°íšŒ ê°€ëŠ¥í•©ë‹ˆë‹¤.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;-lab&quot;&gt;ğŸ§‘â€ğŸ”¬ Lab&lt;/h3&gt;

&lt;p&gt;ì•ì„œ ì„¤ëª…í•œ object configuration ë°©ì‹ë“¤ì„ ì§ì ‘ ì²´í—˜í•  ìˆ˜ ìˆë„ë¡ ì˜ˆì œ ì½”ë“œë¥¼ ì‘ì„±í•´ ë‘ì—ˆìŠµë‹ˆë‹¤.
ì•„ë˜ ì‹¤í—˜ìš© Manifest íŒŒì¼ë“¤ì„ ìƒì„±í•˜ê³  ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì–´ë…¸í…Œì´ì…˜ì„ ì¡°íšŒí•´ë³´ì„¸ìš”. &lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kubectl get deploy nginx-declarative -o yaml | grep &quot;annotations&quot;&lt;/code&gt;&lt;/p&gt;

&lt;details&gt;
  &lt;summary&gt;ğŸªœ Imperative object configuration&lt;/summary&gt;
  &lt;p&gt;&lt;br /&gt;&lt;/p&gt;
  &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;EOF&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt; &amp;gt; nginx_imperative.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-imperative
spec:
  replicas: 1
  selector:
    matchLabels:
      app: nginx-imperative
  template:
    metadata:
      labels:
        app: nginx-imperative
    spec:
      containers:
      - image: nginx
        name: nginx-imperative
&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;EOF
&lt;/span&gt;kubectl create &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; nginx_imperative.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/details&gt;

&lt;details&gt;
  &lt;summary&gt;ğŸ“£ Declarative object configuration&lt;/summary&gt;
  &lt;p&gt;&lt;br /&gt;&lt;/p&gt;
  &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;EOF&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt; &amp;gt; nginx_declarative.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-declarative
spec:
  replicas: 1
  selector:
    matchLabels:
      app: nginx-declarative
  template:
    metadata:
      labels:
        app: nginx-declarative
    spec:
      containers:
      - image: nginx
        name: nginx-declarative
&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;EOF
&lt;/span&gt;kubectl apply &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; nginx_declarative.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/details&gt;

&lt;h3 id=&quot;-ì˜¤ë‹µ-ë…¸íŠ¸&quot;&gt;ğŸ– ì˜¤ë‹µ ë…¸íŠ¸&lt;/h3&gt;

&lt;p&gt;ì´ì œ ë–¡ë°¥ íšŒìˆ˜ ê²¸, ê¸°ì¡´ì— ì œê°€ ì œëŒ€ë¡œ ì•Œê³  ìˆì§€ ì•Šì•˜ë˜ â€œKubernetesì—ì„œëŠ” Desired Stateë¥¼ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;YAML&lt;/code&gt; í˜•ì‹ì˜ íŒŒì¼ì„ í™œìš©í•´ &lt;strong&gt;Declarative&lt;/strong&gt;í•˜ê²Œ ì¸í”„ë¼ë¥¼ ë‹¤ë£¬ë‹¤.â€
ë¼ëŠ” ë°˜ìª½ì§œë¦¬ ì •ë‹µì— ëŒ€í•˜ì—¬ ì˜¤ë‹µë…¸íŠ¸ë¥¼ ì ì–´ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;Declarative ë„êµ¬ì¸ Terraformì€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*.tf&lt;/code&gt;ì— ìƒíƒœë¥¼ &lt;strong&gt;ì •ì˜í•¨ê³¼ ë™ì‹œ&lt;/strong&gt;ì— apply ì´í›„ ìë™ìœ¼ë¡œ ìƒì„±ë˜ëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*.tfstate&lt;/code&gt; íŒŒì¼ì— &lt;strong&gt;í˜„ì¬ ìƒíƒœê°€ í•¨ê»˜ ê¸°ë¡&lt;/strong&gt;ë©ë‹ˆë‹¤.
Kubernetesì—ì„œëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;YAML&lt;/code&gt;ë¡œ ì •ì˜í•˜ì§€ë§Œ, ì ìš©ëœ config ì •ë³´ê°€ í¬í•¨ë˜ì§€ ì•Šì€ ë°©ë²•ì€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Imperative object configuration&lt;/code&gt; ë°©ì‹ì…ë‹ˆë‹¤.
ì´ì œì„œì•¼ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;apply&lt;/code&gt; commandë¥¼ ì‚¬ìš©í•´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;last-applied-configuration&lt;/code&gt; ê°€ í•¨ê»˜ ê¸°ë¡ë˜ëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Declarative object configuration&lt;/code&gt; ë°©ì‹ì„ ì œëŒ€ë¡œ ì´í•´í•œ ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;h2 id=&quot;outro&quot;&gt;Outro&lt;/h2&gt;

&lt;p&gt;ê¸€ì„ ë§ˆì¹˜ë©° ì£¼ì €ë¦¬ì£¼ì €ë¦¬ ë– ì˜¤ë¥¸ ìƒê°ë“¤ì„ ì ì–´ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì €ëŠ” ë§¤ë²ˆ ë¸”ë¡œê·¸ í¬ìŠ¤íŒ… ì†Œì¬ë¥¼ ê³ ë¯¼í•©ë‹ˆë‹¤. ì‹¤ì œë¡œ 10ê°œì˜ í¬ìŠ¤íŒ… ì•„ì´ë””ì–´ê°€ ë– ì˜¤ë¥´ì§€ë§Œ, ë¸”ë¡œê·¸ ê¸€ë¡œ íƒ„ìƒí•˜ëŠ”ê²ƒì€ 1~2ê°œ ë¿ì…ë‹ˆë‹¤.
ì‹¤ì œë¡œ ë­”ê°€ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…ì— ëŒ€í•œ ê¸€ì„ ì‘ì„±í•˜ë ¤ê³  í•´ë„, ë‚˜ì¤‘ì— ê³µì‹ë¬¸ì„œë¥¼ ë³´ë‹ˆ ë” ì˜ ì‘ì„±ëœ ê²ƒ ê°™ì€ ëŠë‚Œì„ ì¢…ì¢… ë°›ìŠµë‹ˆë‹¤.
ë˜í•œ ì• ì´ˆì— ë¬¸ì„œë¥¼ ì œëŒ€ë¡œ ì½ì—ˆë‹¤ë©´, í•´ë‹¹ ì´ìŠˆë¥¼ ë§Œë‚˜ì§€ ì•Šì•˜ì„ ê²ƒë§Œ ê°™ì•„ ì—…ë¡œë“œë¥¼ í¬ê¸°í•˜ëŠ” ê¸€ì´ ìˆì—ˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì´ëŸ° ê³ ë¯¼ì´ ë„ˆë¬´ ê¸¸ì–´ì ¸ ì£¼ê¸°ì ì¸ ì—…ë¡œë”©ì´ ëŠ¦ì–´ì§€ëŠ” ì ì€ ëª…í™•í•œ ë‹¨ì ì¸ ê²ƒ ê°™ìŠµë‹ˆë‹¤. (ì•„ ë¬¼ë¡ ! ë§¤ì¼ í˜„ì‹¤ê³¼ íƒ€í˜‘í•˜ì—¬ ë¯¸ë£¨ë‹¤ë³´ë‹ˆ ëŠ¦ì–´ì§€ëŠ”ê²Œ ê°€ì¥ í° ì´ìœ ê² ì§€ë§Œìš”)&lt;/p&gt;

&lt;p&gt;ê·¸ë˜ì„œ ì´ë²ˆì—ëŠ” ê¸°ìˆ ë¸”ë¡œê·¸ë¥¼ 2ì£¼ì— 1í¸ì„ ì“°ìëŠ” ì•½ì†ì„ ì§€í‚¤ê¸° ìœ„í•´ì„œâ€¦ &lt;a href=&quot;https://kubernetes.io/docs/concepts/overview/working-with-objects/object-management/&quot;&gt;Kubernetes Object Management&lt;/a&gt;ë¥¼ í•´ì„¤ê³¼ ë™ì‹œì—,
ì´ë²ˆ í¬ìŠ¤íŒ…ì€ ì œê°€ ê³µì‹ë¬¸ì„œë¥¼ ì–´ë–»ê²Œ ì½ëŠ”ì§€ ì½ìœ¼ë©´ì„œ ì–´ë–¤ ìƒê°ì„ í•˜ëŠ”ì§€ì— ëŒ€í•œ ì‚¬ê³ ì˜ íë¦„ì„ ë‹´ìœ¼ë©° ì´í•´í•˜ëŠ” ê³¼ì •ì„ ë‹´ì•˜ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì†Œì¤‘í•œ ì‹œê°„ì„ ë‚´ì–´ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ì˜ëª»ëœ ë‚´ìš©ì€ ì§€ì í•´ì£¼ì„¸ìš”! ğŸ˜ƒ&lt;/p&gt;

&lt;hr /&gt;</content>

      
      
      
      
      

      <author>
          <name>Heuristic Wave</name>
        
        
      </author>

      

      
        <category term="devops" />
      
        <category term="container" />
      

      
        <summary type="html">Kubernetes Object Managementì—ì„œ ë°œê²¬í•œ ëª…ë ¹í˜•/ì„ ì–¸í˜• ë°©ì‹</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">Terraform Tips 5 - Import</title>
      <link href="https://heuristicwave.github.io/TerraformTips5" rel="alternate" type="text/html" title="Terraform Tips 5 - Import" />
      <published>2022-07-23T00:00:00+00:00</published>
      <updated>2022-07-23T00:00:00+00:00</updated>
      <id>https://heuristicwave.github.io/TerraformTips5</id>
      <content type="html" xml:base="https://heuristicwave.github.io/TerraformTips5">&lt;p&gt;Terraform ë” ìµìˆ™í•˜ê²Œ 5 - Import&lt;/p&gt;

&lt;h2 id=&quot;intro&quot;&gt;Intro&lt;/h2&gt;

&lt;p&gt;IaCë¥¼ ë„ì…í•˜ê¸° ìœ„í•´ êµ¬ì¶• ë‹¨ê³„ë¶€í„° ì½”ë“œë¡œ ì¸í”„ë¼ë¥¼ ì‘ì„±í•  ìˆ˜ë„ ìˆì§€ë§Œ, ê¸° êµ¬ì¶•ëœ ì¸í”„ë¼ë¥¼ ì½”ë“œí™”í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
ì´ë•Œ ì‚¬ìš©í•˜ëŠ” Terraformì˜ ê¸°ëŠ¥ì´ ë°”ë¡œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Import&lt;/code&gt;ì…ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;í•˜ì§€ë§Œ ì €ëŠ” êµ¬ì¶• ë‹¨ê³„ì—ë„ ì¢…ì¢… &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Import&lt;/code&gt; ê¸°ëŠ¥ì„ í™œìš©í•©ë‹ˆë‹¤. Terraformìœ¼ë¡œ ì½”ë“œë¥¼ ì‘ì„±í•˜ê¸° ìœ„í•´ &lt;a href=&quot;https://registry.terraform.io/providers/hashicorp/aws/latest/docs&quot;&gt;registry.terraform.io&lt;/a&gt;ì—ì„œ
ê°€ì´ë“œ í•˜ëŠ” ëŒ€ë¡œ ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒì´ ìƒê°ë³´ë‹¤ ì–´ë ¤ìš´ ì‘ì—…ì´ê¸° ë•Œë¬¸ì´ì£ . ğŸ¥²&lt;/p&gt;

&lt;p&gt;ê·¸ë˜ì„œ ì €ëŠ” ë¨¼ì € êµ¬ì¶•í•˜ê³ ì í•˜ëŠ” ì¸í”„ë¼ë¥¼ ì½˜ì†”ìƒì—ì„œ êµ¬ì„±í•œ ë‹¤ìŒ, êµ¬ì¶•ì— í•„ìš”í•œ Attribute ë“¤ì„ íŒŒì•…í•©ë‹ˆë‹¤.
ê·¸ë‹¤ìŒ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Import&lt;/code&gt;ë¥¼ ì‚¬ìš©í•´ ë™ì‘í•˜ëŠ” IaC ì½”ë“œë¥¼ ì–»ê³  ìˆ˜ì •í•©ë‹ˆë‹¤.
ì¦‰, ì €ëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Import&lt;/code&gt; ê¸°ëŠ¥ì„ Cheat Sheetì²˜ëŸ¼ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. ğŸ˜…&lt;/p&gt;

&lt;p&gt;ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” ì‹¤ì œ ì œê°€ Cheat Sheetìœ¼ë¡œ í™œìš©í•˜ëŠ” &lt;em&gt;â€˜Import ì‹œë‚˜ë¦¬ì˜¤â€™&lt;/em&gt;ë¥¼ í†µí•´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Import&lt;/code&gt;ë¥¼ í•™ìŠµí•´ ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;-ì¡°ë¦½ì€-ë¶„í•´ì˜-ì—­ìˆœ&quot;&gt;â® ì¡°ë¦½ì€ ë¶„í•´ì˜ ì—­ìˆœ&lt;/h2&gt;

&lt;p&gt;AWS Systems Managerì˜ ì¸ìŠ¤í„´ìŠ¤ ìš´ì˜ ìë™í™”ë¥¼ ìœ„í•œ State Manager ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ &lt;a href=&quot;https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/ssm_association&quot;&gt;ë¬¸ì„œ&lt;/a&gt;ë¥¼
í™•ì¸í•´ ë³´ì•˜ì§€ë§Œ, ë‹¤ìŒê³¼ ê°™ì€ ì‚¬ìš©ë²• ë§Œì´ ê¸°ì¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-terraform highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;resource&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;aws_ssm_association&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;example&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;aws_ssm_document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;example&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;

  &lt;span class=&quot;nx&quot;&gt;targets&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;key&lt;/span&gt;    &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;InstanceIds&quot;&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;values&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;aws_instance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;example&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;í•´ë‹¹ ì½”ë“œë¥¼ apply í•´ë„ ë¬´ìˆ˜í•œ Errorë§Œ ë§Œë‚  ë¿ ë¹ ë¥´ê²Œ ì§„ë„ê°€ ë‚˜ê°€ì§€ ì•Šê¸°ì—, ìš°ì„  AWS ì›¹ ì½˜ì†”ì„ í™œìš©í•´ ì¸ìŠ¤í„´ìŠ¤ ìš´ì˜ ìë™í™”ë¥¼ ìœ„í•œ State Manager ê¸°ëŠ¥ì„ êµ¬í˜„í•´ ë‘ì—ˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;0ï¸âƒ£-ì¤€ë¹„-ì‘ì—…&quot;&gt;0ï¸âƒ£ ì¤€ë¹„ ì‘ì—…&lt;/h3&gt;

&lt;p&gt;ì´ë²ˆ í¬ìŠ¤íŒ…ì˜ ì‘ì—… ê³µê°„(~/terraform)ì„ ìƒì„±í•˜ê³  í•´ë‹¹ ìœ„ì¹˜ì—ì„œ ì•„ë˜ ì½”ë“œ ë¸”ë¡ì„ í„°ë¯¸ë„ì— ë³µì‚¬í•©ë‹ˆë‹¤. (ë¦¬ì†ŒìŠ¤ê°€ ìœ„ì¹˜í•œ ë¦¬ì „ ëª…ì— ë§ê²Œ ì„¸íŒ…í•´ ì£¼ì„¸ìš”)&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;EOF&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt; &amp;gt; provider.tf
provider &quot;aws&quot; {
  region  = &quot;ap-northeast-2&quot;
}
&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;EOF
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;ì´í›„, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform init&lt;/code&gt; ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰ì‹œì¼œì£¼ì„¸ìš”.&lt;/p&gt;

&lt;h3 id=&quot;1ï¸âƒ£-skeleton-code-ì‘ì„±&quot;&gt;1ï¸âƒ£ Skeleton Code ì‘ì„±&lt;/h3&gt;

&lt;p&gt;ì›¹ ì½˜ì†”ë¡œ ì‘ì—…í•œ State Managerë¥¼ ì½”ë“œí™”í•˜ê¸° ìœ„í•´ ì•„ë˜ì™€ ê°™ì´ Skeleton Codeë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.
(import í›„, ìƒì„±ë˜ëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*.tfstate&lt;/code&gt;ë¥¼ ë‹´ëŠ” ì¼ì¢…ì˜ ë¹µí‹€ì„ ì œì‘í•˜ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤.)&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;EOF&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt; &amp;gt; main.tf
resource &quot;aws_ssm_association&quot; &quot;copycat&quot; {}
&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;EOF
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;2ï¸âƒ£-import-configuration&quot;&gt;2ï¸âƒ£ Import Configuration&lt;/h3&gt;

&lt;p&gt;ì‚¬ìš©ë²•(&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform import [options] ADDRESS ID&lt;/code&gt;)ì— ë”°ë¼ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰ì‹œí‚¤ë©´ &lt;strong&gt;root directory&lt;/strong&gt;ì— ë¯¸ë¦¬ ìƒì„±ëœ ì¸í”„ë¼ê°€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*.tfstate&lt;/code&gt; íŒŒì¼ì— ë‹´ê¹ë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;terraform import aws_ssm_association.copycat &amp;lt;Association ID&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ìƒì„±ëœ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*.tfstate&lt;/code&gt; íŒŒì¼ì„ í™•ì¸í•˜ë©´ json í˜•íƒœë¡œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;aws_ssm_association&lt;/code&gt; resource blockì— ì‘ì„±í•´ì•¼ í•˜ëŠ” ê°ì¢… Config ê°’ë“¤ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ê·¸ëŸ¬ë‚˜, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;show&lt;/code&gt; ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ HCL Syntaxì— ë§ì¶° &lt;strong&gt;human-readable&lt;/strong&gt;í•œ í˜•íƒœë¡œ ì¶œë ¥í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;terraform show &lt;span class=&quot;nt&quot;&gt;-no-color&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; main.tf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ë³¸ë˜ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-no-color&lt;/code&gt; ì˜µì…˜ì€ coloring ì‘ì—…ì„ ë¹„í™œì„±í™”í•˜ì§€ë§Œ, Editorì— format ë§ì¶”ê¸° ìœ„í•´ í•„ìˆ˜ì ìœ¼ë¡œ í•´ë‹¹ ì˜µì…˜ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;3ï¸âƒ£-modify-arguments&quot;&gt;3ï¸âƒ£ Modify Arguments&lt;/h3&gt;

&lt;p&gt;ì´ì œì„œì•¼ ì–¼ì¶” ëª¨ì–‘ì„ ê°–ì¶˜ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;main.tf&lt;/code&gt;ì˜ &lt;strong&gt;resource block&lt;/strong&gt;ì—ëŠ” ë¦¬ì†ŒìŠ¤ê°€ ì¸í”„ë¼ì— &lt;strong&gt;ë°˜ì˜ëœ ì´í›„ ë‹¨ê³„ì— ìƒì„±ë˜ëŠ” ê°ì¢… result&lt;/strong&gt; ê°’(&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;arn&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;association_id&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;id&lt;/code&gt;)
ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. í•´ë‹¹ ê°’ë“¤ì€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform plan&lt;/code&gt; ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•´ Error ë©”ì‹œì§€ì— ëª…ì‹œë˜ë¯€ë¡œ ì§€ì›Œì•¼ í•˜ëŠ” Argumentsë“¤ì„ ì°¾ì•„ ì½”ë“œë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì´ë•Œ, Instancd Id, IAM Role ARN ë“±ê³¼ ê°™ì´ &lt;strong&gt;ì ˆëŒ€ì ì¸ ê°’&lt;/strong&gt;ë„ &lt;strong&gt;ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ë³€ìˆ˜&lt;/strong&gt;ë¡œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.
í•´ë‹¹ ì‘ì—…ì„ ë§ˆì¹˜ê³  ë‚˜ë©´, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;plan&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;apply&lt;/code&gt; ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ì—¬ ë‹¤ìŒ ë©”ì‹œì§€ë¥¼ ì–»ìœ¼ë©´ ì •ìƒì ìœ¼ë¡œ Import ì‘ì—…ì´ ì™„ë£Œëœ ê²ƒì…ë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Apply complete! Resources: 0 added, 0 changed, 0 destroyed.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;-import-into-module&quot;&gt;ğŸ¥µ Import into Module&lt;/h2&gt;

&lt;p&gt;ì§€ê¸ˆê¹Œì§€ í•™ìŠµí•œ ì ˆì°¨ëŠ” ë‹¨ìˆœ &lt;strong&gt;Resource&lt;/strong&gt;ì— Import ì‹œí‚¤ë¯€ë¡œ ë¹„êµì  ìˆ˜ì›”í•œ ê³¼ì •ì´ì—ˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Resource configured with count &lt;br /&gt;
â¡ï¸ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform import 'aws_instance.baz[0]' i-abcd1234&lt;/code&gt; &lt;br /&gt;
Resource configured with for_each &lt;br /&gt;
â¡ï¸ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform import 'aws_instance.baz[&quot;example&quot;]' i-abcd1234&lt;/code&gt; &lt;br /&gt;
Module &lt;br /&gt;
â¡ï¸ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform import module.foo.aws_instance.bar i-abcd1234&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Moduleì„ Import í•˜ëŠ” ì ˆì°¨ë„ Resourceì™€ ë™ì¼í•˜ì§€ë§Œ, ëª…ë°±í•œ &lt;strong&gt;í•œê³„ì &lt;/strong&gt;ì´ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;í”í•˜ê²Œ ì‚¬ìš©ë˜ëŠ” &lt;a href=&quot;https://registry.terraform.io/modules/terraform-aws-modules/ec2-instance/aws/latest&quot;&gt;ec2-instance&lt;/a&gt; ëª¨ë“ˆì„ ì‚¬ìš©í•œë‹¤ê³  ê°€ì •í•˜ê² ìŠµë‹ˆë‹¤.
Resource ë•Œì™€ ë™ì¼í•˜ê²Œ ì•„ë˜ì™€ ê°™ì€ Skeleton Codeë¥¼ ì‘ì„±í•˜ê³  Import ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ëŠ” ë¶€ë¶„ì€ ë™ì¼í•©ë‹ˆë‹¤. (1ï¸âƒ£ &amp;amp; 2ï¸âƒ£ ê³¼ì • ë™ì¼)&lt;/p&gt;

&lt;div class=&quot;language-terraform highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ec2_instance&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;source&lt;/span&gt;  &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;terraform-aws-modules/ec2-instance/aws&quot;&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;~&amp;gt; 3.0&quot;&lt;/span&gt;

  &lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;single-instance&quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ì´ë•Œ, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;foo&lt;/code&gt;ëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ec2_instance&lt;/code&gt;ê°€ ë˜ê³  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bar&lt;/code&gt;ëŠ” í•´ë‹¹ ëª¨ë“ˆì˜ &lt;strong&gt;aws_instance&lt;/strong&gt;ì—ì„œ ì •ì˜í•œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;this&lt;/code&gt;ê°€ ë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ë¬¸ì œëŠ” &lt;strong&gt;3ï¸âƒ£ Modify Arguments&lt;/strong&gt; ë‹¨ê³„ì—ì„œ ë°œìƒí•©ë‹ˆë‹¤. Single Resourceì—ì„œëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;plan&lt;/code&gt;ì„ í†µí•´ ìˆ˜ì •í•´ì•¼ í•˜ëŠ” &lt;strong&gt;Arguments&lt;/strong&gt;ë“¤ì„ ì•Œ ìˆ˜ ìˆì§€ë§Œ, 
moduleì—ì„œ skeleton code ì´ì™¸ì— ë” ê¸°ì¬í•´ì•¼ í•˜ëŠ” variable ê°’ë“¤ì„ ì•Œ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
ì¦‰, module import ì´í›„ ìƒì„±ë˜ëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*.tfstate&lt;/code&gt; íŒŒì¼ì˜ &lt;strong&gt;json ê°’ì„ ì¼ì¼ì´ í™•ì¸&lt;/strong&gt;í•˜ì—¬ moduleì˜ &lt;strong&gt;input parameterì— í•´ë‹¹í•˜ëŠ” ê°’&lt;/strong&gt;ë“¤ì„ ì•Œì•„ë‚´ &lt;strong&gt;í•˜ë‚˜ì”© ë‹¤ ê¸°ì¬&lt;/strong&gt;í•˜ëŠ” ë°©ë²• ì™¸ì—ëŠ” 
ì˜¨ì „í•˜ê²Œ import ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;Reverse Engineeringìœ¼ë¡œ ì›ë˜ì˜ ì½”ë“œë¥¼ ì™„ë²½í•˜ê²Œ ì¬í˜„í•˜ê¸° ì–´ë ¤ìš´ ê²ƒì²˜ëŸ¼, êµ¬ì„±ì´ ë³µì¡í•œ ëª¨ë“ˆì€ Reverse Terraformingì´ ë§¤ìš° ì–´ë µìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;-reverse-terraform-open-source&quot;&gt;ğŸŒ Reverse Terraform Open Source&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;2ï¸âƒ£ Import Configuration&lt;/strong&gt; ë‹¨ê³„ì—ì„œ ìˆ˜í–‰í•œ ì‘ì—…ì€ &lt;a href=&quot;https://github.com/GoogleCloudPlatform/terraformer&quot;&gt;Terraformer&lt;/a&gt;(ì‘ì„± ì‹œì  ê¸°ì¤€ â˜… 8.1k),
&lt;a href=&quot;https://github.com/dtan4/terraforming&quot;&gt;Terraforming&lt;/a&gt;(ì—…ë°ì´íŠ¸ ì¢…ë£Œ) ë“±ê³¼ ê°™ì€ ì˜¤í”ˆì†ŒìŠ¤ ë„êµ¬ë¥¼ í™œìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;âš ï¸ ê³ ë ¤ ì‚¬í•­&lt;/strong&gt;&lt;br /&gt;
&lt;strong&gt;Terraformer&lt;/strong&gt;ëŠ” &lt;a href=&quot;https://github.com/GoogleCloudPlatform/terraformer/blob/master/docs/aws.md#profiles-support&quot;&gt;AWS configuration Profiles Select&lt;/a&gt;ì™€ &lt;a href=&quot;https://github.com/GoogleCloudPlatform/terraformer/blob/master/docs/aws.md#attribute-filters&quot;&gt;Attribute filters&lt;/a&gt;ê³¼ ê°™ì€ í¸ë¦¬í•œ ê¸°ëŠ¥ë“¤ì„ ì œê³µí•©ë‹ˆë‹¤. &lt;br /&gt;
ê·¸ëŸ¬ë‚˜ &lt;a href=&quot;https://github.com/GoogleCloudPlatform/terraformer/blob/master/docs/aws.md#supported-services&quot;&gt;terraformer AWS ë¦¬ì†ŒìŠ¤ ì§€ì› ë²”ìœ„&lt;/a&gt;ì—ì„œë„ í™•ì¸í•  ìˆ˜ ìˆë‹¤ì‹œí”¼,
ìœ„ì—ì„œ ì‘ì—…í•œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;aws_ssm_association&lt;/code&gt;ê³¼ ê°™ì´ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¦¬ì†ŒìŠ¤ë“¤ë„ ì¡´ì¬í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;outro&quot;&gt;Outro&lt;/h2&gt;

&lt;p&gt;ë§ˆì§€ë§‰ìœ¼ë¡œ Import Workflowë¥¼ ë‹¤ì‹œ í•œë²ˆ ì •ë¦¬í•˜ë©´ì„œ ë§ˆì¹˜ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Import ëŒ€ìƒ(ì´ë¯¸ í”„ë¡œë¹„ì €ë‹ ëœ ì¸í”„ë¼)ì´ ë˜ëŠ” Skeleton Code ì‘ì„±&lt;/li&gt;
  &lt;li&gt;Write Config : Import &amp;amp; Show ëª…ë ¹ì–´ ìˆ˜í–‰&lt;/li&gt;
  &lt;li&gt;Modify Arguments&lt;/li&gt;
  &lt;li&gt;Plan &amp;amp; Apply&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ì§€ê¸ˆê¹Œì§€ í…Œë¼í¼ ë” ìµìˆ™í•˜ê²Œ Import í¸ì„ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ì˜ëª»ëœ ë‚´ìš©ì€ ì§€ì í•´ ì£¼ì„¸ìš”! ğŸ˜ƒ&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ğŸ“š References&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Terraform Documentation &lt;a href=&quot;https://www.terraform.io/cli/commands/import&quot;&gt;Import Command&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Hashicorp Tutorial ë¬¸ì„œ &lt;a href=&quot;https://learn.hashicorp.com/tutorials/terraform/state-import?in=terraform/state&quot;&gt;Import Terraform Configuration&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;span class=&quot;table-of-contents-list&quot;&gt;Terraform Tips&lt;/span&gt;&lt;/p&gt;
&lt;ul class=&quot;table-of-contents-list&quot;&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips1&quot;&gt;Module &amp;amp; Output&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips2&quot;&gt;Data &amp;amp; Index&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips3&quot;&gt;Refresh &amp;amp; Replace&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips4&quot;&gt;Move (Refactoring)&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips5&quot;&gt;Import&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;</content>

      
      
      
      
      

      <author>
          <name>Heuristic Wave</name>
        
        
      </author>

      

      
        <category term="devops" />
      
        <category term="terraform" />
      

      
        <summary type="html">Terraform ë” ìµìˆ™í•˜ê²Œ 5 - Import</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">Terraform Tips 4 - Move (Refactoring)</title>
      <link href="https://heuristicwave.github.io/TerraformTips4" rel="alternate" type="text/html" title="Terraform Tips 4 - Move (Refactoring)" />
      <published>2022-06-07T00:00:00+00:00</published>
      <updated>2022-06-07T00:00:00+00:00</updated>
      <id>https://heuristicwave.github.io/TerraformTips4</id>
      <content type="html" xml:base="https://heuristicwave.github.io/TerraformTips4">&lt;p&gt;Terraform ë” ìµìˆ™í•˜ê²Œ 4 - Move (Refactoring)&lt;/p&gt;

&lt;h2 id=&quot;intro&quot;&gt;Intro&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://heuristicwave.github.io/TerraformTips3&quot;&gt;ì§€ë‚œ 3í¸&lt;/a&gt;ì—ì„œëŠ” &lt;em&gt;ì½”ë“œì˜ ë³€ê²½ ì—†ì´&lt;/em&gt; í˜•ìƒì„ ìœ ì§€í•˜ëŠ” ê¸°ë²• ì¤‘ í•˜ë‚˜ì¸ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Refresh&lt;/code&gt;ì™€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Replace&lt;/code&gt;ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.
4í¸ì—ì„œëŠ” &lt;em&gt;ì½”ë“œë¥¼ ë³€ê²½(Refactoring)&lt;/em&gt; í•  ë•Œ í˜•ìƒì„ ìœ ì§€í•˜ëŠ” ë°©ë²•ì¸ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Move&lt;/code&gt;ì™€ ê´€ë ¨ëœ ê¸°ëŠ¥ë“¤ì„ ì†Œê°œí•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;-moving-resources&quot;&gt;ğŸ¤¹ Moving Resources&lt;/h2&gt;

&lt;p&gt;Terraformìœ¼ë¡œ ì •ì˜í•œ ì¸í”„ë¼ëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform.tfstate&lt;/code&gt;ì— ê¸°ë¡ë˜ë©°, real-worldì˜ ê°ì²´ëŠ” íŠ¹ì • &lt;a href=&quot;https://www.terraform.io/cli/state/resource-addressing&quot;&gt;ë¦¬ì†ŒìŠ¤ ì£¼ì†Œ&lt;/a&gt;ì™€ ì—°ê²°ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
ê·¸ë˜ì„œ ì •ì˜í•œ ì¸í”„ë¼ ì½”ë“œë¥¼ ë³€ê²½ í›„, ì ìš©í•˜ë©´ real-worldì˜ ê°ì²´ì™€ ìƒíƒœê°€ ë³€ê²½ë©ë‹ˆë‹¤.
ì½”ë“œë¡œ ì •ì˜ëœ ì‹¤ì œ ì¸í”„ë¼ë¥¼ ìš´ì˜í•˜ê³  ìˆë‹¤ë©´, ì½”ë“œ ë¦¬íŒ©í† ë§ ì‹œ ë°œìƒí•˜ëŠ” ë¦¬ì†ŒìŠ¤ ë³€ê²½ ì§€ì ì„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;State&lt;/code&gt; ëª…ë ¹ì–´ë¥¼ í™œìš©í•´ í•´ì†Œí•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Commands&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;state mv&lt;/code&gt; : real-world ê°ì²´ì™€ ì—°ê²°ëœ ë¦¬ì†ŒìŠ¤ ì£¼ì†Œë¥¼ ë³€ê²½&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;state rm&lt;/code&gt; : real-world ê°ì²´ë¥¼ íŒŒê´´í•˜ì§€ ì•Šê³  ì½”ë“œë¡œ ì •ì˜í•œ ë¦¬ì†ŒìŠ¤ ê´€ë¦¬ ëŒ€ìƒ ì œê±°&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;state replace-provider&lt;/code&gt; : ì¬ìƒì„± ì—†ì´, ìƒˆë¡œìš´ providerì— ê¸°ì¡´ ë¦¬ì†ŒìŠ¤ ì „&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;-state-mv&quot;&gt;ğŸ›  state mv&lt;/h3&gt;

&lt;p&gt;ìœ„ 3ê°€ì§€ ëª…ë ¹ì–´ ì¤‘ì—ì„œë„ ê°€ì¥ í™œìš©ë„ê°€ ë†’ì€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;state mv&lt;/code&gt; ëª…ë ¹ì–´ì˜ ì˜ˆì‹œë“¤ì„ í™•ì¸í•´ ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.terraform.io/cli/commands/state/mv#example-rename-a-resource&quot;&gt;ë¦¬ì†ŒìŠ¤ ì´ë¦„ ì¬ì •ì˜&lt;/a&gt; : 
ë¦¬íŒ©í† ë§ ê³¼ì •ì—ì„œ ì •ì˜ëœ ë¦¬ì†ŒìŠ¤ ëª…ì„ ë³€ê²½í•˜ëŠ” ê²½ìš° &lt;br /&gt; 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform state mv {ResourceType}.{ExistingName} {ResourceType}.{ChangedName}&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.terraform.io/cli/commands/state/mv#example-move-a-resource-into-a-module&quot;&gt;ë¦¬ì†ŒìŠ¤ë¥¼ ëª¨ë“ˆë¡œ ì´ë™&lt;/a&gt; : 
ë£¨íŠ¸ì— ìœ„ì¹˜í•œ ë¦¬ì†ŒìŠ¤ë¥¼ child ëª¨ë“ˆì— í¬í•¨ì‹œì¼œ ë¦¬íŒ©í† ë§ í•˜ëŠ” ê²½ìš° &lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform state mv {Type}.{Name} module.{ModuleName}.{Type}.{Name}&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.terraform.io/cli/commands/state/mv#example-move-a-module-into-a-module&quot;&gt;ëª¨ë“ˆì„ ë‹¤ë¥¸ ëª¨ë“ˆë¡œ ì´ë™&lt;/a&gt; &lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform state mv module.{ModuleName} module.{ParentModuleName}.module.{ModuleName}&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.terraform.io/cli/commands/state/mv#example-move-a-particular-instance-of-a-resource-using-count&quot;&gt;meta-argument &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;for_each&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;count&lt;/code&gt;ë¡œ ì •ì˜ëœ íŠ¹ì • ë¦¬ì†ŒìŠ¤ êµì²´&lt;/a&gt; &lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform state mv {ResourceType}.{Before}[0] {ResourceType}.{After}[0]&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ï¸-moved-statements&quot;&gt;ğŸƒï¸ Moved statements&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://heuristicwave.github.io/TerraformTips3&quot;&gt;ì§€ë‚œ 3í¸&lt;/a&gt;ì—ì„œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;refresh&lt;/code&gt;ì™€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;taint&lt;/code&gt;ê°€ ê°€ì§„ í•œê³„ì ìœ¼ë¡œ ì¸í•˜ì—¬
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--refresh-only&lt;/code&gt;ì™€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;replace&lt;/code&gt;ê°€ ë‚˜ì™”ë“¯ì´, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;state mv&lt;/code&gt;ë„ í•œê³„ì ì´ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform taint&lt;/code&gt; command informs Terraform that a particular object has become degraded or damaged. &lt;br /&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;problems-with-terraform-state-mv&quot;&gt;&lt;a href=&quot;https://youtu.be/bDgoGBusX0k?t=178&quot;&gt;Problems with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform state mv&lt;/code&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;ìœ„ ë§í¬ë¡œ ì²¨ë¶€í•œ Terraform 1.1 ë²„ì „ì´ ì¶œì‹œí•˜ë©´ì„œ ë°œí‘œí•œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Move&lt;/code&gt; ê¸°ëŠ¥ì— ëŒ€í•œ ë°œí‘œ ìë£Œë¥¼ ë³´ë©´ ì•„ë˜ 3ê°€ì§€ ì´ìœ ë¡œ í•œê³„ì ì„ ë‹¤ë£¹ë‹ˆë‹¤.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Risky and error prone&lt;/li&gt;
  &lt;li&gt;Terraform Cloud users couldnâ€™t refactor within core workflows&lt;/li&gt;
  &lt;li&gt;Module authors couldnâ€™t coordinate changes themselves&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;3ê°€ì§€ì˜ í•œê³„ì ì´ ì–¸ê¸‰ë˜ì—ˆì§€ë§Œ, ê²°êµ­ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;refresh&lt;/code&gt; ë•Œì™€ ë§ˆì°¬ê°€ì§€ë¡œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;plan&lt;/code&gt;ì„ í†µí•œ ì˜ˆì¸¡ ê³¼ì •ì´ ì—†ëŠ” ë™ì¼í•œ ì´ìœ ë¡œ ìœ„ì™€ ê°™ì€ ë¬¸ì œê°€ ë°œìƒí•œë‹¤ëŠ” ì‚¬ì‹¤ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;refactoring&quot;&gt;&lt;a href=&quot;https://www.terraform.io/language/modules/develop/refactoring&quot;&gt;Refactoring&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;ì•ì„œ ì–¸ê¸‰í•œ í•œê³„ì ë“¤ì€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;plan&lt;/code&gt; ê¸°ëŠ¥ì´ ì—†ëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mv&lt;/code&gt; ëª…ë ¹ì–´ ëŒ€ì‹  ê¸°ì¡´ì˜ í…Œë¼í¼ ë¬¸ë²•ì— &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;moved&lt;/code&gt; blockì´ ì¶”ê°€ë˜ë©° í•´ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.
ì•„ë˜ ì˜ˆì‹œëŠ” &lt;a href=&quot;https://www.terraform.io/language/modules/develop/refactoring#moved-block-syntax&quot;&gt;ê³µì‹ ë¬¸ì„œ&lt;/a&gt;ì— ê¸°ì¬ëœ ì˜ˆì œì…ë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-terraform highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;locals&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;instances&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;tomap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;big&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;instance_type&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;m3.large&quot;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;small&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;instance_type&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;t2.medium&quot;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;resource&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;aws_instance&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;a&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;for_each&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;local&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;instances&lt;/span&gt;

  &lt;span class=&quot;nx&quot;&gt;instance_type&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;instance_type&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# (other resource-type-specific configuration)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;moved&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;aws_instance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;to&lt;/span&gt;   &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;aws_instance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;small&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;moved&lt;/code&gt; blockì— ë³€ê²½ ì „í›„ ìƒíƒœë¥¼ ì„ ì–¸í•˜ì—¬, ê¸°ì¡´ ìƒíƒœë¥¼ ë°”ê¾¸ëŠ” ëª…ë ¹ì¡°ì°¨ë„ ì½”ë“œë¡œ ì„ ì–¸í•˜ì—¬ ìƒíƒœë¥¼ ë°”ê¾¸ëŠ” í–‰ìœ„ë¥¼ ì½”ë“œí™”í–ˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;ï¸-ê³ ë ¤ì‚¬í•­&quot;&gt;â‰ï¸ ê³ ë ¤ì‚¬í•­&lt;/h3&gt;

&lt;p&gt;í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œ ìš´ì˜ì„ í•˜ë‹¤ ë³´ë©´ ìµœì í™” ê³¼ì • ì¤‘ ë¦¬ì†ŒìŠ¤ ìŠ¤í™(ì¸ìŠ¤í„´ìŠ¤ ì¢…ë¥˜, íƒ€ì…)ì´ ìì£¼ ë³€ê²½ë©ë‹ˆë‹¤.
ê·¸ëŸ¼ ì•„ë˜ì™€ ê°™ì€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;moved&lt;/code&gt; ë¸”ë¡ì´ ì²´ì¸ê³¼ ê°™ì´ ê¸¸ì–´ì§€ê²Œ ë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-terraform highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# Block 1&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;moved&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;aws_instance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;to&lt;/span&gt;   &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;aws_instance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Block 2&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;moved&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;aws_instance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;to&lt;/span&gt;   &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;aws_instance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;c&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ì´ëŠ” ì˜¤íˆë ¤ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” í˜¹ì€ &lt;em&gt;ì¤‘ë³µëœ ì½”ë“œë¥¼ ì§€ìš°ê³  ë¡œì§ì„ ì´í•´í•˜ê¸° ì‰½ê²Œ ë””ìì¸&lt;/em&gt;í•´ì•¼ í•˜ëŠ” &lt;strong&gt;ë¦¬íŒ©í† ë§ê³¼ëŠ” ë©€ì–´ì§€ê²Œ&lt;/strong&gt; ë©ë‹ˆë‹¤.
ê·¸ëŸ¬ë¯€ë¡œ AWS ë¦¬ì†ŒìŠ¤ì˜ ê²½ìš° &lt;strong&gt;ë‹¨ìˆœ ìŠ¤í™ ë³€ê²½&lt;/strong&gt;ê³¼ ê°™ì€ ì‘ì—…ì€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Launch templates&lt;/code&gt;ì„ ì‚¬ìš©í•˜ëŠ” ê²Œ ì¢‹ìŠµë‹ˆë‹¤.
ì´ì²˜ëŸ¼ AWS ì„œë¹„ìŠ¤ ë‚´ì—ì„œ &lt;strong&gt;í˜•ìƒ ê´€ë¦¬&lt;/strong&gt; ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ í™œìš©í•´, moved ë¸”ë¡ì„ ìƒì„±í•˜ëŠ” ì‘ì—…ì„ ìµœì†Œí™”í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;outro&quot;&gt;Outro&lt;/h2&gt;

&lt;p&gt;ì§€ê¸ˆê¹Œì§€ ë¦¬íŒ©í† ë§ ì‘ì—…ì„ ìœ„í•´ í•„ìˆ˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;state mv&lt;/code&gt;ì™€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;moved&lt;/code&gt; syntax ì‚¬ìš©ë²•ì„ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Move&lt;/code&gt;ì˜ íƒ„ìƒ ê³¼ì •ì—ì„œ ì„ ì–¸í˜• ë„êµ¬ì¸ í…Œë¼í¼ì˜ ëª©ì ì— ë§ê²Œ ì§„í™”í•´ë‚˜ê°€ëŠ” ëª¨ìŠµê³¼ ì´ˆê¸° ì„¤ê³„ì˜ ì¤‘ìš”ì„±ì„ ê³ ë¯¼í•´ ë³¼ ìˆ˜ ìˆì—ˆë˜ ì¢‹ì€ ê¸°íšŒì˜€ìŠµë‹ˆë‹¤.
ì—¬ë‹´ìœ¼ë¡œ ì €ëŠ” í…Œë¼í¼ ë²„ì „ì´ 0.12ì¼ ë•Œ ë‹¤ë£¨ê¸° ì‹œì‘í–ˆëŠ”ë°, 2ë…„ ë§Œì— ë²„ì „ 1.2.2ì— ì´ë¥´ë©° ì •ì°©í•´ë‚˜ê°€ëŠ” ê³¼ì •ì„ ë³´ë‹ˆ
ì‚¬ìš©ìë„ IaC ë„êµ¬ì˜ ì² í•™ì„ ì´í•´í•˜ë©° í•¨ê»˜ ì„±ì¥í•˜ëŠ” ê¸°ë¶„ì— ê°ê²©ìŠ¤ëŸ½ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì§€ê¸ˆê¹Œì§€ í…Œë¼í¼ ë” ìµìˆ™í•˜ê²Œ Move(Refactoring) í¸ì„ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ì˜ëª»ëœ ë‚´ìš©ì€ ì§€ì í•´ ì£¼ì„¸ìš”! ğŸ˜ƒ&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;span class=&quot;table-of-contents-list&quot;&gt;Terraform Tips&lt;/span&gt;&lt;/p&gt;
&lt;ul class=&quot;table-of-contents-list&quot;&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips1&quot;&gt;Module &amp;amp; Output&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips2&quot;&gt;Data &amp;amp; Index&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips3&quot;&gt;Refresh &amp;amp; Replace&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips4&quot;&gt;Move (Refactoring)&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips5&quot;&gt;Import&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;</content>

      
      
      
      
      

      <author>
          <name>Heuristic Wave</name>
        
        
      </author>

      

      
        <category term="devops" />
      
        <category term="terraform" />
      

      
        <summary type="html">Terraform ë” ìµìˆ™í•˜ê²Œ 4 - Move (Refactoring)</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">Terraform Tips 3 - Refresh &amp;amp; Replace</title>
      <link href="https://heuristicwave.github.io/TerraformTips3" rel="alternate" type="text/html" title="Terraform Tips 3 - Refresh &amp; Replace" />
      <published>2022-05-28T00:00:00+00:00</published>
      <updated>2022-05-28T00:00:00+00:00</updated>
      <id>https://heuristicwave.github.io/TerraformTips3</id>
      <content type="html" xml:base="https://heuristicwave.github.io/TerraformTips3">&lt;p&gt;Terraform ë” ìµìˆ™í•˜ê²Œ 3 - Refresh &amp;amp; Replace&lt;/p&gt;

&lt;h2 id=&quot;intro&quot;&gt;Intro&lt;/h2&gt;

&lt;p&gt;IaC(Infrastructure as Code)ë¥¼ ìš´ìš©í•˜ë©° ì¤‘ìš”í•˜ê²Œ ìƒê°í•˜ëŠ” í¬ì¸íŠ¸ ì¤‘ í•˜ë‚˜ëŠ”, &lt;strong&gt;ì½”ë“œë¡œ ì •ì˜í•œ í˜•ìƒ&lt;/strong&gt;ê³¼ &lt;strong&gt;ì‹¤ì œ ì¸í”„ë¼ì˜ í˜•ìƒ&lt;/strong&gt;ì„ ë™ì¼í•˜ê²Œ ìœ ì§€í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.
Terraformì—ì„œëŠ” &lt;strong&gt;Configuration Drift&lt;/strong&gt;(ì •ì˜í•œ í˜•ìƒê³¼ ë‹¬ë¼ì§€ëŠ” ê²½ìš°)ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ë‹¤ì–‘í•œ ëª…ë ¹ì–´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” í˜•ìƒì„ ìœ ì§€í•˜ëŠ” ë‹¤ì–‘í•œ ê¸°ë²• ì¤‘ í•˜ë‚˜ì¸ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Refresh&lt;/code&gt;ì™€ ë¹„ìŠ·í•˜ë©´ì„œë„ í—·ê°ˆë¦¬ëŠ” ê°œë…ì¸ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Replace&lt;/code&gt;ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ï¸-refresh&quot;&gt;â™»ï¸ Refresh&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;refresh&lt;/code&gt; ëª…ë ¹ì–´ëŠ” Configuration Driftê°€ ë°œìƒí–ˆì„ ë•Œ, í˜„ì¬ ìƒíƒœë¥¼ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform.tfstate&lt;/code&gt;ì— ë°˜ì˜í•´ í˜„ì¬ ì¸í”„ë¼ì˜ ìƒíƒœë¡œ ìµœì‹ í™”ì‹œí‚¤ëŠ” ëª…ë ¹ì–´ì…ë‹ˆë‹¤.
ë¬¸ì„œì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ê¸°ì¬ë˜ì–´ ìˆì§€ë§Œ, ì²˜ìŒ ì ‘í•œë‹¤ë©´ ë¬´ì—‡ì„ ë§í•˜ëŠ”ì§€ ì‰½ê²Œ ì™€ë‹¿ì§€ ì•ŠìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform refresh&lt;/code&gt; command reads the current settings from all managed remote objects and updates the Terraform state to match. &lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform refresh&lt;/code&gt; ëª…ë ¹ì–´ëŠ” ì›ê²© ê°ì²´ì˜ í˜„ì¬ ìƒíƒœë¥¼ ì½ì–´ Terraform stateì™€ ì¼ì¹˜ì‹œí‚µë‹ˆë‹¤.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Refresh ëª…ë ¹ì–´ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ìƒí™©ì—ì„œ ì‚¬ìš©í•©ë‹ˆë‹¤. í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œ í´ëŸ¬ìŠ¤í„°ë¥¼ ìš´ìš©í•˜ë©´ ì¸ìŠ¤í„´ìŠ¤ì˜ Scaleì´ ë³€í™”í•¨ì— ë”°ë¼ ì¸ìŠ¤í„´ìŠ¤ ID ê°’ë„ ë³€í•©ë‹ˆë‹¤.
ì´ ê²½ìš° ì½”ë“œë¡œ ì •ì˜í•œ ìƒíƒœëŠ” í”„ë¡œë¹„ì €ë‹ ë‹¹ì‹œ ì‹œì ì„ ê¸°ì–µí•˜ì§€ë§Œ, ì‹¤ì œ ì¸í”„ë¼ì˜ í˜„ìƒì€ ìµœì‹  ì¸ìŠ¤í„´ìŠ¤ì˜ ìƒíƒœë¥¼ ê°€ì§€ê³  ìˆìœ¼ë¯€ë¡œ Driftê°€ ë°œìƒí•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/terraform/state.png&quot; alt=&quot;state&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ìœ„ ìƒí™©ì—ì„œ Refresh ëª…ë ¹ì–´ë¡œ &lt;em&gt;ì½”ë“œì˜ ìƒíƒœì™€ ì¸í”„ë¼ì˜ í˜„ì¬ ìƒíƒœë¥¼ ì¼ì¹˜&lt;/em&gt;ì‹œí‚¬ ìˆ˜ ìˆì§€ë§Œ, í•´ë‹¹ ëª…ë ¹ì–´ëŠ” &lt;strong&gt;deprecate&lt;/strong&gt; ë˜ì—ˆìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´ ê´€ë¦¬ìê°€ ë¬´ì—‡ì´ ë³€ê²½ë˜ëŠ”ì§€ ì•Œì§€ ëª»í•˜ê³  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tfstate&lt;/code&gt;ê°€ ìµœì‹ í™”ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
ê·¸ë˜ì„œ í…Œë¼í¼ v0.15.4.ì—ì„œë¶€í„°ëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;plan&lt;/code&gt;ê³¼ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;apply&lt;/code&gt;ì— &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-refresh-only&lt;/code&gt; ì˜µì…˜ì„ ì œê³µí•˜ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;refresh-only&quot;&gt;â€“refresh-only&lt;/h3&gt;

&lt;p&gt;ì™¼ìª½ì€ í”„ë¡œë¹„ì €ë‹ ë‹¹ì‹œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*.tfstate&lt;/code&gt;ì…ë‹ˆë‹¤. ì˜¤ë¥¸ìª½ì€ í•´ë‹¹ í™˜ê²½ì„ ì½˜ì†”ì—ì„œ health checkë¥¼ í•˜ëŠ” ê°„ê²©ì„ 120ì´ˆë¡œ ë³€ê²½í•œ í™”ë©´ì…ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/terraform/refresh.png&quot; alt=&quot;refresh&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ì˜ë„ì ìœ¼ë¡œ Drfit ìƒí™©ì„ ë§Œë“¤ì—ˆê¸° ë•Œë¬¸ì— &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform plan --refresh-only&lt;/code&gt; ëª…ë ¹ì–´ë¡œ ì ê²€í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì–´ë–¤ ë¦¬ì†ŒìŠ¤ ê°ì²´ê°€ ë³€ê²½ë  ê²ƒì¸ì§€ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/terraform/refresh-only.png&quot; alt=&quot;refresh-only&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ìœ„ ì‚¬ì§„ì—ì„œëŠ” elbì˜ AutoScalingGroup ë‚´ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ë°”ë€Œì–´ ìµœì‹ í™”ë¨ê³¼, ì œê°€ ì˜ë„ì ìœ¼ë¡œ ì½˜ì†”ì—ì„œ ë³€ê²½í•œ health_check ê°’ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì´ì²˜ëŸ¼ í•­ìƒ IaCì˜ í˜•ìƒì„ ë³€ê²½í•˜ê¸° ì „, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;plan&lt;/code&gt;ì„ í†µí•œ ì‚¬ì „ ê²€í†  ê¸°ëŠ¥ì„ ì œê³µí•˜ê¸° ìœ„í•´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--refresh-only&lt;/code&gt; ì˜µì…˜ì´ ì œê³µë˜ì—ˆìŠµë‹ˆë‹¤.
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;plan&lt;/code&gt;ìœ¼ë¡œ ë¬¸ì œì—†ìŒì„ í™•ì¸í–ˆë‹¤ë©´, ì´ì–´ì„œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform apply --refresh-only&lt;/code&gt; ëª…ë ¹ì–´ë¡œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*.tfstate&lt;/code&gt;ë¥¼ ìµœì‹ í™” ì‹œí‚µë‹ˆë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;ï¸-ì£¼ì˜&quot;&gt;âš ï¸ ì£¼ì˜&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*.tfstate&lt;/code&gt;ëŠ” Refreshë¡œ ìµœì‹ í™”ë˜ì—ˆì§€ë§Œ, ì—¬ì „íˆ ì½”ë“œë¡œ ì •ì˜í•œ interval ê°’ì€ 180ì…ë‹ˆë‹¤.
ê·¸ëŸ¬ë¯€ë¡œ ì½”ë“œë¡œ ì •ì˜ëœ ë¶€ë¶„ì„ ë³€ê²½í•˜ì§€ ì•Šì€ ìƒí™©ì—ì„œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform apply&lt;/code&gt; ëª…ë ì–´ë¥¼ ì¹˜ë©´, í˜„ì¬ 120ì˜ interval ê°’ì´ 180ìœ¼ë¡œ ì›ë³µ ë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ï¸-taint&quot;&gt;â˜ ï¸ Taint&lt;/h2&gt;

&lt;p&gt;Replaceë¥¼ ì„¤ëª…í•˜ê¸° ì•ì„œ, ê¸°ì¡´ í…Œë¼í¼ì—ëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;taint&lt;/code&gt;ë¼ëŠ” ëª…ë ¹ì–´ê°€ ìˆìŠµë‹ˆë‹¤. ë¬¸ì„œì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ê¸°ì¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform taint&lt;/code&gt; command informs Terraform that a particular object has become degraded or damaged. &lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform taint&lt;/code&gt; ëª…ë ¹ì–´ëŠ” íŠ¹ì • ê°ì²´ê°€ ì €í•˜ë˜ê±°ë‚˜ ì†ìƒë˜ì—ˆìŒì„ Terraformì— ì•Œë¦½ë‹ˆë‹¤.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Taint ëª…ë ¹ì–´ëŠ” &lt;strong&gt;ì¸í”„ë¼ë¥¼ ì •ì˜í•œ ì½”ë“œëŠ” ê·¸ëŒ€ë¡œ&lt;/strong&gt;ì¸ ìƒíƒœì—ì„œ &lt;strong&gt;ë¦¬ì†ŒìŠ¤ë§Œ êµì²´&lt;/strong&gt;í•  ê²½ìš°ì— ì‚¬ìš©í•©ë‹ˆë‹¤.
ì €ì˜ ê²½ìš° ìŠ¤íŒŒì´í¬ì„± íŠ¸ë˜í”½ì„ ê°‘ìê¸° ë°›ì•„ ë¡œë“œë°¸ëŸ°ì„œì˜ ì„±ëŠ¥ì´ ì €í•˜ë˜ì—ˆì„ ë•Œ, ELBë¥¼ êµì²´í•œ ê²½í—˜ì´ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì´ëŸ° ìƒí™©ì—ì„œ ì„±ëŠ¥ì´ ì €í•˜ëœ í˜¹ì€ &lt;strong&gt;êµì²´ê°€ í•„ìš”í•œ ë¦¬ì†ŒìŠ¤&lt;/strong&gt; ê°ì²´ë§Œì„ on/off ë°©ì‹ìœ¼ë¡œ &lt;strong&gt;ì£¼ì„ ì²˜ë¦¬ ë° í•´ì œ&lt;/strong&gt;í•˜ë©° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;apply&lt;/code&gt; ëª…ë ¹ì–´ë¡œ êµì²´í•  ìˆ˜ ìˆì§€ë§Œ,
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;taint(êµì²´ ë¦¬ì†ŒìŠ¤ë¥¼ ë§ˆí‚¹)&lt;/code&gt; ëª…ë ¹ì–´ë¡œ êµì²´í•˜ê³  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;untaint(êµì²´ ë¦¬ì†ŒìŠ¤ ë§ˆí‚¹ í•´ì œ)&lt;/code&gt; ëª…ë ¹ì–´ë¡œ êµì²´í•  í•„ìš”ê°€ ì—†ë‹¤ê³  ëª…ë ¹í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ê·¸ëŸ¬ë‚˜ ìœ„ì™€ ê°™ì€ ì›Œí¬í”Œë¡œìš°ëŠ” í…Œë¼í¼ v0.15.2.ì—ì„œ deprecate ë˜ì—ˆê³ , &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-replace&lt;/code&gt; ì˜µì…˜ì„ ì œê³µí•˜ë©° ë” ì§ê´€ì ì¸ ì‚¬ìš©ì ê²½í—˜ì„ ì œê³µí•˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;--replace&quot;&gt;ğŸŒ— -replace&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-replace&lt;/code&gt; ì˜µì…˜ì€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;taint&lt;/code&gt; ëª…ë ¹ì–´ì™€ ë™ì¼í•˜ê²Œ ì‘ìš©í•˜ë©°, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;untaint&lt;/code&gt; ëª…ë ¹ì–´ë¥¼ ì¹  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.
ì½”ë“œëŠ” ê·¸ëŒ€ë¡œì§€ë§Œ ë¦¬ì†ŒìŠ¤ ê°ì²´ê°€ ë³€ê²½ë˜ëŠ” Replace ëª…ë ¹ì–´ ì‚¬ìš©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;terraform apply &lt;span class=&quot;nt&quot;&gt;-replace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;aws_instance.example[0]&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;êµì²´í•  ë¦¬ì†ŒìŠ¤ ì¸ìê°’ë¥¼ ì°¾ê¸° ìœ„í•´, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform state list&lt;/code&gt; ëª…ë ¹ì–´ë¡œ targetì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/terraform/replace.png&quot; alt=&quot;replace&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ğŸ’¡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-replace&lt;/code&gt; ì˜µì…˜ ì—­ì‹œ, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--refresh-only&lt;/code&gt; ì˜µì…˜ê³¼ ë™ì¼í•˜ê²Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;plan&lt;/code&gt; ëª…ë ¹ì–´ì™€ í•¨ê»˜ ì ìš©í•˜ì—¬ ë³€ê²½ ì§€ì ì„ ë¯¸ë¦¬ íŒŒì•…í•˜ê³ 
ë³€ê²½ë˜ëŠ” ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ê²€í† ë¥¼ í•˜ëŠ” ìŠµê´€ì„ ë“¤ì…ì‹œë‹¤!&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;outro&quot;&gt;Outro&lt;/h2&gt;

&lt;p&gt;Refreshì™€ Replace ë¹„ìŠ·í•˜ë©´ì„œë„ ì „í˜€ ë‹¤ë¥¸ ë‘ ëª…ë ¹ì–´ì˜ ë³€ì²œì‚¬ë¥¼ í™•ì¸í•˜ë©° ì¸í”„ë¼ì˜ ë™ì¼í•œ í˜•ìƒì„ ìœ ì§€í•˜ê¸° ìœ„í•œ ë°©ë²•ì„ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.
ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œ ì–¸ê¸‰í•œ ë°©ë²• ì™¸ì—ë„ í˜•ìƒì„ ì¼ì¹˜ì‹œí‚¤ëŠ” ë°©ë²•ë“¤ì´ ì¡´ì¬í•˜ì§€ë§Œ, ìœ„ 2ê°€ì§€ ëª…ë ¹ì–´ë§Œ ì œëŒ€ë¡œ í™œìš©í•˜ë©´ ëŒ€ë¶€ë¶„ì˜ ì¸í”„ë¼ì˜ í˜•ìƒì´ ë‹¬ë¼ì§€ëŠ” ì‚¬íƒœë¥¼ ì˜ˆë°©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
IaCì—ì„œëŠ” í•­ìƒ í˜•ìƒì„ ë³€ê²½í•˜ê¸° ì „, ë³€ê²½ë˜ëŠ” ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ê²€í† ë¥¼ í•˜ëŠ” ìŠµê´€ì´ ë§¤ìš° ì¤‘ìš”í•˜ë‹¤ëŠ” ê²ƒì„ ê°•ì¡°í•˜ë©° ì´ë²ˆ 3í¸ì„ ë§ˆì¹©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì§€ê¸ˆê¹Œì§€ í…Œë¼í¼ ë” ìµìˆ™í•˜ê²Œ Refresh &amp;amp; Replace í¸ì„ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ì˜ëª»ëœ ë‚´ìš©ì€ ì§€ì í•´ ì£¼ì„¸ìš”! ğŸ˜ƒ&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;span class=&quot;table-of-contents-list&quot;&gt;Terraform Tips&lt;/span&gt;&lt;/p&gt;
&lt;ul class=&quot;table-of-contents-list&quot;&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips1&quot;&gt;Module &amp;amp; Output&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips2&quot;&gt;Data &amp;amp; Index&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips3&quot;&gt;Refresh &amp;amp; Replace&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips4&quot;&gt;Move (Refactoring)&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips5&quot;&gt;Import&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;</content>

      
      
      
      
      

      <author>
          <name>Heuristic Wave</name>
        
        
      </author>

      

      
        <category term="devops" />
      
        <category term="terraform" />
      

      
        <summary type="html">Terraform ë” ìµìˆ™í•˜ê²Œ 3 - Refresh &amp;amp; Replace</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">Using the awslogs log driver in ECS(Fargate)</title>
      <link href="https://heuristicwave.github.io/ECS_CW_Logs" rel="alternate" type="text/html" title="Using the awslogs log driver in ECS(Fargate)" />
      <published>2022-03-01T00:00:00+00:00</published>
      <updated>2022-03-01T00:00:00+00:00</updated>
      <id>https://heuristicwave.github.io/ECS_CW_Logs</id>
      <content type="html" xml:base="https://heuristicwave.github.io/ECS_CW_Logs">&lt;p&gt;ECS Taskì˜ ì»¨í…Œì´ë„ˆê°€ ìƒì‚°í•˜ëŠ” ë¡œê·¸ë“¤ì€ CloudWatchë¥¼ í™œìš©í•˜ì—¬ ìˆ˜ì§‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
Cloudwatch Logsë¥¼ ìš´ì˜í•˜ë©° ë¡œê·¸ ì ì¬ê°€ ì œëŒ€ë¡œ ë˜ì§€ ì•Šê±°ë‚˜, Timestampê°€ ì¼ì¹˜í•˜ì§€ ì•Šê±°ë‚˜, ì§€ë‚˜ì¹œ ì§€ì—° ì‹œê°„ì´ ë°œìƒí•˜ê±°ë‚˜, ì•Œì•„ë³´ê¸° ì–´ë ¤ìš´ í˜•íƒœë¡œ ë¡œê·¸ê°€ ìŒ“ì¸ë‹¤ë©´ 
ì•„ë˜ ìš”ì†Œë“¤ì„ ê³ ë¯¼í•´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;h2 id=&quot;-references&quot;&gt;ğŸ“š References&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.aws.amazon.com/AmazonECS/latest/developerguide/using_awslogs.html&quot;&gt;Using the awslogs log driver&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Regular_expression&quot;&gt;Regular expression Wikipedia&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;fargateì—ì„œ-í•„ìš”í•œ-awslogs-ë¡œê·¸-ë“œë¼ì´ë²„&quot;&gt;Fargateì—ì„œ í•„ìš”í•œ awslogs ë¡œê·¸ ë“œë¼ì´ë²„&lt;/h2&gt;

&lt;p&gt;ê³µì‹ ë¬¸ì„œì—ì„œëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;awslogs-region&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;awslogs-group&lt;/code&gt; ë§Œì´ í•„ìš”í•˜ë‹¤ê³  í•˜ì§€ë§Œ, &lt;strong&gt;Fargate&lt;/strong&gt;ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;awslogs-stream-prefix&lt;/code&gt;ì´ ì¶”ê°€ì ìœ¼ë¡œ í•„ìš”í•©ë‹ˆë‹¤.
ë˜í•œ, ê°€ì‹œì„±ì„ í™•ë³´í•˜ê¸° ìœ„í•´ CloudWatch Logsì— ìˆ˜ì§‘ëœ ì—¬ëŸ¬ ì¤„ì˜ ë¡œê·¸ë¥¼ í•˜ë‚˜ì˜ ë©”ì‹œì§€ë¡œ ë³´ê¸° ìœ„í•´ì„œëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;awslogs-multiline-pattern&lt;/code&gt;ì´ í•„ìˆ˜ì ìœ¼ë¡œ í•„ìš”í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;awslogs-multiline-pattern&quot;&gt;awslogs-multiline-pattern&lt;/h3&gt;

&lt;p&gt;ê³µì‹ ë¬¸ì„œì˜ Note ë¶€ë¶„ì„ ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì€ ë©”ëª¨ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. &lt;em&gt;(ì •ë§ ê³µì‹ ë¬¸ì„œëŠ” í•œ ì¤„ë„ ê·¸ëƒ¥ ì§€ë‚˜ì¹  ìˆ˜ ì—†ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤!)&lt;/em&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Multiline logging performs regular expression parsing and matching of all log messages.
This may have a negative impact on logging performance.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ì‹¤ì œë¡œ ì €ëŠ” ì •ê·œ í‘œí˜„ì‹ì„ ê°„ê³¼í•˜ê³  ê²€ì¦ë˜ì§€ ì•Šì€ ì •ê·œì‹ë“¤ì„ ì ìš©í–ˆë‹¤ê°€ ë‹¤ìŒê³¼ ê°™ì€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Negative Impact&lt;/code&gt;ë¥¼ ë§Œë‚¬ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;ë¡œê·¸ê°€ ìˆ˜ì§‘ë˜ê¸°ê¹Œì§€ì˜ ì§€ë‚˜ì¹œ ì§€ì—° ì‹œê°„ ë°œìƒ (10ë¶„ ì´ìƒ)&lt;/li&gt;
  &lt;li&gt;ì§€ì—°ì‹œê°„ìœ¼ë¡œ ì¸í•œ Timestamp ë¶ˆì¼ì¹˜ (Ingestion timeê³¼ Event Timestampì˜ ê³¼ë„í•œ ì˜¤ì°¨)&lt;/li&gt;
  &lt;li&gt;1, 2ë²ˆ ì´ìœ ë¡œ ì¸í•œ ë¡œê·¸ ë¯¸ìˆ˜ì§‘&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;regular-expression-lab&quot;&gt;Regular Expression Lab&lt;/h2&gt;

&lt;p&gt;ì§€ê¸ˆë¶€í„° ì˜ˆì‹œë“¤ì„ í†µí•´, CW Logsë¥¼ ìš´ì˜í•˜ë©° ë§Œë‚  ìˆ˜ ìˆëŠ” ìƒí™©ë“¤ì„ ì²´í—˜í•´ ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;ìƒ˜í”Œ ë¡œê·¸ë¥¼ ë³µì‚¬í•˜ì—¬ &lt;a href=&quot;https://regexr.com&quot;&gt;RegExr&lt;/a&gt;ì—ì„œ match ì—¬ë¶€ë¥¼ í…ŒìŠ¤íŠ¸í•´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;case-1ï¸âƒ£&quot;&gt;Case 1ï¸âƒ£&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;awslogs-multiline-pattern&lt;/code&gt;ì˜ &lt;strong&gt;value&lt;/strong&gt;ë¡œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;^INFO&lt;/code&gt;ë¥¼ ì„¤ì •í•  ê²½ìš° 3ê°œì˜ Line ì¤‘ match ë˜ëŠ” ë¼ì¸ì€ ëª‡ ë¼ì¸ì¼ê¹Œìš”?&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;INFO | &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;pkg/trace/info/stats.go:104 &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;LogStats&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;                &lt;span class=&quot;c&quot;&gt;# Line 1&lt;/span&gt;
INFO | &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;pkg/trace/info/stats.go:104 &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;LogStats&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;                &lt;span class=&quot;c&quot;&gt;# Line 2&lt;/span&gt;
12:15:10 UTC | INFO | &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;pkg/trace/info/stats.go:104 &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;LogStats&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# Line 3&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;details&gt;
  &lt;summary&gt;ğŸ– ì •ë‹µ ë³´ê¸°&lt;/summary&gt;

  &lt;blockquote&gt;
    &lt;p&gt;&lt;strong&gt;INFO&lt;/strong&gt; | (pkg/trace/info/stats.go:104 in LogStats)                # Line 1&lt;/p&gt;
  &lt;/blockquote&gt;

  &lt;p&gt;^(caret) ì€ ì „ì²´ ë¬¸ìì—´ì˜ ì‹œì‘ ìœ„ì¹˜ì—ë§Œ ì¼ì¹˜í•˜ë¯€ë¡œ, Line 1 ë§Œì´ match ë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;/details&gt;

&lt;h3 id=&quot;case-2ï¸âƒ£&quot;&gt;Case 2ï¸âƒ£&lt;/h3&gt;

&lt;p&gt;ë‹¤ìŒì€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ì‹œ:ë¶„:ì´ˆ&lt;/code&gt;ë¥¼ í‘œí˜„í•˜ëŠ” ì •ê·œ í‘œí˜„ì‹ ì…ë‹ˆë‹¤. í•´ë‹¹ ì •ê·œ í‘œí˜„ì‹ì€ ì•„ë˜ 3ì¤„ì„ ëª¨ë‘ Match ì‹œí‚¬ ìˆ˜ ìˆì„ê¹Œìš”? &lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(0[1-9]|1[0-9]|2[0-4]):(0[1-9]|[1-5][0-9]):(0[1-9]|[1-5][0-9])&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;07:36:35 | Which line will match? Line 1
08:00:01 | I am Line 2!
08:01:00 | I am Line 3!
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;details&gt;
  &lt;summary&gt;ğŸ– ì •ë‹µ ë³´ê¸°&lt;/summary&gt;

  &lt;blockquote&gt;
    &lt;p&gt;&lt;strong&gt;07:36:35&lt;/strong&gt; | I was matched &lt;br /&gt;
08:00:01 | I was not matched! &lt;br /&gt;
08:01:00 | I was not matched! &lt;br /&gt;&lt;/p&gt;
  &lt;/blockquote&gt;

  &lt;p&gt;ê·¸ë ‡ë‹¤ë©´ ì™œ? ì²« ë²ˆì§¸ ë¼ì¸ë§Œì´ ë§¤ì¹­ë˜ì—ˆì„ê¹Œìš”? &lt;strong&gt;ë¶„, ì´ˆ&lt;/strong&gt;ì— í•´ë‹¹í•˜ëŠ” í‘œí˜„ì‹ì„ ìœ ì‹¬íˆ ì‚´í´ë³´ë©´ 00ë¶„ 00ì‹œëŠ” ë§¤ì¹­ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
ë•Œë¬¸ì— ê°ê° (ë¶„ : &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(0[0-9]|[1-5][0-9])&lt;/code&gt;, ì´ˆ : &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(0[0-9]|[1-5][0-9])&lt;/code&gt;)ë¡œ ìˆ˜ì •í•´ì•¼ ìœ„ 3ì¤„ì„ ë§¤ì¹­ ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;/details&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h3 id=&quot;other-case&quot;&gt;Other Case&lt;/h3&gt;

&lt;p&gt;ìœ„ 2ê°€ì§€ ì¼€ì´ìŠ¤ë§Œ ì¤€ë¹„ëœë‹¤ë©´ ëª¨ë“  ë¡œê·¸ë“¤ì„ ì œëŒ€ë¡œ ë¶„ë¦¬í•˜ì—¬ ìˆ˜ì§‘í•  ìˆ˜ ìˆì„ê¹Œìš”?&lt;/p&gt;

&lt;details&gt;
  &lt;summary&gt;ğŸ¤” ìƒê°í•´ë³´ê¸°&lt;/summary&gt;

  &lt;ul&gt;
    &lt;li&gt;Flagê°€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;INFO&lt;/code&gt; í˜•ì‹ì´ ì•„ë‹Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WARN&lt;/code&gt;ì´ ë°œìƒí•  ê²½ìš°&lt;/li&gt;
    &lt;li&gt;Timestampë¡œ ë§¤ì¹­ ì‘ì—…ì„ í•˜ëŠ”ë° í•œ ì¤„ì— 1íšŒ ì´ìƒ Timestampê°€ í¬í•¨ëœ ê²½ìš°
      &lt;blockquote&gt;
        &lt;p&gt;ex) &lt;strong&gt;08:00:01&lt;/strong&gt; | Itâ€™s &lt;strong&gt;08:02:03&lt;/strong&gt; right now.&lt;/p&gt;
      &lt;/blockquote&gt;
    &lt;/li&gt;
    &lt;li&gt;Application Crashë¡œ ì¸í•œ ì˜ˆìƒì¹˜ ëª»í•œ ë©”ì‹œì§€ê°€ í¬í•¨ë  ê²½ìš°&lt;/li&gt;
    &lt;li&gt;awslogs ë¡œê·¸ ë“œë¼ì´ë²„ ë‚´ì˜ ìš°ì„ ìˆœìœ„&lt;/li&gt;
  &lt;/ul&gt;

&lt;/details&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;ì•„ë§ˆë„ ìœ„ì— ê¸°ì¬í•œ ê²ƒë“¤ ì™¸ì—ë„ ë” ê³ ë ¤ í•  ê²ƒë“¤ì´ ë§ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.
ê°œë°œì´ë‚˜ ì•Œê³ ë¦¬ì¦˜ ë¬¸ì œë¥¼ í’€ ë•Œì™€ ë§ˆì°¬ê°€ì§€ë¡œ í•­ìƒ ì˜ˆìƒì¹˜ ëª»í•œ ì‹¤íŒ¨ ì§€ì ì„ ì˜ˆìƒí•˜ëŠ” ìŠµê´€ì´ í•„ìš”í•œ ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;span class=&quot;table-of-contents-list&quot;&gt;ECS Error Handling and Troubleshooting&lt;/span&gt;&lt;/p&gt;
&lt;ul class=&quot;table-of-contents-list&quot;&gt;
    &lt;li&gt;&lt;a href=&quot;./ECS_Exec&quot;&gt;Using Amazon ECS Exec for debugging&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./ECS_CW_Logs&quot;&gt;Using the awslogs log driver in ECS(Fargate)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;</content>

      
      
      
      
      

      <author>
          <name>Heuristic Wave</name>
        
        
      </author>

      

      
        <category term="aws" />
      
        <category term="devops" />
      

      
        <summary type="html">ECS Taskì˜ ì»¨í…Œì´ë„ˆê°€ ìƒì‚°í•˜ëŠ” ë¡œê·¸ë“¤ì€ CloudWatchë¥¼ í™œìš©í•˜ì—¬ ìˆ˜ì§‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Cloudwatch Logsë¥¼ ìš´ì˜í•˜ë©° ë¡œê·¸ ì ì¬ê°€ ì œëŒ€ë¡œ ë˜ì§€ ì•Šê±°ë‚˜, Timestampê°€ ì¼ì¹˜í•˜ì§€ ì•Šê±°ë‚˜, ì§€ë‚˜ì¹œ ì§€ì—° ì‹œê°„ì´ ë°œìƒí•˜ê±°ë‚˜, ì•Œì•„ë³´ê¸° ì–´ë ¤ìš´ í˜•íƒœë¡œ ë¡œê·¸ê°€ ìŒ“ì¸ë‹¤ë©´ ì•„ë˜ ìš”ì†Œë“¤ì„ ê³ ë¯¼í•´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">Using Amazon ECS Exec for debugging</title>
      <link href="https://heuristicwave.github.io/ECS_Exec" rel="alternate" type="text/html" title="Using Amazon ECS Exec for debugging" />
      <published>2022-02-22T00:00:00+00:00</published>
      <updated>2022-02-22T00:00:00+00:00</updated>
      <id>https://heuristicwave.github.io/ECS_Exec</id>
      <content type="html" xml:base="https://heuristicwave.github.io/ECS_Exec">&lt;p&gt;Dockerì—ì„œëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;exec&lt;/code&gt; ëª…ë ¹ì–´ë¥¼ í†µí•´ ì‹¤í–‰ì¤‘ì¸ ì»¨í…Œì´ë„ˆì— ì ‘ì†í•˜ì—¬ ë””ë²„ê¹…ì´ ê°€ëŠ¥í•˜ë‹¤.
21ë…„ 3ì›” ë¶€í„° í•´ë‹¹ ê¸°ëŠ¥ì´ AWSì˜ ECSì—ì„œë„ ì‚¬ìš©ê°€ëŠ¥í•˜ê²Œ ë˜ì—ˆëŠ”ë°, í•´ë‹¹ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë©° ë§Œë‚¬ë˜ ë¬¸ì œë“¤ì„ ê¸°ë¡.&lt;/p&gt;

&lt;h2 id=&quot;-references&quot;&gt;ğŸ“š References&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-exec.html&quot;&gt;Using Amazon ECS Exec for debugging&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.aws.amazon.com/cli/latest/reference/ecs/execute-command.html&quot;&gt;AWS CLI Cmd Ref : excute-commnad&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;exec-í™œì„±í™”&quot;&gt;Exec í™œì„±í™”&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;SSM ì—ì´ì „íŠ¸ì™€ SSM ì„œë¹„ìŠ¤ ê°„ì˜ í†µì‹ ì— í•„ìš”í•œ ê¶Œí•œ ë¶€ì—¬&lt;/li&gt;
  &lt;li&gt;task-definition config ì¶”ê°€
    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s2&quot;&gt;&quot;linuxParameters&quot;&lt;/span&gt;: &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;initProcessEnabled&quot;&lt;/span&gt;: &lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;CLIë¡œ execute-command enable í›„, ì ê²€
    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;aws ecs create-service &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--cluster&lt;/span&gt; cluster-name &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--task-definition&lt;/span&gt; task-definition-name &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--enable-execute-command&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--service-name&lt;/span&gt; service-name &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--desired-count&lt;/span&gt; 1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;p&gt;ì•„ë˜ ëª…ë ¹ì–´ë¡œ í™œì„±í™” ì—¬ë¶€ í™•ì¸. (grep option í™œìš©, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep -F4 &quot;managedAgents&quot;&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep &quot;enableExecuteCommand&quot;&lt;/code&gt;)&lt;/p&gt;
    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;aws ecs describe-tasks &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--cluster&lt;/span&gt; cluster-name &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--tasks&lt;/span&gt; task-id 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;p&gt;í™œì„±í™” ìƒíƒœì¼ ë•Œì˜ Snippet&lt;/p&gt;
    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;tasks&quot;&lt;/span&gt;: &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            ...
            &lt;span class=&quot;s2&quot;&gt;&quot;containers&quot;&lt;/span&gt;: &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                    ...
                    &lt;span class=&quot;s2&quot;&gt;&quot;managedAgents&quot;&lt;/span&gt;: &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;
                        &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                            &lt;span class=&quot;s2&quot;&gt;&quot;lastStartedAt&quot;&lt;/span&gt;: &lt;span class=&quot;s2&quot;&gt;&quot;2021-03-01T14:49:44.574000-06:00&quot;&lt;/span&gt;,
                            &lt;span class=&quot;s2&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;s2&quot;&gt;&quot;ExecuteCommandAgent&quot;&lt;/span&gt;,
                            &lt;span class=&quot;s2&quot;&gt;&quot;lastStatus&quot;&lt;/span&gt;: &lt;span class=&quot;s2&quot;&gt;&quot;RUNNING&quot;&lt;/span&gt;
                        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
                    &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;,
            ...
            &lt;span class=&quot;s2&quot;&gt;&quot;enableExecuteCommand&quot;&lt;/span&gt;: &lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;,
            ...
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;Running ECS Exec
    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;aws ecs execute-command &lt;span class=&quot;nt&quot;&gt;--cluster&lt;/span&gt; cluster-name &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--task&lt;/span&gt; task-id &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--container&lt;/span&gt; container-name &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--interactive&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--command&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;/bin/sh&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ë¬¸ì œ-í•´ê²°&quot;&gt;ë¬¸ì œ í•´ê²°&lt;/h2&gt;

&lt;p&gt;Exec ëª…ë ¹ì–´ ì´í›„ ì—ëŸ¬ í•¸ë“¤ (ê³µì‹ ë¬¸ì„œë“¤ì— ë‹µì´ ë‹¤ ìˆì—‡ë‹¤ ğŸ˜‚)&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;An error occurred &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;ClusterNotFoundException&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; when calling the ExecuteCommand operation: Cluster not found.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;Cluster ARN ê¸°ì… (From AWS CLI Ref : The Amazon Resource Name (ARN) or short name of the cluster from AWS CLI Ref)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;SessionManagerPlugin is not found. Please refer to SessionManager Documentation here: http://docs.aws.amazon.com/console/systems-manager/session-manager-plugin-not-found
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;í´ë¼ì´ì–¸íŠ¸ PCì— SSM Plugin ì„¤ì¹˜ (From AWS Docs : Prerequisites for using ECS Exec)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;span class=&quot;table-of-contents-list&quot;&gt;ECS Error Handling and Troubleshooting&lt;/span&gt;&lt;/p&gt;
&lt;ul class=&quot;table-of-contents-list&quot;&gt;
    &lt;li&gt;&lt;a href=&quot;./ECS_Exec&quot;&gt;Using Amazon ECS Exec for debugging&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./ECS_CW_Logs&quot;&gt;Using the awslogs log driver in ECS(Fargate)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;</content>

      
      
      
      
      

      <author>
          <name>Heuristic Wave</name>
        
        
      </author>

      

      
        <category term="aws" />
      
        <category term="devops" />
      

      
        <summary type="html">Dockerì—ì„œëŠ” exec ëª…ë ¹ì–´ë¥¼ í†µí•´ ì‹¤í–‰ì¤‘ì¸ ì»¨í…Œì´ë„ˆì— ì ‘ì†í•˜ì—¬ ë””ë²„ê¹…ì´ ê°€ëŠ¥í•˜ë‹¤. 21ë…„ 3ì›” ë¶€í„° í•´ë‹¹ ê¸°ëŠ¥ì´ AWSì˜ ECSì—ì„œë„ ì‚¬ìš©ê°€ëŠ¥í•˜ê²Œ ë˜ì—ˆëŠ”ë°, í•´ë‹¹ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë©° ë§Œë‚¬ë˜ ë¬¸ì œë“¤ì„ ê¸°ë¡.</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">Create Immutable Server using AWS Image Builder &amp;amp; Auto Scaling Group</title>
      <link href="https://heuristicwave.github.io/ImageBuilder" rel="alternate" type="text/html" title="Create Immutable Server using AWS Image Builder &amp; Auto Scaling Group" />
      <published>2022-02-21T00:00:00+00:00</published>
      <updated>2022-02-21T00:00:00+00:00</updated>
      <id>https://heuristicwave.github.io/ImageBuilder</id>
      <content type="html" xml:base="https://heuristicwave.github.io/ImageBuilder">&lt;p&gt;ë³¸ ê¸€ì€ 2021ë…„ 4ì›” 30ì¼ &lt;a href=&quot;https://aws.amazon.com/about-aws/whats-new/2021/04/ec2-image-builder-supports-auto-scaling-launch-template/&quot;&gt;EC2 Image Builder supports Auto Scaling launch template&lt;/a&gt;ì—
ì†Œê°œëœ ê¸°ëŠ¥ì„ í™œìš©í•´ Image Builderë¡œ Golden AMIë¥¼ ë§Œë“¤ê³ ,
í•´ë‹¹ ì´ë¯¸ì§€ë¡œ Auto Scaling Groupì˜ launch templateì„ ì—…ë°ì´íŠ¸í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;h1 id=&quot;intro&quot;&gt;Intro&lt;/h1&gt;

&lt;p&gt;í´ë¼ìš°ë“œë¥¼ ë‹¤ë£¨ë‹¤ ë³´ë©´ &lt;strong&gt;Netflix&lt;/strong&gt; ê°€ ì—¬ëŸ¬ ë¶„ì•¼ì—ì„œ ì•ì¥ì„œ ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ê·¸ì¤‘ì—ì„œ Immutable Server Patternì„ ì•Œë¦¬ëŠ”ë° ê¸°ì—¬í•œ 2013ë…„ì— ë°œê°„ëœ &lt;a href=&quot;https://netflixtechblog.com/ami-creation-with-aminator-98d627ca37b0&quot;&gt;AMI Creation with Aminator&lt;/a&gt;ë¥¼
ê¼­ í•œë²ˆ ì½ì–´ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤. ê³¼ê±° ë„·í”Œë¦­ìŠ¤ëŠ” AWSì˜ ì´ë¯¸ì§€ íŒŒì¼ì„ ìƒì„±í•˜ê¸° ìœ„í•´ Aminatorë¼ëŠ” ë„êµ¬ë¥¼ ì‚¬ìš©í–ˆì§€ë§Œ,
ë³¸ í¬ìŠ¤íŒ…ì—ì„œëŠ” ì´ë¯¸ì§€ ë¹Œë”ë¡œ AMIë¥¼ ë§Œë“¤ê³  Auto Scaling Groupì— ì ìš©ì‹œí‚¤ëŠ” ë°©ë²•ì„ ë°°ì›Œ Immutable Server Patternì„ í•™ìŠµí•´ ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;immutable-server&quot;&gt;Immutable Server&lt;/h2&gt;

&lt;p&gt;Immutable Server ëŒ€í•œ ë‚´ìš©ì€ martin fowler ë¸”ë¡œê·¸ì— ì†Œê°œëœ &lt;a href=&quot;https://martinfowler.com/bliki/ImmutableServer.html&quot;&gt;ImmutableServer&lt;/a&gt;
ê¸€ì„ ë³´ì‹œë©´ êµ‰ì¥íˆ ì˜ ì„¤ëª…ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ìš”ì•½ + ê·¸ë™ì•ˆì˜ ì œ ë‡Œí”¼ì…œì„ í•¨ê»˜ ë§ì”€ë“œë¦¬ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì„œë²„ë¥¼ ìš´ì˜í•˜ë‹¤ ë³´ë©´ ì—…ë°ì´íŠ¸ë¥¼ ë¹„ë¡¯í•œ ë‹¤ì–‘í•œ ì´ìŠˆë“¤ë¡œ ì¸í•´ êµ¬ì„±ìš”ì†Œê°€ ìì£¼ ë³€í•˜ê²Œ ë©ë‹ˆë‹¤.
ê·¸ë ‡ê²Œ ìš´ì˜í•˜ë‹¤ ë³´ë©´ ë¬´ì–¸ê°€ ê¼¬ì—¬ ì„œë²„ë¥¼ ì¬ ìƒì„±í•˜ëŠ” ì¼ì´ ë°œìƒí•˜ëŠ”ë° ì•„ë˜ì™€ ê°™ì€ ë¼ì´í”„ ì‚¬ì´í´ì„ ë§Œë‚˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://martinfowler.com/bliki/images/immutableServer/PhoenixServerLifecycle.png&quot; alt=&quot;phoenixServerLifecycle&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ì´ëŸ° ìƒí™©ì—ì„œ êµ¬ì„±ì´ ë‹¤ë¥¸ ì—¬ëŸ¬ ëŒ€ì˜ ì„œë²„ë¥¼ ê°€ì§€ê²Œ ë˜ë©´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Configuration drift&lt;/code&gt;ê°€ ë°œìƒí–ˆë‹¤ê³  í‘œí˜„í•©ë‹ˆë‹¤.
ë˜í•œ ìœ„ ê·¸ë¦¼ì²˜ëŸ¼ ìê¾¸ ìƒˆë¡œìš´ ì´ë¯¸ì§€ë¡œ íšŒê·€í•˜ë‹ˆê¹Œ, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Shift Left&lt;/code&gt;ë¼ê³ ë„ í‘œí˜„í•˜ê³  ì´ë¥¼ í•œêµ­ì–´ë¡œ í‘œí˜„í•˜ëŠ” ë§ì„ ì°¾ì•„ë³´ë‹ˆ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ì›ì  íšŒê·€&lt;/code&gt;ë¼ëŠ” í‘œí˜„ë„ ì“°ì…ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;êµ¬ì„± ë³€ê²½ì´ ì¦ì€ ì„œë²„ëŠ” ê¹¨ì§€ê¸°(fragile) ì‰½ê³ , ë˜ ì¥ì• ê°€ ë°œìƒí•  ê²½ìš° ì¬í˜„ì´ ì–´ë ¤ìš¸ë¿ë”ëŸ¬ ë³€ê²½ ì‹œ ì—°ì‡„ì ì¸ ì¥ì• ë¥¼ ìœ ë°œí•  ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤.
ì´ë¥¼ ë‘ê³  ê¹¨ì§€ê¸° ì‰¬ìš´ ëˆˆì†¡ì´ ê°™ë‹¤ í•˜ì—¬ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Snowflake Server&lt;/code&gt;ë¼ ë¶€ë¦…ë‹ˆë‹¤.
ì´ ìƒí™©ì„ í”¼í•˜ê¸° ìœ„í•´, Configuration driftë¥¼ í”¼í•˜ëŠ” Base Image(Configurationì´ ë°œìƒí•˜ë©´ ìƒˆë¡­ê²Œ ìƒì„±)ë¥¼ í™œìš©í•œ ë°©ë²•ì„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Phoenix Server&lt;/code&gt;
ë¼ ë¶€ë¦…ë‹ˆë‹¤. &lt;em&gt;(&lt;a href=&quot;https://martinfowler.com/bliki/PhoenixServer.html&quot;&gt;Phoenix Server&lt;/a&gt; ìš©ì–´ëŠ” ë§ˆí‹´ íŒŒìš¸ëŸ¬ì˜ ë™ë£Œ &lt;a href=&quot;https://twitter.com/kornys&quot;&gt;Kornelis Sietsma&lt;/a&gt;ê°€ ì œì•ˆí–ˆë‹¤ í•©ë‹ˆë‹¤.)&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/imagebuilder/immutableServer.png&quot; alt=&quot;immutableServer&quot; /&gt;&lt;/p&gt;

&lt;p&gt;í”¼ë‹‰ìŠ¤ ì„œë²„ì˜ ê°œë…ì€ ê¸°ë³¸ ì´ë¯¸ì§€(Base AMI, Golden AMI)ë¥¼ í†µí•´ ì–¸ì œë‚˜ ì¼ê´€ì„± ìˆëŠ” í™˜ê²½ì„ ì œê³µí–ˆê³ ,
ì´ëŸ¬í•œ ê°œë…ë“¤ì´ ìì—°ìŠ¤ëŸ½ê²Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Immutable Server&lt;/code&gt;ì˜ ê°œë…ìœ¼ë¡œ ì´ì–´ì¡ŒìŠµë‹ˆë‹¤.
&lt;em&gt;(ìµœê·¼ì—ëŠ” Immutable Serverë¥¼ ë„˜ì–´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Immutable Infrastructure&lt;/code&gt;ì˜ ê°œë…ë„ ìˆìŠµë‹ˆë‹¤!)&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ì´ë¯¸ì§€-ë¹Œë”ì™€-ì˜¤í† -ìŠ¤ì¼€ì¼-ê·¸ë£¹ìœ¼ë¡œ-ì´ë®¤í„°ë¸”-ì„œë²„-êµ¬ì¶•í•˜ê¸°&quot;&gt;ì´ë¯¸ì§€ ë¹Œë”ì™€ ì˜¤í†  ìŠ¤ì¼€ì¼ ê·¸ë£¹ìœ¼ë¡œ ì´ë®¤í„°ë¸” ì„œë²„ êµ¬ì¶•í•˜ê¸°&lt;/h2&gt;

&lt;p&gt;í´ë¼ìš°ë“œì—ì„œì˜ Immutable Server Pattern ê²€ìƒ‰í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ì¢‹ì€ ì˜ˆì‹œë“¤ì´ ë‚˜ì˜µë‹ˆë‹¤.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://aws.amazon.com/ko/blogs/mt/create-immutable-servers-using-ec2-image-builder-aws-codepipeline/&quot;&gt;Create immutable servers using EC2 Image Builder and AWS CodePipeline&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://cloudblogs.microsoft.com/opensource/2018/05/23/immutable-infrastructure-azure-vsts-terraform-packer-ansible/&quot;&gt;Tutorial: Immutable infrastructure for Azure, using VSTS, Terraform, Packer and Ansible&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://learn.hashicorp.com/tutorials/terraform/packer&quot;&gt;Provision Infrastructure with Packer&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://heuristicwave.github.io/Packer&quot;&gt;í•˜ì‹œì½”í”„ íŠœí† ë¦¬ì–¼ì„ ë³´ê³  ë§Œë“  í•„ìì˜ ë¸”ë¡œê·¸ ğŸ¥²&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ê·¸ëŸ¬ë‚˜ ì´ì œë¶€í„° ë‹¤ë£°, ì´ë¯¸ì§€ ë¹Œë”ì™€ ì˜¤í†  ìŠ¤ì¼€ì¼ ê·¸ë£¹ìœ¼ë¡œ ì´ë®¤í„°ë¸” ì„œë²„ íŒ¨í„´ì„ ë§Œì¡±ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
AWSì—ì„œ ì œê³µí•˜ëŠ” AutoScaleì€ íƒ„ë ¥ì ì¸ í™•ì¥ê³¼ ì¶•ì†Œë¥¼ ì œê³µí•˜ì§€ë§Œ Desired Capacity ê¸°ëŠ¥ì„ í™œìš©í•´ í•­ìƒ ë™ì¼í•œ ì„œë²„ì˜ ìˆ˜ë¥¼ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/background/imagebuilder.png&quot; alt=&quot;imageBuilder&quot; /&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Image Builderì˜ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Image pipelines&lt;/code&gt;ë¥¼ í™œìš©í•´ ì›ë³¸ AMIë¡œë¶€í„° ì›í•˜ëŠ” í˜•íƒœì˜ Output(Custom/Golden/Base AMI)ì„ ì œì‘í•©ë‹ˆë‹¤.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Distribution settings&lt;/code&gt;ì„ í†µí•´ lt(Launch Template)ì— 1ë²ˆì—ì„œ ìƒì„±í•œ AMIë¡œ êµì²´í•˜ì—¬ ìƒˆë¡œìš´ ë²„ì „ì„ ë§Œë“­ë‹ˆë‹¤.&lt;/li&gt;
  &lt;li&gt;ì´ì œ, ìƒˆë¡­ê²Œ ìƒì„±ë˜ëŠ” ASG(Auto Scaling Group)ì€ ìƒˆë¡­ê²Œ ë²„ì „ ì—…ëœ ltë¥¼ í†µí•´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;em&gt;3ë²ˆì˜ ASGì˜ ê²½ìš°, Refreshë¥¼ í•˜ê¸° ì „ê¹Œì§€ëŠ” ì´ì „ ìƒíƒœì˜ ltë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ê°€ ìš´ì˜ë˜ê³  ìˆìŠµë‹ˆë‹¤.
ì´ë¯¸ì§€ ìƒì„±ê³¼ ë™ì‹œì— ìƒˆë¡œìš´ AMIë¡œ EC2 Refreshë¥¼ í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ìˆì§€ë§Œ,
ìƒˆë¡­ê²Œ ìƒì„±ëœ ì¸ìŠ¤í„´ìŠ¤ê°€ ìš´ì˜í™˜ê²½ì— ë°”ë¡œ ì ìš©ë˜ëŠ” ê²ƒì€ ë°”ëŒì§í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ í•´ë‹¹ ë¶€ë¶„ì— ëŒ€í•œ ìë™í™”ëŠ” ì œì™¸í•˜ì˜€ìŠµë‹ˆë‹¤.
ë§Œì•½ ê²€ì¦ëœ AMIë¥¼ ìƒì„±í•œë‹¤ë©´, Lambda í˜¹ì€ ê¸°íƒ€ ë°©ë²• ë“±ì„ í†µí•´ Refresh í•˜ì—¬ ì´ë¯¸ì§€ ìƒì„±ë¶€í„° ë°°í¬ê¹Œì§€ ìë™í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;ì¶”í›„ ë‹¤ë¥¸ í¬ìŠ¤íŒ…ì—ì„œ ìì„¸íˆ ë‹¤ë£° ì˜ˆì •ì´ì§€ë§Œ, ì´ëŸ¬í•œ íŒ¨í„´ì€ Immutable Infrastructureì˜ í•œ ìš”ì†Œë¥¼ ì´ë£¨ê¸°ë„ í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;h2 id=&quot;-workshop&quot;&gt;ğŸ“œ Workshop&lt;/h2&gt;

&lt;h3 id=&quot;0ï¸âƒ£-launch-template--auto-scaling-groups-ìƒì„±&quot;&gt;0ï¸âƒ£ Launch Template &amp;amp; Auto Scaling groups ìƒì„±&lt;/h3&gt;

&lt;p&gt;ê¸°ì¡´ í™˜ê²½ì— 0ï¸âƒ£ì´ ì¤€ë¹„ë˜ì–´ ìˆë‹¤ë©´ ë‹¤ìŒ ë‹¨ê³„ì¸ &lt;strong&gt;Distribution settings&lt;/strong&gt;ìœ¼ë¡œ ë„˜ì–´ê°€ë„ ì¢‹ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;í•´ë‹¹ ë‹¨ê³„ëŠ” ì œê°€ êµ‰ì¥íˆ ê²Œìœ¼ë¥¸ ê´€ê³„ë¡œ AWS Documentation : &lt;a href=&quot;https://docs.aws.amazon.com/autoscaling/ec2/userguide/create-asg-launch-template.html&quot;&gt;Creating an Auto Scaling group using a launch template&lt;/a&gt;ë¡œ ëŒ€ì²´í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ğŸ’¡ ë§Œì•½ ê¸°ì¡´ í™˜ê²½ì´ Launch Templateì´ ì•„ë‹Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Launch Configurations&lt;/code&gt;ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆì„ ê²½ìš°,
ì½˜ì†” í™”ë©´ì—ì„œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Copy to launch template&lt;/code&gt; ë²„íŠ¼ì„ ëˆ„ë¥´ì‹œë©´ ì†ì‰½ê²Œ ltë¡œ ë³€ê²½ ê°€ëŠ¥í•©ë‹ˆë‹¤. &lt;br /&gt;
ğŸ’¡ Launch Templateê³¼ Launch ConfigurationsëŠ” êµ‰ì¥íˆ ìœ ì‚¬í•˜ì§€ë§Œ, Launch Templateì˜ ê²½ìš° ë” ë‹¤ì–‘í•œ ê¸°ëŠ¥ë“¤ì„ ì œê³µí•©ë‹ˆë‹¤.
íŠ¹íˆ ë²„ì „ê´€ë¦¬ ê¸°ëŠ¥ì„ í†µí•´ Rollbackì„ í•˜ê±°ë‚˜, ì—…ë°ì´íŠ¸ì‹œ ASGë¥¼ í™œìš©í•œ Rolling Updateê°€ ê°€ëŠ¥í•´ Launch Template ì‚¬ìš©ì„ ê¶Œì¥í•©ë‹ˆë‹¤.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;1ï¸âƒ£-distribution-settings&quot;&gt;1ï¸âƒ£ Distribution settings&lt;/h3&gt;

&lt;p&gt;EC2 Image Builder ì½˜ì†” í™”ë©´ì— ì ‘ì†í•´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Distribution settings&lt;/code&gt;ì—ì„œ ìƒˆë¡œìš´ ì„¸íŒ…ì„ ìƒì„±í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/imagebuilder/distribution.png&quot; alt=&quot;distribution&quot; /&gt;&lt;/p&gt;

&lt;p&gt;í•„ìˆ˜ í•­ëª©ì¸ ì´ë¦„ì„ ì‘ì„±í•˜ê³  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Region settings&lt;/code&gt;ì—ì„œ ë°°í¬í•  ë¦¬ì „ì„ í™•ì¸í•œ í›„,
í•˜ë‹¨ì˜ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Launch template configuration&lt;/code&gt;ì—ì„œ Step 0ï¸âƒ£ì—ì„œ ì‘ì„±í•œ ltë¥¼ ì§€ì •í•˜ê³  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;create settings&lt;/code&gt;ë¡œ ìƒì„±í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;2ï¸âƒ£-image-pipelines&quot;&gt;2ï¸âƒ£ Image pipelines&lt;/h3&gt;

&lt;h4 id=&quot;step-1&quot;&gt;Step 1&lt;/h4&gt;

&lt;p&gt;Distribution settings ì‘ì„±ì´ ì™„ë£Œë˜ì—ˆë‹¤ë©´, ì½˜ì†”ì—ì„œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Image pipelines&lt;/code&gt;ì— ì ‘ì†í•˜ì—¬ ì•„ë˜ ì •ë³´ë“¤ì„ ê¸°ì¬í•©ë‹ˆë‹¤.
ì•„ë˜ ì‚¬ì§„ì˜ ì¢Œì¸¡ Step 5ê¹Œì§€ì˜ ê³¼ì •ì„ ê±°ì¹˜ë©´ ëª©í‘œë¡œ í–ˆë˜ í™˜ê²½ì´ ì™„ì„±ë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/imagebuilder/imagepipeline.png&quot; alt=&quot;pipeline&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Build schedule&lt;/code&gt;ì—ì„œëŠ” ì£¼ê¸°ì ìœ¼ë¡œ íŒŒì´í”„ë¼ì¸ì„ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ë°©ë²•ë“¤ì„ ì œê³µí•˜ëŠ”ë° ìš´ì˜ìê°€ ì›í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;h4 id=&quot;step-2&quot;&gt;Step 2&lt;/h4&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Choose recipe&lt;/code&gt; ë‹¨ê³„ì—ì„œëŠ” ê¸°ì¡´ì— ë§Œë“¤ì–´ë‘” &lt;strong&gt;recipe&lt;/strong&gt;ê°€ ì—†ìœ¼ë¯€ë¡œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Create new recipe&lt;/code&gt;ë¥¼ ì„ íƒí•˜ê³ , &lt;strong&gt;Image type&lt;/strong&gt;ìœ¼ë¡œ &lt;strong&gt;AMI&lt;/strong&gt;ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ë‹¤ìŒ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Base image&lt;/code&gt;ë¥¼ ê³ ë¥´ëŠ” ë‹¨ê³„ì—ì„œëŠ” ì•„ë˜ í™”ë©´ê³¼ ê°™ì´ &lt;strong&gt;ê´€ë¦¬í˜• ì´ë¯¸ì§€&lt;/strong&gt;ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ ê¸°ì¡´ì— ì‘ì„±í•œ &lt;strong&gt;Custom AMI ID&lt;/strong&gt;ë¥¼ ì‚¬ìš©í•´ë„ ë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/imagebuilder/baseimage.png&quot; alt=&quot;baseimage&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ê·¸ë‹¤ìŒ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Instance configuration&lt;/code&gt;ì™€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Working directory&lt;/code&gt;ì—ì„œëŠ” &lt;strong&gt;ê¸°ë³¸ ê°’&lt;/strong&gt;ìœ¼ë¡œ ë‘¬ë„ ìƒê´€ì—†ì§€ë§Œ
&lt;strong&gt;SSM, User data, Working directory path&lt;/strong&gt;ì˜ í•„ìš” ì—¬ë¶€ì— ë”°ë¼ í™œìš©í•˜ì‹œë©´ ë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì´ì–´ì„œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Components&lt;/code&gt;ì—ì„œëŠ” Golden AMIë¥¼ êµ¬ì¶•í•˜ê¸° ìœ„í•´ ì„ í–‰ë˜ì–´ì•¼ í•˜ëŠ” ê°ì¢… Agentë‚˜ ì†Œí”„íŠ¸ì›¨ì–´(Apache, dotnet etc)ë¥¼ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì €ëŠ” í¸ì˜ìƒ CloudWatch Agentë¥¼ ì„ íƒí–ˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/imagebuilder/components.png&quot; alt=&quot;components&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ê·¸ë‹¤ìŒ ì´ì–´ì§€ëŠ” &lt;strong&gt;Test components, Storage, Tags&lt;/strong&gt; ì—­ì‹œ í•„ìš” ì—¬ë¶€ì— ë”°ë¼ í™œìš©í•˜ì‹œë©´ ë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;h4 id=&quot;step-3&quot;&gt;Step 3&lt;/h4&gt;

&lt;p&gt;3ë‹¨ê³„ì— ì§„ì…í•˜ë©´ ì•„ë˜ ì‚¬ì§„ê³¼ ê°™ì´ ì´ë¯¸ì§€ ë¹Œë”ì˜ ì¸í”„ë¼ Config ê°’ë“¤ì„ ì •ì˜í•  ìˆ˜ ìˆëŠ” ê³µê°„ì´ ë‚˜ì˜µë‹ˆë‹¤.
3ë²ˆì§¸ ë²„íŠ¼ì¸ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Create New infrastructure configuration&lt;/code&gt;ìœ¼ë¡œ ì§ì ‘ ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•, ë„¤íŠ¸ì›Œí¬, SNS topicì„ ì„¤ì •ì´ ê°€ëŠ¥í•˜ì§€ë§Œ,
ì €ëŠ” 1ë²ˆ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Create infrastructure configuration using service defaults&lt;/code&gt;ë¡œ ê¸°ë³¸ êµ¬ì„± ê°’ë“¤ì„ ì¡ì•„ì£¼ì—ˆìŠµë‹ˆë‹¤.
(IAM Roleê³¼ SNS Topicë„ ìë™ìœ¼ë¡œ ìƒì„±í•´ ì£¼ê³  êµ‰ì¥íˆ í¸ë¦¬í•˜ë„¤ìš”.)&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/imagebuilder/defineconfig.png&quot; alt=&quot;config&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;step-4&quot;&gt;Step 4&lt;/h4&gt;

&lt;p&gt;ë“œë””ì–´, ì´ì „ &lt;strong&gt;1ï¸âƒ£ Distribution settings&lt;/strong&gt; ê³¼ì •ì—ì„œ ë§Œë“¤ì–´ë‘” &lt;strong&gt;ë°°í¬ ì„¤ì •&lt;/strong&gt; í•´ë‹¹ ë‹¨ê³„ì—ì„œ ì„ íƒí•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/imagebuilder/associatelt.png&quot; alt=&quot;asso&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;step-5&quot;&gt;Step 5&lt;/h4&gt;

&lt;p&gt;Review ë‹¨ê³„ê¹Œì§€ êµ¬ì„± ìš”ì†Œë“¤ì„ ê²€í† í•´ ë³´ê³  Create pipelineì„ ëˆ„ë¥´ê³  Image pipelines ì½˜ì†”ë¡œ ëŒì•„ì˜¤ë©´ ì•„ë˜ì™€ ê°™ì€ í™”ë©´ì„ ë§Œë‚˜ê²Œ ë©ë‹ˆë‹¤.
ì•„ë˜ ìº¡ì²˜í™”ë©´ì˜ ê²½ìš° ì´ë¯¸ ë¹Œë“œê°€ ëë‚œ ìƒíƒœì´ì§€ë§Œ, í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ì„œ &lt;strong&gt;Actions - Run pipeline&lt;/strong&gt; ë‹¨ê³„ë¥¼ ê±°ì¹˜ë©´,
ec2 ì½˜ì†”ì—ì„œ image buildë¥¼ ìœ„í•œ builder ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ê³  ì¢…ë£Œë˜ëŠ” ê²ƒì„ ê³¼ì •ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/imagebuilder/imgconsole.png&quot; alt=&quot;console&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;3ï¸âƒ£-review&quot;&gt;3ï¸âƒ£ Review&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;EC2 - Images - AMIs&lt;/strong&gt;ì—ì„œ ìƒˆë¡­ê²Œ ìƒì„±ëœ AMI í™•ì¸&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;EC2 - Launch templates&lt;/strong&gt;ì—ì„œ ìƒˆë¡­ê²Œ ë²„ì „ì´ ì˜¬ë¼ê°„ lt í™•ì¸, ì—¬ê¸°ì„œ Versions ì •ë³´ë¥¼ ëˆ„ë¥´ë©´ Image Builderê°€ ìƒì„±í•œ Descriptionì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
&lt;img src=&quot;../../assets/built/images/post/imagebuilder/version.png&quot; alt=&quot;version&quot; /&gt;&lt;/li&gt;
  &lt;li&gt;ì œëŒ€ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ê¸°ì¡´ì˜ EC2 í•˜ë‚˜ë¥¼ ì¢…ë£Œì‹œí‚¤ë©´, ì €ì˜ ê²½ìš° ASGì˜ Desiredê°€ 2ë¡œ ì„¤ì •í–ˆìœ¼ë¯€ë¡œ í•˜ë‚˜ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒˆë¡œìš´ ë²„ì „ìœ¼ë¡œ ë³€ê²½ë©ë‹ˆë‹¤.
ì´ëŠ” &lt;strong&gt;EC2 - Auto Scaling groups&lt;/strong&gt;ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
&lt;img src=&quot;../../assets/built/images/post/imagebuilder/asg.png&quot; alt=&quot;asg&quot; /&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;4ï¸âƒ£-clean-up&quot;&gt;4ï¸âƒ£ Clean Up&lt;/h3&gt;

&lt;p&gt;ë¶„í•´ëŠ” ì¡°ë¦½ì˜ ì—­ìˆœìœ¼ë¡œ?! 2ï¸âƒ£ -&amp;gt; 1ï¸âƒ£ -&amp;gt; 0ï¸âƒ£ ì—­ìˆœìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ ì •ë¦¬í•˜ê³  3ï¸âƒ£ Review í•­ëª©ì„ ì ê²€í•˜ì—¬ ëª¨ë“  ë¦¬ì†ŒìŠ¤ê°€ íšŒìˆ˜ë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;outro&quot;&gt;Outro&lt;/h2&gt;

&lt;p&gt;ì§€ê¸ˆê¹Œì§€ ê°ì¢… ì´ì•¼ê¸° ê±°ë¦¬ë“¤ê³¼ EC2 Image Builderë¥¼ ì‚¬ìš©í•˜ë©° Immutable Server Patternì„ í•™ìŠµí•´ ë³´ì•˜ìŠµë‹ˆë‹¤.
ê³¼ê±° ì œê°€ Packerë¡œ ê´€ë ¨ í™˜ê²½ì„ êµ¬ì¶•í•œ ì ì´ ìˆëŠ”ë°, ì—­ì‹œ AWS í™˜ê²½ì—ì„œëŠ” AWSì˜ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²Œ ì—°ê³„ë„ ìš©ì´í•˜ê³  êµ¬ì¶•ë„ ì‰½ë„¤ìš”.&lt;/p&gt;

&lt;p&gt;ì†Œì¤‘í•œ ì‹œê°„ì„ ë‚´ì–´ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ì˜ëª»ëœ ë‚´ìš©ì€ ì§€ì í•´ ì£¼ì„¸ìš”! ğŸ˜ƒ&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ğŸ“š References&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ê¸€ ì¤‘ê°„ì¤‘ê°„ í•˜ì´í¼ ë§í¬ë¡œ Reference ë“¤ì„ ë‹¬ì•„ë‘ì—ˆìŠµë‹ˆë‹¤.
íŠ¹íˆ, ì´ë²ˆ í¬ìŠ¤íŒ… ë ˆí¼ëŸ°ìŠ¤ë“¤ì€ ì¢‹ì€ ë‚´ìš©ë“¤ì´ ë§ìœ¼ë‹ˆ ì›ë³¸ë“¤ì„ ì½ì–´ë³´ì‹œê³  ë‹¹ì‹œ ì œê°€ ëŠë‚€ ê¸°ì¨ë“¤ì„ í•¨ê»˜ ëŠë‚„ìˆ˜ ìˆìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;</content>

      
      
      
      
      

      <author>
          <name>Heuristic Wave</name>
        
        
      </author>

      

      
        <category term="aws" />
      
        <category term="devops" />
      

      
        <summary type="html">ë³¸ ê¸€ì€ 2021ë…„ 4ì›” 30ì¼ EC2 Image Builder supports Auto Scaling launch templateì— ì†Œê°œëœ ê¸°ëŠ¥ì„ í™œìš©í•´ Image Builderë¡œ Golden AMIë¥¼ ë§Œë“¤ê³ , í•´ë‹¹ ì´ë¯¸ì§€ë¡œ Auto Scaling Groupì˜ launch templateì„ ì—…ë°ì´íŠ¸í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤.</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">Terraform Tips 2 - Data &amp;amp; Index</title>
      <link href="https://heuristicwave.github.io/TerraformTips2" rel="alternate" type="text/html" title="Terraform Tips 2 - Data &amp; Index" />
      <published>2022-01-02T00:00:00+00:00</published>
      <updated>2022-01-02T00:00:00+00:00</updated>
      <id>https://heuristicwave.github.io/TerraformTips2</id>
      <content type="html" xml:base="https://heuristicwave.github.io/TerraformTips2">&lt;p&gt;Terraform ë” ìµìˆ™í•˜ê²Œ 2 - Data &amp;amp; Index &lt;br /&gt;
AWS ë¦¬ì†ŒìŠ¤ë¡œ ì•Œì•„ë³´ëŠ” terraform Data í™œìš© íŒ&lt;/p&gt;

&lt;h2 id=&quot;intro&quot;&gt;Intro&lt;/h2&gt;

&lt;p&gt;ì´ë²ˆ í¬ìŠ¤íŒ…ì€ Tipì´ë¼ í•˜ê¸°ì—ëŠ” ë¶€ë„ëŸ¬ìš´ ì‚¬ì†Œí•œ ì§€ì‹ì´ì§€ë§Œ, ì œê°€ ìì£¼ ìŠì–´ë²„ë¦¬ëŠ” ë‚´ìš©ì´ë¼ ê¸€ë¡œ ë‚¨ê¸°ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. &lt;strong&gt;Terraform Data&lt;/strong&gt;ë¥¼ ì˜ í™œìš©í•˜ë©´ ë””ìŠ¤í¬ ì´ë¯¸ì§€, ì½”ë“œë¡œ ì •ì˜í•œ ë‹¤ì–‘í•œ ë¦¬ì†ŒìŠ¤ ë° í´ë¼ìš°ë“œ ê³µê¸‰ì APIì—ì„œ ê°€ì ¸ì˜¨ ì •ë³´ë“¤ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ëª¨ë“  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Data Sources&lt;/code&gt;ê°€ ë™ì¼í•œ ë°©ë²•ìœ¼ë¡œ ê°„í¸í•˜ê²Œ ì¡°íšŒí•  ìˆ˜ ìˆìœ¼ë©´ ì¢‹ê² ì§€ë§Œ, ë§‰ìƒ ì‚¬ìš©í•˜ë ¤ê³  í•˜ë©´ ì´ëŸ° ì €ëŸ° ë¬¸ì œë“¤ì„ ë§Œë‚˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ê³µì‹ë¬¸ì„œ(&lt;a href=&quot;https://learn.hashicorp.com/tutorials/terraform/data-sources&quot;&gt;Tutorial : Query Data Sources&lt;/a&gt;)ì—ì„œë„ Data í™œìš©ë°©ë²•ì„ ë°°ìš¸ ìˆ˜ ìˆì§€ë§Œ,
ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” 3ê°€ì§€ ì˜ˆì œì™€ í•¨ê»˜ ë¦¬ì†ŒìŠ¤ë¥¼ Query í•˜ëŠ” ë°©ë²•ì„ ë°°ì›Œ ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;query-ami&quot;&gt;Query AMI&lt;/h2&gt;

&lt;p&gt;AWSì˜ ìµœì‹  AMIëŠ” ì£¼ê¸°ì ìœ¼ë¡œ ê°±ì‹ ë©ë‹ˆë‹¤. ë”°ë¼ì„œ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì½”ë“œë¥¼ ì‘ì„±í•˜ê¸° ìœ„í•´, í•­ìƒ ìµœì‹  AMIë¥¼ ì°¸ì¡°í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ”ë° ë‹¤ìŒê³¼ ê°™ì€ ë°©ë²•ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;data &lt;span class=&quot;s2&quot;&gt;&quot;aws_ami&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;amazon_linux&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  most_recent &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;true

  &lt;/span&gt;owners &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;amazon&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;

  filter &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    name   &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;name&quot;&lt;/span&gt;
    values &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;amzn2-ami-kernel-*-hvm-*-x86_64-gp2&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

output &lt;span class=&quot;s2&quot;&gt;&quot;name&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  value &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; data.aws_ami.amazon_linux.id
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ìœ„ì™€ ê°™ì€ ë°©ë²•ìœ¼ë¡œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;filter&lt;/code&gt;ì™€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;owners&lt;/code&gt; ê°’ì„ ì¡°ì •í•˜ë©° ì–´ë–¤ ì´ë¯¸ì§€ë“ ì§€ id ê°’(output)ì„ ì–»ì–´ ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì˜ˆë¥¼ ë“¤ì–´ ECSì˜ Optimized AMIë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, ë‹¤ìŒê³¼ ê°™ì€ filter ê°’ì„ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;values = [â€œamzn2-ami-ecs-hvm-*-x86_64-ebsâ€]&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ECSì™€ ë‹¬ë¦¬ EKSëŠ” AMI ëª…ëª… ê·œì¹™ì´ ì•½ê°„ ë‹¬ë¼ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;filter&lt;/code&gt; ê¸°ëŠ¥ì„ í™œìš©í•´ì•¼, ì¡°ê±´ì— ë§ëŠ” Optimized ì´ë¯¸ì§€ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
EKS ì´ë¯¸ì§€ì˜ ê²½ìš° ëª¨ë“  ì´ë¯¸ì§€ì˜ ì²« ë¬¸ìì—´ì´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;amazon-eks-&lt;/code&gt;ìœ¼ë¡œ ì‹œì‘í•˜ê¸° ë•Œë¬¸ì—, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*&lt;/code&gt;ë¥¼ í•¨ê»˜ ë„£ì–´ Optimized AMIë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;data &lt;span class=&quot;s2&quot;&gt;&quot;aws_ami&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;amazon_linux_eks&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  most_recent &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;true

  &lt;/span&gt;owners &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;amazon&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;

  filter &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    name   &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;name&quot;&lt;/span&gt;
    values &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;amazon-eks-*&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

  filter &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    name   &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;architecture&quot;&lt;/span&gt;
    values &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;x86_64&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ê·¸ëŸ¬ë‚˜ ìœ„ Queryì˜ ê²°ê³¼ ê°’ì„ &lt;a href=&quot;https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/eks-optimized-ami.html&quot;&gt;ê³µì‹ ë¬¸ì„œ&lt;/a&gt;ì— ê¸°ì¬ëœ AMI IDì™€ ë¹„êµí•´ ë³´ë©´,
&lt;strong&gt;x86&lt;/strong&gt; IDê°€ ì•„ë‹Œ, &lt;strong&gt;x86 ê°€ì†&lt;/strong&gt; ID ê°’ê³¼ ì¼ì¹˜í•œ ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆì„ ê²ë‹ˆë‹¤.
ë¬¸ì„œì— ê¸°ì¬ëœ &lt;strong&gt;x86 ê°€ì†&lt;/strong&gt;ì€ gpuê°€ ì‚¬ìš© ê°€ëŠ¥í•œ Optimized AMIì…ë‹ˆë‹¤. gpuë¥¼ ì‚¬ìš©í•˜ëŠ” ë…¸ë“œì˜ ëª…ëª… ê·œì¹™ì´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;amazon-eks-gpu&lt;/code&gt;ë¡œ ì‹œì‘í•˜ê¸° ë•Œë¬¸ì— ìœ„ filter ì¡°ê±´ìœ¼ë¡œëŠ” gpu ë…¸ë“œê°€ ì¡°íšŒë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ê·¸ë ‡ë‹¤ë©´ ì¼ë°˜ x86 ë…¸ë“œëŠ” ì–´ë–»ê²Œ ì¡°íšŒí•´ì•¼ í• ê¹Œìš”? ğŸ§ ì–´ëŠ ë¬¸ì„œì—ë„ ê¸°ì¬ë˜ì–´ ìˆì§€ ì•Šì§€ë§Œ,
ëŒ€ëµì ì¸ ëª…ëª… ê·œì¹™ì„ ìœ ì¶”í•˜ì—¬ ë³´ë‹ˆ ì¼ë°˜ EKS ë…¸ë“œëŠ” ë‹¤ìŒê³¼ ê°™ì€ í•„í„°ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;values = [â€œamazon-eks-node-1.22-*â€]&lt;/p&gt;

  &lt;p&gt;value ê°’ì˜ &lt;em&gt;prefix&lt;/em&gt; ê·œì¹™ì„ ë³´ë‹ˆ EKSì˜ ë²„ì „ë„ &lt;em&gt;prefix&lt;/em&gt; ì•ˆì— í¬í•¨ë˜ì–´, &lt;br /&gt;
ì´ ê°’ì„ ì‘ìš©í•˜ë©´ ë‹¤ì–‘í•œ ë²„ì „ì˜ EKS Optimized AMIë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì¶”ì¸¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ì´ì™¸ì—ë„ ë¦¬ì „ë§ˆë‹¤ ë‹¤ë¥¸ Optimized AMIëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;data&lt;/code&gt;ì—ëŠ” ëª…ì‹œí•˜ì§€ ì•Šì•˜ì§€ë§Œ, &lt;strong&gt;Providerì— ëª…ì‹œí•œ ë¦¬ì „ì— ì¢…ì†ì„±&lt;/strong&gt;ì„ ê°–ê²Œ ë©ë‹ˆë‹¤.
ë˜ í•˜ë‚˜ì˜ íŒì„ ë“œë¦¬ìë©´, ë§Œì•½ Filterì—ì„œ ì§€ì›í•˜ì§€ ì•ŠëŠ” ëª…ëª… ê·œì¹™ì„ ê°€ì§„ AMIë¼ë©´ ì •ê·œì‹ìœ¼ë¡œë„ ì¡°íšŒê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤!&lt;/p&gt;

&lt;p&gt;ì—¬ê¸°ê¹Œì§€ ì œê°€ ìì£¼ ì‚¬ìš©í•˜ëŠ” ë‹¤ì–‘í•œ AMI IDë¥¼ ì¡°íšŒí•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤. ì´ì œ ì–´ë–¤ AMIë¼ë„ ì¡°íšŒê°€ ê°€ëŠ¥í•˜ê² ì£ ? ğŸ˜&lt;/p&gt;

&lt;h2 id=&quot;query-az&quot;&gt;Query AZ&lt;/h2&gt;

&lt;p&gt;AWSì˜ ë¦¬ì „ë§ˆë‹¤ ì‚¬ìš©ê°€ëŠ¥í•œ azê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸ì—, ì¡°ê¸ˆ ë” ìœ ì—°í•œ ì½”ë“œë¥¼ ì‘ì„±í•˜ê¸° ìœ„í•´ ë‹¤ìŒ ì½”ë“œë¥¼ ì‚¬ìš©í•´ ì‚¬ìš©ê°€ëŠ¥í•œ azë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤.
ì´í›„, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;data.&amp;lt;NAME&amp;gt;.&amp;lt;ATTRIBUTE&amp;gt;.names&lt;/code&gt; ë¡œ ì‚¬ìš©ê°€ëŠ¥í•œ az ê°’ë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;data &lt;span class=&quot;s2&quot;&gt;&quot;aws_availability_zones&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;available&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  state &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;available&quot;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;output &lt;span class=&quot;s2&quot;&gt;&quot;azs&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
 value &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; data.aws_availability_zones.available.names
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;names&lt;/code&gt;ì—ëŠ” ì‚¬ìš©ê°€ëŠ¥í•œ azê°€ ë°°ì—´ í˜•íƒœë¡œ ë“¤ì–´ê°€ ìˆì–´, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;names[0]&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;names[1]&lt;/code&gt;ê³¼ ê°™ì´ Index ê°’ìœ¼ë¡œ íŠ¹ì • ê°’ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ê·¸ëŸ¬ë‚˜, ëª¨ë“  dataê°€ Index ê°’ì„ ê°€ì§€ê³  ìˆëŠ” ê²ƒì€ ì•„ë‹™ë‹ˆë‹¤.&lt;/p&gt;

&lt;h2 id=&quot;query-vpc_id&quot;&gt;Query vpc_id&lt;/h2&gt;

&lt;p&gt;ë‹¤ë¥¸ ë¦¬ì†ŒìŠ¤ì™€ AWS ì†”ë£¨ì…˜ë“¤ì„ ì—°ê³„í•˜ê¸° ìœ„í•´ì„œëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;vpc_id&lt;/code&gt; ê°’ì´ í•„ìˆ˜ì ìœ¼ë¡œ ë“¤ì–´ê°‘ë‹ˆë‹¤.
vpcì˜ idë¥¼ êµ¬í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë°©ë²•ìœ¼ë¡œ idë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
(tags ê°’ì„ í™œìš©í•´ ì¼ì¢…ì˜ í•„í„°ë§ì„ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.)&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;data &lt;span class=&quot;s2&quot;&gt;&quot;aws_vpcs&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;vpcs&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    tags &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        Name &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; var.vpc_name
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

output &lt;span class=&quot;s2&quot;&gt;&quot;vpc_id&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    value &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; data.aws_vpcs.vpcs.ids
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ìœ„ ì½”ë“œë¡œ ë‹¤ìŒê³¼ ê°™ì´ Output ê°’ì„ ì–»ì„ ìˆ˜ ìˆì§€ë§Œ, í•˜ë‚˜ì˜ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;az&lt;/code&gt; ê°’ì„ ì–»ì„ë•Œì™€ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ids[0]&lt;/code&gt; í˜•ì‹ìœ¼ë¡œ ê°’ì„ ì¡°íšŒí•˜ë ¤ í•˜ë©´,
â€œThis value does not have any indices.â€ ë¼ëŠ” ì—ëŸ¬ ë©”ì‹œì§€ì™€ í•¨ê»˜ ì¶œë ¥ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Changes to Outputs:
  + vpc_id &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;
      + &lt;span class=&quot;s2&quot;&gt;&quot;vpc-0x1234567890&quot;&lt;/span&gt;,
    &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ë„ëŒ€ì²´ ë¬´ì—‡ì´ ì˜ëª»ëœ ê²ƒì¼ê¹Œìš”? azì™€ ë™ì¼í•œ ë°©ë²•ìœ¼ë¡œ ì ‘ê·¼í–ˆì§€ë§Œ, ì™œ ì§€ì›í•˜ì§€ ì•ŠëŠ”ì§€ëŠ” ì•„ì§ê¹Œì§€ë„ ëª¨ë¥´ê² ìŠµë‹ˆë‹¤â€¦
ëˆ„êµ¬ ì•„ì‹œëŠ” ë¶„ì´ ìˆë‹¤ë©´ ì•Œë ¤ì£¼ì„¸ìš”.&lt;/p&gt;

&lt;h3 id=&quot;countë¡œ-index-ë¶€ì—¬í•˜ê¸°&quot;&gt;countë¡œ index ë¶€ì—¬í•˜ê¸°&lt;/h3&gt;

&lt;p&gt;ìœ„ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” azë¥¼ ê²€ìƒ‰í•  ë•Œë³´ë‹¤ëŠ” ë¶ˆí¸í•˜ì§€ë§Œ, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;count&lt;/code&gt;ë¥¼ ì‚¬ìš©í•´ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;data &lt;span class=&quot;s2&quot;&gt;&quot;aws_vpc&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;target&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  count &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; length&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;data.aws_vpcs.vpcs.ids&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;    &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; tolist&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;data.aws_vpcs.vpcs.ids&lt;span class=&quot;o&quot;&gt;)[&lt;/span&gt;count.index]
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# sample code using vpc_id&lt;/span&gt;
resource &lt;span class=&quot;s2&quot;&gt;&quot;aws_lb_target_group&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;sample_resource&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  count &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; length&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;data.aws_vpcs.vpcs.ids&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;c&quot;&gt;# Skip Config&lt;/span&gt;
  vpc_id      &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; data.aws_vpc.target[count.index].id
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;aws_vpcs&lt;/code&gt;ê°€ ì•„ë‹Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;aws_vpc&lt;/code&gt;ë¥¼ ì¶”ê°€í•˜ê³  index ë¥¼ ë¶€ì—¬í•˜ê¸° ìœ„í•œ ë‚´ì¥ í•¨ìˆ˜ë“¤ì„ ì‚¬ìš©í•´ indexë¥¼ ë¶€ì—¬í•©ë‹ˆë‹¤.
ì´í›„, ë¦¬ì†ŒìŠ¤ì—ì„œ data ê°’ë“¤ì„ ì‹ë³„í•˜ê¸° ìœ„í•œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;count&lt;/code&gt;ë¥¼ ê¸°ì…í•˜ê³  ìœ„ì™€ ê°™ì´ index ê°’ìœ¼ë¡œ ì¡°íšŒê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;outro&quot;&gt;Outro&lt;/h2&gt;

&lt;p&gt;ì§€ê¸ˆê¹Œì§€ Dataë¥¼ í™œìš©í•´ ê°ì¢… ë¦¬ì†ŒìŠ¤ë“¤ì„ ê²€ìƒ‰í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ ë³´ì•˜ìŠµë‹ˆë‹¤.&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;vpc_id&lt;/code&gt;ë„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;az&lt;/code&gt;ì™€ ê°™ì´ ë³„ë„ì˜ index ê³¼ì • ì—†ì´,
ê°„í¸í•œ ì¡°íšŒê°€ ê°€ëŠ¥í•˜ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤. (ì œê°€ ì•„ì§ ë°©ë²•ì„ ëª¨ë¥´ëŠ” ê²ƒì¼ ìˆ˜ë„ ìˆì–´ìš”!)&lt;/p&gt;

&lt;p&gt;ì§€ê¸ˆê¹Œì§€ í…Œë¼í¼ ë” ìµìˆ™í•˜ê²Œ Data &amp;amp; Index í¸ì„ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ì˜ëª»ëœ ë‚´ìš©ì€ ì§€ì í•´ ì£¼ì„¸ìš”! ğŸ˜ƒ&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;span class=&quot;table-of-contents-list&quot;&gt;Terraform Tips&lt;/span&gt;&lt;/p&gt;
&lt;ul class=&quot;table-of-contents-list&quot;&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips1&quot;&gt;Module &amp;amp; Output&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips2&quot;&gt;Data &amp;amp; Index&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips3&quot;&gt;Refresh &amp;amp; Replace&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips4&quot;&gt;Move (Refactoring)&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips5&quot;&gt;Import&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;</content>

      
      
      
      
      

      <author>
          <name>Heuristic Wave</name>
        
        
      </author>

      

      
        <category term="devops" />
      
        <category term="terraform" />
      

      
        <summary type="html">Terraform ë” ìµìˆ™í•˜ê²Œ 2 - Data &amp;amp; Index AWS ë¦¬ì†ŒìŠ¤ë¡œ ì•Œì•„ë³´ëŠ” terraform Data í™œìš© íŒ</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">Terraform Tips 1 - Module &amp;amp; Output</title>
      <link href="https://heuristicwave.github.io/TerraformTips1" rel="alternate" type="text/html" title="Terraform Tips 1 - Module &amp; Output" />
      <published>2022-01-01T00:00:00+00:00</published>
      <updated>2022-01-01T00:00:00+00:00</updated>
      <id>https://heuristicwave.github.io/TerraformTips1</id>
      <content type="html" xml:base="https://heuristicwave.github.io/TerraformTips1">&lt;p&gt;Terraform ë” ìµìˆ™í•˜ê²Œ 1 - Module &amp;amp; Output &lt;br /&gt;
AWS ë¦¬ì†ŒìŠ¤ë¡œ ì•Œì•„ë³´ëŠ” terraform Module ì—°ê³„ íŒ&lt;/p&gt;

&lt;h2 id=&quot;intro&quot;&gt;Intro&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;Terraform Module&lt;/strong&gt;ì„ ì˜ í™œìš©í•˜ë©´ ë³¸ì¸ì´ ì›í•˜ëŠ” ëŒ€ë¡œ ì¸í”„ë¼ë¥¼ ë ˆê³ ì²˜ëŸ¼ ì¡°ë¦½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ë ˆê³ ì²˜ëŸ¼ ì¸í”„ë¼ë¥¼ ì¡°ë¦½í•˜ê¸° ìœ„í•´ì„œëŠ” ëª¨ë“ˆ ê°„ì˜ ì—°ê³„ê°€ ì¤‘ìš”í•œë°ìš”,
ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” ëª¨ë“ˆ ë‚´ì— ì‘ì„±ëœ &lt;strong&gt;Output value&lt;/strong&gt;ë“¤ì„ í™œìš©í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;í•´ë‹¹ í¬ìŠ¤íŒ…ì€ Outputì— ëŒ€í•œ ì´í•´ê°€ ìˆë‹¤ëŠ” ê°€ì •í•˜ì— ê¸°ìˆ í•˜ì˜€ìœ¼ë¯€ë¡œ, Outputì— ëŒ€í•œ ì„¤ëª…ì´ í•„ìš”í•˜ì‹œë©´ ì•„ë˜ ë§í¬ë“¤ì„ ì°¸ê³ í•´ ì£¼ì„¸ìš”!&lt;/p&gt;

&lt;p&gt;ğŸ¥² ì‚¬ì‹¤, ì•„ë˜ ë¬¸ì„œë³´ë‹¤ ë” ì˜ ì„¤ëª…í•  ìì‹ ì´ ì—†ì–´ì„œâ€¦ ì–¸ì œë‚˜ ê°€ì¥ ì¢‹ì€ êµì¬ëŠ” ê³µì‹ ë¬¸ì„œì…ë‹ˆë‹¤!&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.terraform.io/docs/language/values/outputs.html&quot;&gt;Terraform Docs&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://learn.hashicorp.com/tutorials/terraform/outputs&quot;&gt;Tutorial : Output Data from Terraform&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;output-command-option&quot;&gt;Output Command Option&lt;/h2&gt;

&lt;p&gt;Outputì€ terraform apply ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ê³  ë‚œ í›„, ë§¨ ë§ˆì§€ë§‰ì— Value ë“¤ì´ ë Œë”ë§ ë˜ì–´ ë‚˜ì˜µë‹ˆë‹¤.
ê·¸ëŸ¬ë‚˜ í…Œë¼í¼ ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ì¤‘ê°„ì¤‘ê°„ ì¸í”„ë¼ì˜ value ê°’ë“¤ì´ í•„ìš”í•  ë•Œê°€ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ê·¸ëŸ´ ë•Œ, outputì´ ì •ì˜ëœ ìƒí™©ì—ì„œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform output {label}&lt;/code&gt; ëª…ë ¹ì–´ë¡œ Ouput ê°’ì„ í™•ì¸í•©ë‹ˆë‹¤.
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-raw&lt;/code&gt; ì˜µì…˜ì„ í•¨ê»˜ ì£¼ë©´ ë¬¸ìì—´ í˜•íƒœê°€ ì•„ë‹Œ rawí•œ í…ìŠ¤íŠ¸ ê°’ë§Œì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;terraform output &lt;span class=&quot;nt&quot;&gt;-raw&lt;/span&gt; security_group_id
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;accessing-child-module-outputs&quot;&gt;Accessing Child Module Outputs&lt;/h2&gt;

&lt;p&gt;í•˜ìœ„ ëª¨ë“ˆì˜ ì•„ì›ƒí’‹ì— ì ‘ê·¼í•  ê²½ìš°ë„ ì¢…ì¢… ìˆëŠ”ë°ìš”, ì´ë•ŒëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module.&amp;lt;ëª¨ë“ˆ ëª…&amp;gt;.&amp;lt;Output ëª…&amp;gt;&lt;/code&gt; ì´ëŸ° í˜•ì‹ìœ¼ë¡œ ì¡°íšŒê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.
í•˜ìœ„ ëª¨ë“ˆ ì¶œë ¥ê°’ì— ì ‘ê·¼í•˜ëŠ” ê²ƒì´, ëª¨ë“ˆê³¼ ëª¨ë“ˆì€ ì—°ê³„í•˜ëŠ” ë°©ë²•ì´ê¸°ì— ì•„ë˜ ì˜ˆì‹œì—ì„œ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;module &lt;span class=&quot;s2&quot;&gt;&quot;vpc&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;terraform-aws-modules/vpc/aws&quot;&lt;/span&gt;
  name   &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;sample_vpc&quot;&lt;/span&gt;

  cidr &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;10.10.0.0/16&quot;&lt;/span&gt;

  azs            &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;us-west-2a&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
  public_subnets &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;10.10.1.0/24&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;

  tags &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    Owner       &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;me&quot;&lt;/span&gt;
    Environment &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;stage&quot;&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ìœ„ì™€ ê°™ì€ vpc ëª¨ë“ˆì€ security group ëª¨ë“ˆê³¼ ê±°ì˜ ë‹¨ì§ ìˆ˜ì¤€ìœ¼ë¡œ í•¨ê»˜ ì›€ì§ì´ëŠ”ë°ìš”,
security group ëª¨ë“ˆì„ í™œìš©í•˜ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;vpc_id&lt;/code&gt; ê°’ì´ í•„ìš”í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì´ ê²½ìš°, vpcë¥¼ ë¨¼ì € ìƒì„±í•˜ê³  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;vpc_id&lt;/code&gt; ê°’ì„ ì•Œì•„ë‚´ì–´ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ë§Œ, ë‹¤ìŒê³¼ ê°™ì€ ë°©ë²•ìœ¼ë¡œ ëª¨ë“ˆì„ ì—°ê³„í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;module &lt;span class=&quot;s2&quot;&gt;&quot;security_group&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt;      &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;terraform-aws-modules/security-group/aws&quot;&lt;/span&gt;
  name        &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ssh&quot;&lt;/span&gt;
  description &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ssh from workstation&quot;&lt;/span&gt;
  vpc_id      &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; module.vpc.vpc_id

  ingress_cidr_blocks &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;0.0.0.0/0&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
  ingress_rules       &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;ssh-tcp&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;find-module-output-label&quot;&gt;Find Module Output Label&lt;/h2&gt;

&lt;p&gt;ë°©ê¸ˆ ì „, ëª¨ë“ˆì„ ì—°ê³„í•˜ëŠ” ë°©ë²•ì„ ë°°ì›Œ ë³´ì•˜ìŠµë‹ˆë‹¤. ê·¸ëŸ°ë°, ëª¨ë“ˆì„ ì—°ê³„í•˜ê¸° ìœ„í•´ì„œëŠ” ë¯¸ë¦¬ ì‚¬ì „ì— ì‘ì„±ëœ ëª¨ë“ˆì˜ Output Labelì„ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ìš°ì„  ì—ë””í„°ì˜ Explorer íƒ­ì—ì„œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.terraform&lt;/code&gt; í´ë”ë¥¼ ì—´ì–´ë´…ì‹œë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/module.png&quot; alt=&quot;module.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;applyë¥¼ ì ìš©í•œ &lt;em&gt;security-group, vpc&lt;/em&gt; ëª¨ë“ˆì´ ë‚´ ë¡œì»¬ ë¨¸ì‹ ì— ìˆ¨ì–´ ìˆìŠµë‹ˆë‹¤.
í•´ë‹¹ ëª¨ë“ˆ í´ë” ì•ˆì— ë“¤ì–´ê°€ë©´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;outputs.tf&lt;/code&gt; ê°€ ì •ì˜ë˜ì–´ ìˆìœ¼ë¯€ë¡œ í•´ë‹¹ íŒŒì¼ì„ ì°¸ê³ í•˜ì—¬ Label ê°’ì„ ì–»ì–´ì˜¤ë©´ ë©ë‹ˆë‹¤!&lt;/p&gt;

&lt;h3 id=&quot;example&quot;&gt;Example&lt;/h3&gt;

&lt;p&gt;ìƒí™© : VPC ëª¨ë“ˆì„ ì‚¬ìš©í•´ VPCì™€ ì„œë¸Œë„·ì„ êµ¬ì¶•í•œ ìƒí™©ì—ì„œ, EFSë¥¼ ê° ì„œë¸Œë„·ì—ì„œ ì‚¬ìš©í•˜ë ¤ê³  í•©ë‹ˆë‹¤.
EFSì—ì„œ ëª¨ë“ˆë¡œ ìƒì„±í•œ Subnetsì„ ì–´ë–»ê²Œ ì°¸ì¡°í• ê¹Œìš”?&lt;/p&gt;

&lt;details&gt;
  &lt;summary&gt;ğŸ– ì •ë‹µ ë³´ê¸°&lt;/summary&gt;

  &lt;p&gt;ìœ„ì—ì„œ ì–¸ê¸‰í•œëŒ€ë¡œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;modules/vpc/output.tf&lt;/code&gt; ì—ì„œ í”„ë¼ì´ë¹— ì„œë¸Œë„·ì˜ Labelì„ í™•ì¸í•´ë³´ë©´,
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;private_subnets&lt;/code&gt; ì´ë¼ ê¸°ì¬ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í™œìš©í•´ ì•„ë˜ì™€ ê°™ì´ ëª¨ë“ˆì„ ì°¸ì¡° í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

  &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;resource &lt;span class=&quot;s2&quot;&gt;&quot;aws_efs_mount_target&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;mount&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  count &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; length&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;module.vpc.private_subnets&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

  file_system_id &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; aws_efs_file_system.foo.id
  subnet_id      &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; module.vpc.private_subnets[count.index]
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/details&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;outro&quot;&gt;Outro&lt;/h2&gt;

&lt;p&gt;ì´ë ‡ê²Œ Moduleì˜ Output ê°’ì„ í™œìš©í•˜ëŠ” ë°©ë²•ì„ ì•Œê²Œ ë˜ë‹ˆ, í…Œë¼í¼ ëª¨ë“ˆ ì¡°ë¦½ì— ëŒ€í•œ ìì‹ ê°ì´ ìƒê²¼ìŠµë‹ˆë‹¤. 
ì•ìœ¼ë¡œë„ í…Œë¼í¼ì— ë” ìµìˆ™í•˜ì§€ê¸° ìœ„í•œ ë°©ë²•ë“¤ì„ ì‹œë¦¬ì¦ˆë¡œ ì—°ì¬í•  ê³„íšì¸ë°, ì–¸ì œ ëë‚ ì§€ ëª¨ë¥´ê² ìŠµë‹ˆë‹¤. ğŸ˜‘&lt;/p&gt;

&lt;p&gt;ì§€ê¸ˆê¹Œì§€ í…Œë¼í¼ ë” ìµìˆ™í•˜ê²Œ Module &amp;amp; Output í¸ì„ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ì˜ëª»ëœ ë‚´ìš©ì€ ì§€ì í•´ ì£¼ì„¸ìš”! ğŸ˜ƒ&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;span class=&quot;table-of-contents-list&quot;&gt;Terraform Tips&lt;/span&gt;&lt;/p&gt;
&lt;ul class=&quot;table-of-contents-list&quot;&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips1&quot;&gt;Module &amp;amp; Output&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips2&quot;&gt;Data &amp;amp; Index&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips3&quot;&gt;Refresh &amp;amp; Replace&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips4&quot;&gt;Move (Refactoring)&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips5&quot;&gt;Import&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;</content>

      
      
      
      
      

      <author>
          <name>Heuristic Wave</name>
        
        
      </author>

      

      
        <category term="devops" />
      
        <category term="terraform" />
      

      
        <summary type="html">Terraform ë” ìµìˆ™í•˜ê²Œ 1 - Module &amp;amp; Output AWS ë¦¬ì†ŒìŠ¤ë¡œ ì•Œì•„ë³´ëŠ” terraform Module ì—°ê³„ íŒ</summary>
      

      
      
    </entry>
  
</feed>
