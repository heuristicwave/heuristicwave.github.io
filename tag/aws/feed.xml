<?xml version="1.0" encoding="utf-8"?>

<feed xmlns="http://www.w3.org/2005/Atom" >
  <generator uri="https://jekyllrb.com/" version="3.9.3">Jekyll</generator>
  <link href="https://heuristicwave.github.io/tag/aws/feed.xml" rel="self" type="application/atom+xml" />
  <link href="https://heuristicwave.github.io/" rel="alternate" type="text/html" />
  <updated>2023-03-08T15:42:09+00:00</updated>
  <id>https://heuristicwave.github.io/tag/aws/feed.xml</id>

  
  
  

  
    <title type="html">Heuristic Wave Blog | </title>
  

  
    <subtitle>Careful Writer</subtitle>
  

  

  
    
      
    
  

  
  

  
    <entry>
      <title type="html">Using git submodule with AWS Code Pipeline</title>
      <link href="https://heuristicwave.github.io/submodule" rel="alternate" type="text/html" title="Using git submodule with AWS Code Pipeline" />
      <published>2023-03-07T00:00:00+00:00</published>
      <updated>2023-03-07T00:00:00+00:00</updated>
      <id>https://heuristicwave.github.io/submodule</id>
      <content type="html" xml:base="https://heuristicwave.github.io/submodule">&lt;p&gt;AWS CodePipelineìœ¼ë¡œ git submodule ì‚¬ìš©í•˜&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;intro&quot;&gt;Intro&lt;/h2&gt;

&lt;p&gt;ì—¬ëŸ¬ë¶„ì´ ë³´ê³ ê³„ì‹  ì´ ë¸”ë¡œê·¸(GitHub Pages í™œìš©)ëŠ” 2ê°œì˜ ê¹ƒí—™ ë ˆí¬ì§€í† ë¦¬ë¥¼ í†µí•´ ë°°í¬ë˜ê³  ìˆìŠµë‹ˆë‹¤. ì²«ë²ˆì§¸ ë ˆí¬ì§€í† ë¦¬ëŠ” ì›ë³¸ ì†ŒìŠ¤ì½”ë“œë¥¼ ë‹´ê³  ìˆìœ¼ë©°,
ë¸”ë¡œê·¸ ê¸€ì„ ì‘ì„±í•  ë•Œ ë§ˆë‹¤ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;build exec jekyll exec&lt;/code&gt;ë¼ëŠ” ëª…ë ¹ì–´ë¡œ localhostì—ì„œ í‡´ê³ ë¥¼ ì§„í–‰í•©ë‹ˆë‹¤.
ì´ì–´ì„œ ì›ë³¸ ì†ŒìŠ¤ì½”ë“œì—ì„œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;build exec jekyll build&lt;/code&gt;ë¼ëŠ” ëª…ë ¹ì–´ë¡œ ë¹Œë“œí•˜ë©´ ë¹Œë“œ ê²°ê³¼ë¬¼ì´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;output&lt;/code&gt; íŒŒì¼ì— ë–¨ì–´ì§‘ë‹ˆë‹¤.
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;output&lt;/code&gt; íŒŒì¼ì—ëŠ” markdown í˜•ì‹ìœ¼ë¡œ ì‘ì„±í•œ ê¸€ë“¤ì´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;html&lt;/code&gt; íŒŒì¼ë¡œ ë¹Œë“œë˜ì–´ 2ë²ˆì§¸ ë ˆí¬ì§€í† ë¦¬ì— ì»¤ë°‹ë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì €ëŠ” ì´ê²ƒì„ ìë™í™” í•˜ê¸° ìœ„í•´ ê¸°ì¡´ì—ëŠ” Travis CIë¥¼ ì‚¬ìš©í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤.
í˜„ì¬ ë¸”ë¡œê·¸ë¡œ CI/CD íŒŒì´í”„ë¼ì¸ì„ êµ¬ì¶•í•˜ê³  ì•½ 2ë…„ê°„ 88íšŒì˜ Commitê¹Œì§€ ì˜ ì“°ê³  ìˆë‹¤ê°€ ì–´ëŠìƒˆ ë‹¤ìŒê³¼ ê°™ì€ ì•ŒëŒì„ ë°›ì•„ ë³´ë‹ˆ, í¬ë ˆë”§ ì†Œì§„ ã… &lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Builds have been temporarily disabled for private and public repositories due to a negative credit balance. Please go to the Plan page to replenish your credit balance.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;outro&quot;&gt;Outro&lt;/h2&gt;

&lt;p&gt;ì†Œì¤‘í•œ ì‹œê°„ì„ ë‚´ì–´ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ì˜ëª»ëœ ë‚´ìš©ì€ ì§€ì í•´ì£¼ì„¸ìš”! ğŸ˜ƒ&lt;/p&gt;

&lt;hr /&gt;</content>

      
      
      
      
      

      <author>
          <name>Heuristic Wave</name>
        
        
      </author>

      

      
        <category term="devops" />
      
        <category term="aws" />
      

      
        <summary type="html">AWS CodePipelineìœ¼ë¡œ git submodule ì‚¬ìš©í•˜</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">Amazon EKS Multi Cluster Upgrade with ExternalDNS</title>
      <link href="https://heuristicwave.github.io/EKS_Upgrade" rel="alternate" type="text/html" title="Amazon EKS Multi Cluster Upgrade with ExternalDNS" />
      <published>2023-02-25T00:00:00+00:00</published>
      <updated>2023-02-25T00:00:00+00:00</updated>
      <id>https://heuristicwave.github.io/EKS_Upgrade</id>
      <content type="html" xml:base="https://heuristicwave.github.io/EKS_Upgrade">&lt;p&gt;ExternalDNSë¡œ Amazon EKS ë©€í‹° í´ëŸ¬ìŠ¤í„° ì—…ê·¸ë ˆì´ë“œí•˜ê¸°&lt;/p&gt;

&lt;h2 id=&quot;intro&quot;&gt;Intro&lt;/h2&gt;

&lt;p&gt;Amazon EKS(ì´í•˜ EKS)ëŠ” &lt;a href=&quot;https://docs.aws.amazon.com/eks/latest/userguide/kubernetes-versions.html#kubernetes-release-calendar&quot;&gt;ì•½ 3 ~ 5&lt;/a&gt; ê°œì›”ë§ˆë‹¤ ìƒˆë¡œìš´ ë²„ì „ì´ ì¶œì‹œí•©ë‹ˆë‹¤.
ìš´ì˜ ì¸¡ë©´ì—ì„œ ìƒˆë¡œìš´ ë²„ì „ ì¶œì‹œëŠ” ê¸°ì¡´ EKSì˜ ë²„ì „ ì—…ê·¸ë ˆì´ë“œê°€ í•„ìš”í•˜ë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. EKS ì—…ê·¸ë ˆì´ë“œëŠ” EKS ì½˜ì†”ì—ì„œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ì§€ê¸ˆ ì—…ë°ì´íŠ¸&lt;/code&gt; ë²„íŠ¼ì„ ëˆŒëŸ¬ ì†ì‰½ê²Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;h2 id=&quot;-single-cluster-upgrade&quot;&gt;ğŸ  Single Cluster Upgrade&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/eks/cluster.png&quot; alt=&quot;clusterUpdate&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ìœ„ì™€ ê°™ì€ &lt;a href=&quot;https://docs.aws.amazon.com/eks/latest/userguide/update-cluster.html&quot;&gt;EKS í´ëŸ¬ìŠ¤í„° ë²„ì „ ì—…ë°ì´íŠ¸&lt;/a&gt;ë¥¼ ì‹±ê¸€ í´ëŸ¬ìŠ¤í„° ê¸°ë°˜ì˜ ì—…ê·¸ë ˆì´ë“œë¼ê³  í•˜ë©°, ë¹„êµì  ì†ì‰½ê²Œ k8s ë²„ì „ ì—…ë°ì´íŠ¸ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.
ì—…ë°ì´íŠ¸ê°€ ì†ì‰¬ìš´ ë°˜ë©´ ëª‡ ê°€ì§€ ì œì•½ ì‚¬í•­ë„ ì¡´ì¬í•©ë‹ˆë‹¤. ëŒ€í‘œì ìœ¼ë¡œ ì•„ë˜ì™€ ê°™ì´ ì›í•˜ëŠ” ë²„ì „ìœ¼ë¡œ ë°”ë¡œ ì—…ë°ì´íŠ¸ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ìˆœì°¨ì  ë‹¨ê³„ë¥¼ ê±°ì³ì•¼ í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/eks/singleUpdate.png&quot; alt=&quot;clusterUpdate&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ï¸-multi-cluster-upgrade&quot;&gt;ğŸ˜ï¸â€ Multi Cluster Upgrade&lt;/h2&gt;

&lt;p&gt;ë©€í‹° í´ëŸ¬ìŠ¤í„° ì—…ê·¸ë ˆì´ë“œëŠ” ë™ì¼í•œ í™˜ê²½ì˜ EKSë¥¼ ë©€í‹°ë¡œ êµ¬ì„±í•˜ë‹¤ ë³´ë‹ˆ,
ì‹±ê¸€ í´ëŸ¬ìŠ¤í„°ì™€ëŠ” ë‹¬ë¦¬ &lt;strong&gt;ì›í•˜ëŠ” ë²„ì „ìœ¼ë¡œ ë°”ë¡œ ìƒì„±&lt;/strong&gt;ì´ ê°€ëŠ¥í•˜ê³  ë§Œì— í•˜ë‚˜ &lt;strong&gt;ë¡¤ë°±&lt;/strong&gt;ì´ í•„ìš”í•  ê²½ìš° ê¸°ì¡´ í™˜ê²½ìœ¼ë¡œ ëŒì•„ê°ˆ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ë©€í‹° í´ëŸ¬ìŠ¤í„° ê¸°ë°˜ì˜ ì—…ê·¸ë ˆì´ë“œ ë°©ë²•ì€ ì—¬ëŸ¬ ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ì¤‘ì—ì„œë„ ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” &lt;a href=&quot;https://aws.amazon.com/blogs/containers/onfidos-journey-to-a-multi-cluster-amazon-eks-architecture/&quot;&gt;AWS Blog&lt;/a&gt;ì— ì†Œê°œëœ 3ê°€ì§€ ë°©ë²• ì¤‘,
&lt;strong&gt;ë¹„êµì  ê°€ì¥ ìˆ˜ì›”í•œ ë°©ë²•ì¸ ì²« ë²ˆì§¸ ë°©ë²•ìœ¼ë¡œ í•œì •&lt;/strong&gt;í•´ì„œ ì´ì•¼ê¸°í•´ ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/eks/multiCluster.png&quot; alt=&quot;clusterUpdate&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ì²« ë²ˆì§¸ë¡œ ì†Œê°œëœ Option 1ì˜ ë°©ë²•ì€ 2ê°œì˜ ë™ì¼í•œ í™˜ê²½ì—ì„œ Amazon Route 53ì˜ ê°€ì¤‘ì¹˜ ê¸°ëŠ¥ì„ í™œìš©í•˜ì—¬ ì—…ê·¸ë ˆì´ë“œí•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ë°©ë²•ì€ ê°„ë‹¨í•©ë‹ˆë‹¤. &lt;strong&gt;ì‹±ê¸€ í´ëŸ¬ìŠ¤í„°&lt;/strong&gt;ì—ì„œ ë³„ë‹¤ë¥¸ ì‘ì—…ì„ í•´ì£¼ì§€ ì•Šì•˜ë‹¤ë©´, ì•„ë§ˆ Route 53ì˜ &lt;strong&gt;Routing policy&lt;/strong&gt;ë¥¼ &lt;strong&gt;Simple&lt;/strong&gt;ë¡œ ì„¤ì •í•´ ë‘ì—ˆì„ ê²ë‹ˆë‹¤.
&lt;strong&gt;ë©€í‹° í´ëŸ¬ìŠ¤í„°&lt;/strong&gt;ì—ì„œëŠ” &lt;strong&gt;Routing policy&lt;/strong&gt;ë¥¼ &lt;strong&gt;Weighted&lt;/strong&gt;ë¡œ ì„¤ì •í•´ ì„¤ì •í•œ ë¹„ìœ¨ë¡œ íŠ¸ë˜í”½ì„ ë¶„ë°°í•˜ëŠ” ì›ë¦¬ì…ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/aws/defineWeighted.png&quot; alt=&quot;clusterUpdate&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ìœ„ ìº¡ì²˜ì™€ ê°™ì´ ë ˆì½”ë“œë¥¼ ìƒì„±í•  ë•Œ, ì•„ë˜ 3ê°€ì§€ ìš”ì†Œë¥¼ ì£¼ëª©í•˜ì—¬ ê°€ì¤‘ì¹˜ ì •ì±…ì„ ìƒì„±í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;DNSì˜ &lt;strong&gt;ìºì‹œë¥¼ ìµœì†Œí™”&lt;/strong&gt;í•˜ê¸° ìœ„í•´ &lt;strong&gt;TTLì€ 1m&lt;/strong&gt;(60 seconds)ë¥¼ ê¶Œì¥&lt;/li&gt;
  &lt;li&gt;ê° ë‹¤ë¥¸ í™˜ê²½ì—ì„œ &lt;strong&gt;50:50 ê°€ì¤‘ì¹˜&lt;/strong&gt;ë¥¼ ì£¼ê³  ì‹¶ì„ ê²½ìš°, &lt;strong&gt;2ê°œì˜ ê°€ì¤‘ì¹˜ ë ˆì½”ë“œì— Weighted ê°’ 1&lt;/strong&gt;ì„ ë¶€ì—¬&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Record ID&lt;/code&gt;ëŠ” ë ˆì½”ë“œì˜ &lt;strong&gt;ì£¼ì„&lt;/strong&gt;ê³¼ ê°™ì€ ì—­í• ì„ í•˜ì§€ë§Œ &lt;strong&gt;í•„ìˆ˜&lt;/strong&gt;ë¡œ ì‘ì„±í•´ì•¼  (ì´ì–´ì„œ ì´ ê°’ì˜ ì¤‘ìš”ì„±ì„~~ ğŸ˜±)&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;externaldns&quot;&gt;ExternalDNS&lt;/h2&gt;

&lt;p&gt;KubernetesëŠ” KubeDNSë¥¼ ë‚´ë¶€ DNS ì„œë²„ë¡œ í™œìš©í•©ë‹ˆë‹¤. Route 53ê³¼ ê°™ì€ ë‹¤ë¥¸ DNS ê³µê¸‰ìë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” &lt;a href=&quot;https://github.com/kubernetes-sigs/external-dns&quot;&gt;external-dns&lt;/a&gt;ë¥¼ ì¶”ê°€ì ìœ¼ë¡œ ì„¤ì¹˜í•´ ì‚¬ìš©í•©ë‹ˆë‹¤.
ë¬¼ë¡  external-dnsë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  &lt;strong&gt;ì™¸ë¶€ DNSì˜ ì˜ì—­ê³¼ k8sì˜ ì˜ì—­ì„ ë¶„ë¦¬í•˜ì—¬ ì‚¬ìš©&lt;/strong&gt;í•  ìˆ˜ë„ ìˆì§€ë§Œ, external-dnsë¥¼ ì ìš©í•œë‹¤ë©´ &lt;strong&gt;ì™¸ë¶€ DNS ê³µê¸‰ìë„ ì½”ë“œë¡œ ì œì–´&lt;/strong&gt;í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;set-up&quot;&gt;Set up&lt;/h3&gt;

&lt;p&gt;ExternalDNSë¥¼ EKSì— ì„¤ì •í•˜ëŠ” ë°©ë²•ì€ &lt;a href=&quot;https://aws.amazon.com/premiumsupport/knowledge-center/eks-set-up-externaldns/&quot;&gt;ì²¨ë¶€ ë§í¬&lt;/a&gt;ì— ìì„¸í•˜ê²Œ ì„¤ëª…ë˜ì–´ ìˆì§€ë§Œ, ë†“ì¹˜ê¸° ì‰¬ìš´ 2ê°€ì§€ ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ê³  ë„˜ì–´ê°€ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;h4 id=&quot;externaldns-1&quot;&gt;ExternalDNS&lt;/h4&gt;

&lt;p&gt;external-dnsë¥¼ ìµœì¢… ë°°í¬í•˜ê¸° ì „, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Deployment&lt;/code&gt;ì˜ ì•„ë˜ 2ê°€ì§€ ì¸ìë¥¼ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;--domain-filter=&amp;lt;Your_R53_Domain_Name&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;--txt-owner-id=&amp;lt;Your_R53_HostedZone_Id&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;ğŸ ì´ë²ˆ í¬ìŠ¤íŒ…ì„ ì¤€ë¹„í•˜ë©° external-dnsê°€ ê°„í—ì ìœ¼ë¡œ ë™ì‘í•˜ëŠ” ê²½ìš°ë¥¼ ëª©ê²©í–ˆìŠµë‹ˆë‹¤. &lt;br /&gt;
ì›ì¸ì€ í•´ë‹¹ ì¸ìë¥¼ ì˜¤ê¸°ì¬í–ˆê¸° ë•Œë¬¸ì¸ë°, ì›ë˜ëŒ€ë¡œë¼ë©´ ë™ì‘í•˜ì§€ ì•Šì•„ì•¼ í•˜ëŠ”ë° ë²„ê·¸ì¸ ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&quot;ingress&quot;&gt;Ingress&lt;/h4&gt;

&lt;p&gt;ExternalDNSë¥¼ ì œëŒ€ë¡œ ì„¤ì •í–ˆë‹¤ë©´, ì´ì–´ì„œ ì™¸ë¶€ë¡œ ë…¸ì¶œí•  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Ingress&lt;/code&gt;ì˜ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;annotations&lt;/code&gt;ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;external-dns&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;public&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;external-dns.alpha.kubernetes.io/hostname&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;myDomain.com&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;external-dns.alpha.kubernetes.io/set-identifier&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;recordID&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;external-dns.alpha.kubernetes.io/aws-weight&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;1'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Simple ë¼ìš°íŒ… ì •ì±…ì—ì„œëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;set-identifier&lt;/code&gt;ê°€ ì—†ì–´ë„ ë˜ì§€ë§Œ, ì´ì™¸ ë¼ìš°íŒ… ì •ì±…ì—ì„œëŠ” &lt;strong&gt;í•„ìˆ˜&lt;/strong&gt;ì ìœ¼ë¡œ ë“¤ì–´ê°€ì•¼ í•©ë‹ˆë‹¤. 
ì§ì „ ì½˜ì†”ì—ì„œëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Record ID&lt;/code&gt;ë¥¼ ê¸°ì¬í•˜ì§€ ì•Šì•˜ì„ ê²½ìš° í™”ë©´ì´ ë„˜ì–´ê°€ì§€ ì•Šì§€ë§Œ, external-dnsì—ì„œ í•´ë‹¹ ê°’ì´ ë¹ ì§€ë©´ ë¡œê·¸ì™€ íŒŒë“œ ìƒíƒœ ëª¨ë‘ íŠ¹ì´ì ì´ ë°œê²¬ë˜ì§€ ì•Šì•„ ì›ì¸ì„ ì°¾ê¸° ì–´ë ¤ì›Œì§‘ë‹ˆë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;issue&quot;&gt;Issue&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;yaml íŒŒì¼ì— ì˜ë„ë¥¼ ê¸°ì¬í•˜ì—¬ ë°°í¬í–ˆì§€ë§Œ, ì •ì‘ Route 53ì—ì„œ ë ˆì½”ë“œê°€ ì—…ë°ì´íŠ¸ë˜ì§€ ì•ŠëŠ” ê²½ìš°&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;êµ¬ì¶• ì´ˆê¸°ë¶€í„° ê°€ì¤‘ì¹˜ ì •ì±…ì„ ì ìš©í•œ ë©€í‹° í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•œë‹¤ë©´ í•´ë‹¹ ì´ìŠˆë¥¼ ë§Œë‚˜ì§€ ì•Šê² ì§€ë§Œ,
ì‹±ê¸€ í´ëŸ¬ìŠ¤í„°ë¡œ external-dnsë¥¼ ìš´ì˜í•˜ê³  ìˆëŠ” í™˜ê²½ì—ì„œ ë©€í‹° í´ëŸ¬ìŠ¤í„°ë¥¼ ì ìš©í•˜ë©´ &lt;a href=&quot;https://github.com/kubernetes-sigs/external-dns/issues/1411&quot;&gt;í•´ë‹¹ ì´ìŠˆ&lt;/a&gt;ë¥¼ ë§Œë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;UPSERT is not possible, doing UPSERT will actually do a CREATE that will fail&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë…¸ì¶œí•˜ê³ ì í•˜ëŠ” Ingressë¥¼ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;delete &amp;amp; apply&lt;/code&gt; í•œë‹¤ë©´ ìš°íšŒê°€ ê°€ëŠ¥í•˜ê² ì§€ë§Œ, ìš´ì˜í•˜ê³  ìˆëŠ” ì„œë¹„ìŠ¤ë¼ë©´ &lt;strong&gt;ë‹¤ìš´íƒ€ì„&lt;/strong&gt;ì´ ë°œìƒí•  ê²ƒì…ë‹ˆë‹¤.
ì§€ê¸ˆìœ¼ë¡œì„œëŠ” Route 53 ì½˜ì†” í™”ë©´ì—ì„œ ìˆ˜ë™ìœ¼ë¡œ ê¸°ì¡´ì˜ ì •ì±…ì„ ìˆ˜ì •í•´ ì£¼ê³  í›„ì†ìœ¼ë¡œ ìƒì„±í•˜ëŠ” í´ëŸ¬ìŠ¤í„°ëŠ” ì½”ë“œë¡œ ì œì–´í•˜ëŠ” ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì½”ë“œì™€ ì½˜ì†” 2ê°€ì§€ ì±„ë„ì—ì„œ ì¸í”„ë¼ë¥¼ ë‹¤ë£¨ëŠ” ë°©ë²•ì€ ë°”ëŒì§í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;í•´ë‹¹ ì´ìŠˆë¥¼ í•´ê²°í•œ ì§í›„ external-dnsì˜ logs&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;â”‚ &lt;span class=&quot;nb&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2023-02-25T16:28:56Z&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;level&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;info &lt;span class=&quot;nv&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Applying provider record filter for domains: [myDomain.com. .myDomain.com.]&quot;&lt;/span&gt;
â”‚ &lt;span class=&quot;nb&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2023-02-25T16:28:57Z&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;level&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;info &lt;span class=&quot;nv&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Desired change: CREATE ex.myDomain.com A [Id: /hostedzone/Z0HOSTEDZONEID]&quot;&lt;/span&gt;
â”‚ &lt;span class=&quot;nb&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2023-02-25T16:28:57Z&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;level&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;info &lt;span class=&quot;nv&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Desired change: CREATE ex.myDomain.com TXT [Id: /hostedzone/Z0HOSTEDZONEID]&quot;&lt;/span&gt;
â”‚ &lt;span class=&quot;nb&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2023-02-25T16:28:57Z&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;level&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;error &lt;span class=&quot;nv&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Failure in zone myDomain.com. [Id: /hostedzone/Z0HOSTEDZONEID]&quot;&lt;/span&gt;
â”‚ &lt;span class=&quot;nb&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2023-02-25T16:28:57Z&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;level&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;error &lt;span class=&quot;nv&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;InvalidChangeBatch: [RRSet with DNS name ex.myDomain.com.,
â”‚ type TXT, SetIdentifier recordID cannot be created as a non-weighted set exists with the same name and type.]&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n\t&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;status code: 400, request
â”‚ time=&quot;&lt;/span&gt;2023-02-25T16:28:57Z&lt;span class=&quot;s2&quot;&gt;&quot; level=error msg=&quot;&lt;/span&gt;failed to submit all changes &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;the following zones: &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;/hostedzone/Z0HOSTEDZONEID]&lt;span class=&quot;s2&quot;&gt;&quot;

-- After changing Simple Routing policy --

â”‚ time=&quot;&lt;/span&gt;2023-02-25T16:29:58Z&lt;span class=&quot;s2&quot;&gt;&quot; level=info msg=&quot;&lt;/span&gt;2 record&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;s&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;zone myDomain.com. &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Id: /hostedzone/Z0HOSTEDZONEID] were successfully updated&lt;span class=&quot;s2&quot;&gt;&quot;
â”‚ time=&quot;&lt;/span&gt;2023-02-25T16:30:58Z&lt;span class=&quot;s2&quot;&gt;&quot; level=info msg=&quot;&lt;/span&gt;Applying provider record filter &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;domains: &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;myDomain.com. .myDomain.com.]&lt;span class=&quot;s2&quot;&gt;&quot;
â”‚ time=&quot;&lt;/span&gt;2023-02-25T16:30:58Z&lt;span class=&quot;s2&quot;&gt;&quot; level=info msg=&quot;&lt;/span&gt;All records are already up to &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;ê²€ì¦&quot;&gt;ê²€ì¦&lt;/h3&gt;

&lt;p&gt;ì‹¤ì œ 1:1ë¡œ ë¼ìš°íŒ…ì´ ì¼ì–´ë‚˜ê³  ìˆë‚˜ í™•ì¸í•˜ê³  ì‹¶ë‹¤ë©´, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ì›¹&lt;/code&gt; í˜¹ì€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dig&lt;/code&gt; ëª…ë ¹ì–´ë¡œ í™•ì¸ì´ ê°€ëŠ¥í•˜ì§€ë§Œ ê°€ì¥ ì •í™•í•œ ë°©ë²•ì€ Route 53 ë‚´ &lt;strong&gt;Test record&lt;/strong&gt;ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.
Record í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ Record nameì„ ê¸°ì¬í•˜ê³  &lt;strong&gt;Get response&lt;/strong&gt; ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ &lt;strong&gt;Response returned by Route 53&lt;/strong&gt; í™”ë©´ì—ì„œ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°”ë€ŒëŠ” IPë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/aws/testRecord.png&quot; alt=&quot;testRecord&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;ë©€í‹°-í´ëŸ¬ìŠ¤í„°-êµì²´-ì‘ì—…&quot;&gt;ë©€í‹° í´ëŸ¬ìŠ¤í„° êµì²´ ì‘ì—…&lt;/h4&gt;

&lt;p&gt;â—ï¸ ê¸°ì¡´ í´ëŸ¬ìŠ¤í„°ë¥¼ A, ì—…ê·¸ë ˆì´ë“œë¥¼ ì§„í–‰í•  í´ëŸ¬ìŠ¤í„°ë¥¼ Bë¼ ê°€ì •í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;B í´ëŸ¬ìŠ¤í„°ê°€ ë¬¸ì œì—†ë‹¤ íŒë‹¨ë˜ë©´, ë‹¤ì‹œ í•œë²ˆ ê°€ì¤‘ì¹˜ë¥¼ ì¡°ì ˆí•´ A í´ëŸ¬ìŠ¤í„°ë¥¼ ëŒ€ì²´í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ê°€ì¤‘ì¹˜ ë³€í™”, 1:0 ğŸ”œ 1:1 ğŸ”œ 0:1&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;B í´ëŸ¬ìŠ¤í„°ì—ì„œ ë¬¸ì œê°€ ìˆë‹¤ íŒë‹¨ë˜ë©´ Bì˜ ê°€ì¤‘ì¹˜ë¥¼ 0ìœ¼ë¡œ ë°”ê¾¸ë©´ ë¡¤ë°±ì˜ íš¨ê³¼ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;outro&quot;&gt;Outro&lt;/h2&gt;

&lt;p&gt;external-dnsëŠ” Route 53 ë¦¬ì†ŒìŠ¤ë¥¼ ì œì–´í•  ìˆ˜ ìˆì–´ í¸ë¦¬í•˜ë©´ì„œë„ ìš´ì˜ì´ ë³µì¡í•©ë‹ˆë‹¤. ìœ„ì—ì„œ ì–¸ê¸‰í•œ ì´ìŠˆ ì™¸ì—ë„ GitOpsë¥¼ êµ¬ì¶•í•œ ìƒíƒœì—ì„œ ë©€í‹° í´ëŸ¬ìŠ¤í„°ë¥¼ ìš´ìš©í•˜ë ¤ë©´, ê° í´ëŸ¬ìŠ¤í„°ë§ˆë‹¤ ë‹¤ë¥¸ Repositoryê°€ í•„ìš”í•©ë‹ˆë‹¤.
terraformìœ¼ë¡œ external-dnsë¥¼ ëŒ€ì²´í•  ìˆ˜ë„ ìˆì§€ë§Œ, eksctlë¥¼ ì‚¬ìš©í•œë‹¤ë©´ external-dnsê°€ ë„ì›€ì´ ë˜ë‹ˆ ì‚¬ìš© í™˜ê²½ì— ë”°ë¼ ì ì ˆí•œ ë„êµ¬ë¥¼ ì‚¬ìš©í•´ì•¼ í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤.
ëª¨ë“  ê²ƒì„ ì½”ë“œë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì€ ì‰½ì§€ ì•Šë„¤ìš”. ğŸ¤£&lt;/p&gt;

&lt;p&gt;ì†Œì¤‘í•œ ì‹œê°„ì„ ë‚´ì–´ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ì˜ëª»ëœ ë‚´ìš©ì€ ì§€ì í•´ ì£¼ì„¸ìš”! ğŸ˜ƒ&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;</content>

      
      
      
      
      

      <author>
          <name>Heuristic Wave</name>
        
        
      </author>

      

      
        <category term="aws" />
      
        <category term="devops" />
      
        <category term="eks" />
      

      
        <summary type="html">ExternalDNSë¡œ Amazon EKS ë©€í‹° í´ëŸ¬ìŠ¤í„° ì—…ê·¸ë ˆì´ë“œí•˜ê¸°</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">Using OpenAI API with AWS Lambda</title>
      <link href="https://heuristicwave.github.io/OpenAI_Lambda" rel="alternate" type="text/html" title="Using OpenAI API with AWS Lambda" />
      <published>2023-02-02T20:00:00+00:00</published>
      <updated>2023-02-02T20:00:00+00:00</updated>
      <id>https://heuristicwave.github.io/OpenAI_Lambda</id>
      <content type="html" xml:base="https://heuristicwave.github.io/OpenAI_Lambda">&lt;p&gt;AWS Lambda, OpenAI APIë¥¼ í™œìš©í•œ ê°œì¸ AI ë´‡ ë§Œë“¤ê¸°&lt;/p&gt;

&lt;h1 id=&quot;intro&quot;&gt;Intro&lt;/h1&gt;

&lt;p&gt;2ì›” 2ì¼ &lt;a href=&quot;https://www.facebook.com/groups/awskrug/&quot;&gt;AWSKRUG&lt;/a&gt;ì˜ Slack ì±„ë„ì—ì„œ ChatGPT Slack App í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í–ˆë‹¤ëŠ” ê¸€ì„ ë³´ê³ ,
ì €ë„ ë©”ì‹ ì €ì™€ ì—°ë™í•˜ì—¬ ChatGPTë¥¼ ì‚¬ìš©í•´ ë³´ê³  ì‹¶ì€ ìš•ì‹¬ì´ ìƒê²¼ìŠµë‹ˆë‹¤. (ì•„ì§, ChatGPTë¥¼ ê°œì¸ ë´‡ì— ì ìš©í•˜ì§€ëŠ” ì•Šì•˜ìŠµë‹ˆë‹¤.)&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/etc/awskrug.png&quot; alt=&quot;awskrug&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ğŸ– í•´ë‹¹ í¬ìŠ¤íŒ…ì—ì„œëŠ” &lt;strong&gt;ChatGPT&lt;/strong&gt;ê°€ ì•„ë‹Œ GPT-3 ëª¨ë¸ ì¤‘, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;text-davinci-003&lt;/code&gt; ëª¨ë¸ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.
&lt;br /&gt;&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;ë°°ê²½ ì§€ì‹ : &lt;a href=&quot;https://www.reddit.com/r/OpenAI/comments/zdrnsf/difference_between_chatgpt_and_the_new_davinci_3/&quot;&gt;Difference between ChatGPT and the new davinci 3 model?&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;ì´ë¯¸ ì¸í„°ë„·ì— OpenAI APIë¥¼ Slackê³¼ ì—°ë™í•˜ì—¬ ì‚¬ìš©í•˜ê³  ìˆëŠ” ì‚¬ë¡€ë“¤ì€ ë§ì•„,
ì œê°€ ê·¼ë¬´í•˜ëŠ” íšŒì‚¬ì—ì„œ ì‚¬ìš©í•˜ê³  ìˆëŠ” &lt;a href=&quot;https://dooray.com/main/&quot;&gt;NHNì˜ í˜‘ì—… íˆ´ Dooray&lt;/a&gt;ì™€ ì—°ë™í•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ğŸ’¡ í•´ë‹¹ í¬ìŠ¤íŒ…ì—ì„œëŠ” Doorayì™€ AWS Lambdaì˜ í†µí•© ë°©ë²•ì„ ë‹¤ë£¨ì§€ë§Œ,
ë‘ë ˆì´ ì™¸ì˜ ë‹¤ë¥¸ ë©”ì‹ ì € ë„êµ¬ì™€ë„ ì—°ë™í•˜ëŠ” ë°©ë²•ì´ ìœ ì‚¬í•˜ë¯€ë¡œ í•´ë‹¹ ë°©ë²•ì„ ì‘ìš©í•˜ì—¬ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;-workflow&quot;&gt;ğŸ§­ Workflow&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/etc/dooraygpt.png&quot; alt=&quot;DoorayGPT&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ìœ„í¬í”Œë¡œìš°ëŠ” ìœ„ì™€ ê°™ìŠµë‹ˆë‹¤. ì‚¬ìš©ìê°€ ë©”ì‹ ì €ì—ì„œ ì œê³µí•˜ëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/&lt;/code&gt; ì»¤ë§¨ë“œë¡œ ì§ˆì˜ë¥¼ í•˜ë©´,
í•´ë‹¹ ìš”ì²­ì´ AWS Lambdaë¥¼ í†µí•´ OpenAIì˜ APIë¥¼ í™œìš©í•´ ì§ˆì˜ì— ëŒ€í•œ ëŒ€ë‹µì„ ë°›ì•„ ë©”ì‹ ì €ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;í•´ë‹¹ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ì„œëŠ” &lt;a href=&quot;https://platform.openai.com/account/api-keys&quot;&gt;OpenAI API keys&lt;/a&gt;ì™€ AWS Lambdaê°€ í•„ìš”í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ì‘ì—… ìˆœì„œ&lt;/strong&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Lambda Layer ì¶”ê°€&lt;/li&gt;
  &lt;li&gt;Lambda Function ë°°í¬&lt;/li&gt;
  &lt;li&gt;Lambda Function URL ìƒì„±&lt;/li&gt;
  &lt;li&gt;Messenger ì„œë¹„ìŠ¤ì™€ Lambda í†µí•©&lt;/li&gt;
  &lt;li&gt;Messenger ì„œë¹„ìŠ¤ì˜ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;POST&lt;/code&gt;ì— ë§ì¶° Lambda Function ìˆ˜ì •&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ï¸-aws-lambdaë¡œ-openai-api-í™œìš©í•˜ê¸°&quot;&gt;ğŸ› ï¸ AWS Lambdaë¡œ OpenAI API í™œìš©í•˜ê¸°&lt;/h2&gt;

&lt;p&gt;OpenAIì˜ &lt;a href=&quot;https://platform.openai.com/docs/api-reference/introduction&quot;&gt;API REFERENCE&lt;/a&gt;ë¥¼ í™•ì¸í•˜ë©´ 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Python&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Node.js&lt;/code&gt;ë¥¼ í™œìš©í•œ ì˜ˆì‹œê°€ ìƒì„¸í•˜ê²Œ ë‚˜ì˜µë‹ˆë‹¤.
ì˜ˆì‹œì— ë‚˜ì˜¤ëŠ” ëŒ€ë¡œ í•´ë‹¹ ì½”ë“œë¥¼ Amazon EC2ë¥¼ ëŒ€ì—¬í•˜ì—¬ ìƒì‹œ ìš´ì˜ ì„œë²„ì—ì„œ í™œìš©í•´ë„ ë˜ì§€ë§Œ, ë©”ì‹ ì €ì— ì—°ë™í•˜ì—¬ ì ê¹ë§Œ í™œìš©í•  ì˜ˆì •ì´ë¯€ë¡œ Serverless ì»´í“¨íŒ… ì„œë¹„ìŠ¤ì¸ Lambdaë¥¼ ì‚¬ìš©í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;aws-lambda-layer-ì¶”ê°€í•˜ê¸°&quot;&gt;AWS Lambda Layer ì¶”ê°€í•˜ê¸°&lt;/h3&gt;

&lt;p&gt;Pythonìœ¼ë¡œ OpenAIë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;openai&lt;/code&gt; íŒŒì´ì¬ ë°”ì¸ë”©ì´ í•„ìš”í•©ë‹ˆë‹¤.
ì´ë¥¼ ìœ„í•´ ëŒë‹¤ì—ì„œ ì—¬ëŸ¬ í•¨ìˆ˜ê°€ ê³µìœ í•˜ëŠ” ì½”ë“œ ë° ë°ì´í„°ë¥¼ ì¤‘ì•™ì—ì„œ ê´€ë¦¬í•˜ëŠ” ë°©ì‹ì¸ &lt;strong&gt;Lambda Layers&lt;/strong&gt; ê¸°ëŠ¥ì„ í™œìš©í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì €ëŠ” OpenAI íŒ¨í‚¤ì§€ì— ëŒ€í•œ ì¢…ì†ì„±ì„ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ, &lt;a href=&quot;https://github.com/erenyasarkurt/OpenAI-AWS-Lambda-Layer&quot;&gt;OpenAI-AWS-Lambda-Layer&lt;/a&gt;ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;âš ï¸ í•´ë‹¹ ë ˆí¬ì˜ &lt;a href=&quot;https://github.com/erenyasarkurt/OpenAI-AWS-Lambda-Layer/blob/main/README.md&quot;&gt;README.md&lt;/a&gt;ì— ê¸°ì¬ëœ ëŒ€ë¡œ ì§„í–‰í•˜ë©´ curlë¡œ OpenAIë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ìš°ì„ , AWS Lambda ì½˜ì†”ì˜ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Addtional resources&lt;/code&gt;ì˜ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Layers&lt;/code&gt;ë¥¼ í´ë¦­í•˜ì—¬ ë¹Œë“œ í•œ zip íŒŒì¼ì„ ì—…ë¡œë“œí•˜ê³  í˜¸í™˜ì„±(python3.8, x86_64)ì„ ì²´í¬í•´ ì¤€ ë‹¤ìŒ Layerë¥¼ ìƒì„±í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/lambda/layers.png&quot; alt=&quot;Layers&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;aws-lambda-functions-ë°°í¬&quot;&gt;AWS Lambda Functions ë°°í¬&lt;/h3&gt;

&lt;p&gt;ì´ì–´ì„œ ëŒë‹¤ ì½˜ì†” í™”ë©´ì—ì„œ &lt;strong&gt;Create function&lt;/strong&gt;ìœ¼ë¡œ í•¨ìˆ˜ë¥¼ ìƒì„±í•˜ê³  &lt;strong&gt;Add layer&lt;/strong&gt; ë²„íŠ¼ì„ ëˆŒëŸ¬,
ì‚¬ì „ì— ìƒì„±í•œ layerë¥¼ ì¶”ê°€í•´ ì¤ë‹ˆë‹¤. &lt;em&gt;ì•„ë˜ ì‚¬ì§„ê³¼ ê°™ì´ Layers ì•„ì´ì½˜ì— (1)ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/lambda/code.png&quot; alt=&quot;code&quot; /&gt;&lt;/p&gt;

&lt;p&gt;â¬†ï¸ ì•ì„œ ì–¸ê¸‰í•œ ì˜¤í”ˆì†ŒìŠ¤ íŒŒì´ì¬ ì½”ë“œë¥¼ ë³µì‚¬í•˜ê³  &lt;a href=&quot;https://github.com/erenyasarkurt/OpenAI-AWS-Lambda-Layer/blob/main/lambda_function.py#L27&quot;&gt;27ë¼ì¸&lt;/a&gt;ì— OpenAIë¡œë¶€í„° ë°œê¸‰ë°›ì€ Keyë¡œ ë°”ê¿” ì ê³  &lt;strong&gt;Deploy&lt;/strong&gt; ë²„íŠ¼ì„ ëˆŒëŸ¬ ë°°í¬í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;â¬‡ï¸ ì´ì–´ì„œ &lt;strong&gt;Configuration&lt;/strong&gt;ì—ì„œ Memoryì™€ Timeout ê°’ì„ ìˆ˜ì •í•©ë‹ˆë‹¤.
&lt;em&gt;í†µìƒ 129MB ì •ë„ì˜ ë©”ëª¨ë¦¬ë¥¼ ì‚¬ìš©í•´ 256MBì™€ OpenAPIë¡œë¶€í„° ì‘ë‹µì´ ëŠ¦ì–´ì§ˆ ìˆ˜ ìˆìœ¼ë¯€ë¡œ 1ë¶„ì´ë¼ëŠ” ë„‰ë„‰í•œ ì‹œê°„ì„ ì£¼ì—ˆìŠµë‹ˆë‹¤.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/lambda/config.png&quot; alt=&quot;config&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ë§ˆì§€ë§‰ìœ¼ë¡œ &lt;strong&gt;Configuration&lt;/strong&gt; íƒ­ì˜ &lt;strong&gt;Function URL&lt;/strong&gt;ì—ì„œ URLì„ ìƒì„±í•©ë‹ˆë‹¤.
ì´ë•Œ, &lt;strong&gt;Auth type&lt;/strong&gt;ì€ ë³„ë„ ì¸ì¦ ë¡œì§ì´ ì—†ëŠ” &lt;strong&gt;NONE&lt;/strong&gt;ìœ¼ë¡œ ì„¤ì •í•´ ì£¼ì—ˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;-messengerdoorayì™€-lambda-í†µí•©í•˜ê¸°&quot;&gt;ğŸ”„ Messenger(Dooray)ì™€ Lambda í†µí•©í•˜ê¸°&lt;/h2&gt;

&lt;p&gt;ì €ëŠ” í†µí•©í•  ë©”ì‹ ì €ë¡œ ë‘ë ˆì´ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. ë‘ë ˆì´ì—ì„œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/command&lt;/code&gt; ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì€ ë‹¤ìŒ ë§í¬ë¥¼ ì°¸ê³ í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://helpdesk.dooray.com/share/pages/9wWo-xwiR66BO5LGshgVTg/2900080163559890590&quot;&gt;ë‘ë ˆì´ ì»¤ë§¨ë“œ ì¶”ê°€í•˜ê¸° ê°€ì´ë“œ&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Slackì„ ë¹„ë¡¯í•œ ëŒ€ë¶€ë¶„ì˜ ë©”ì‹ ì €ê°€ ì™¸ë¶€ ì„œë²„ì™€ í†µí•©í•˜ê¸° ìœ„í•´ &lt;strong&gt;RequestUrl&lt;/strong&gt;ì„ ìš”êµ¬í•©ë‹ˆë‹¤.
ì‚¬ì „ì— ìƒì„±í•œ ëŒë‹¤ì˜ &lt;strong&gt;Function URL&lt;/strong&gt;ì„ &lt;strong&gt;RequestUrl&lt;/strong&gt;ì— ê¸°ì¬í•˜ë©´ í†µí•©ì´ ì™„ë£Œë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;messengerdooray-request-í˜•ì‹-íŒŒì•…í•˜ê¸°&quot;&gt;Messenger(Dooray) Request í˜•ì‹ íŒŒì•…í•˜ê¸°&lt;/h3&gt;

&lt;p&gt;ì´ì „ ë‹¨ê³„ì—ì„œ í…ŒìŠ¤íŠ¸ ì—†ì´ ì½”ë“œë¥¼ ë°°í¬í–ˆì§€ë§Œ, ì‚¬ì‹¤ ëŒë‹¤ë¥¼ ì½”ë“œë¥¼ ê°œë°œí•˜ê³  ë‚˜ë©´ Test eventë¥¼ ì£¼ì…í•˜ì—¬ ì‘ì„±í•œ ëŒë‹¤ê°€ ì˜ë„í•œ ëŒ€ë¡œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•´ ë´ì•¼ í•©ë‹ˆë‹¤.
ê·¸ëŸ¬ë‚˜ ì™¸ë¶€ ì„œë¹„ìŠ¤ì™€ ì—°ë™í•˜ì—¬ ì–´ë– í•œ í˜•ì‹ìœ¼ë¡œ Event(json)ê°€ ë‚ ë¼ì˜¤ëŠ”ì§€ ëª¨ë¥´ëŠ” ìƒí™©ì—ì„œëŠ” ëª¨ë‹ˆí„°ë§ì„ í†µí•´ íŒŒì•…í•´ì•¼ í•©ë‹ˆë‹¤.
ì´ë²¤íŠ¸ë¥¼ 1íšŒ ë°œìƒì‹œí‚¤ê³  &lt;strong&gt;CloudWatch Log groups&lt;/strong&gt;ì—ì„œ Eventë¥¼ í™•ì¸í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/lambda/lambda_cw.png&quot; alt=&quot;lambda_cw&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ë‘ë ˆì´ ìœ ì €ê°€ ìƒì„±í•œ commandëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;text&lt;/code&gt;ë¼ëŠ” í•„ë“œì— ë‹´ê¸°ê³  ì´ëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;body&lt;/code&gt;ë¡œ ê°ì‹¸ì ¸ ì „ë‹¬ë©ë‹ˆë‹¤.
Eventê°€ ì–´ë–¤ í˜•ì‹ìœ¼ë¡œ ì „ë‹¬ë˜ëŠ”ì§€ ì•Œê²Œ ë˜ì—ˆìœ¼ë‹ˆ, ì˜¤í”ˆì†ŒìŠ¤ë¥¼ í•´ë‹¹ í˜•ì‹ì— ë§ê²Œ ìˆ˜ì •í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;body&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loads&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'body'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;prompt&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'text'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ê¸°ì¡´ ì‘ì„±ëœ ì½”ë“œë¥¼ ë‘ë ˆì´ í˜•ì‹ì— ë§ì¶° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;text&lt;/code&gt;ë¡œ ë°”ê¿”ì£¼ë‹ˆ ì•„ë˜ì™€ ê°™ì´ êµ¬í˜„ëœ ëª¨ìŠµì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/etc/mybot.png&quot; alt=&quot;mybot&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;outro&quot;&gt;Outro&lt;/h2&gt;

&lt;p&gt;ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œ OpenAI APIë¥¼ ì‚¬ìš©í•¨ì— ìˆì–´ ë‘ë ˆì´ë¼ëŠ” ë©”ì‹ ì €ì™€ ëŒë‹¤ë¥¼ í†µí•©í•˜ëŠ” ë¶€ë¶„ì„ ë‹¤ë¤˜ìŠµë‹ˆë‹¤.
í•˜ì§€ë§Œ Lambdaì™€ ì™¸ë¶€ ì„œë¹„ìŠ¤ê°€ ì–´ë–»ê²Œ ì—°ë™ë˜ëŠ”ì§€ ì›ë¦¬ë¥¼ ì•Œë©´ ì–´ë–¤ ì„œë¹„ìŠ¤ë˜ì§€ ì—°ë™ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì´ ë°–ì— í˜„ì¬ ì½”ë“œëŠ” PoC ìˆ˜ì¤€ì˜ ì½”ë“œë¼ ë¶€ì¡±í•œ ì ì´ ë§ìŠµë‹ˆë‹¤.
API Keyë¥¼ ê·¸ëŒ€ë¡œ ê¸°ì¬í•˜ë©´ &lt;strong&gt;ë³´ì•ˆ ì´ìŠˆ&lt;/strong&gt;ê°€ ìˆìœ¼ë¯€ë¡œ, AWS Secrets Managerë¥¼ í™œìš©í•œ ë³„ë„ì˜ í™˜ê²½ ë³€ìˆ˜ ì²˜ë¦¬ê°€ í•„ìš”í•©ë‹ˆë‹¤.
ë˜í•œ ì™¸ë¶€ ì„œë¹„ìŠ¤ì—ì„œ Function URLì„ í˜¸ì¶œí•  ë•Œë„, ì¸ì¦ ì‘ì—…ì„ ì¶”ê°€í•´ ì¤˜ì•¼ í•©ë‹ˆë‹¤.
ì¶”í›„ ChatGPT ìœ ë£Œ ë²„ì „ì´ ë‚˜ì˜¤ë©´ ê²°ì œí•˜ì—¬ ì‚¬ìš©í•œ í›„ê¸°ë¥¼ ì ê¸° ì•½ì†í•˜ë©° ê¸€ì„ ë§ˆì¹˜ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì†Œì¤‘í•œ ì‹œê°„ì„ ë‚´ì–´ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ì˜ëª»ëœ ë‚´ìš©ì€ ì§€ì í•´ ì£¼ì„¸ìš”! ğŸ˜ƒ&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;</content>

      
      
      
      
      

      <author>
          <name>Heuristic Wave</name>
        
        
      </author>

      

      
        <category term="aws" />
      
        <category term="serverless" />
      

      
        <summary type="html">AWS Lambda, OpenAI APIë¥¼ í™œìš©í•œ ê°œì¸ AI ë´‡ ë§Œë“¤ê¸°</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">DIY Amazon EKS with eksctl</title>
      <link href="https://heuristicwave.github.io/eksctl_ppt" rel="alternate" type="text/html" title="DIY Amazon EKS with eksctl" />
      <published>2023-01-19T19:00:00+00:00</published>
      <updated>2023-01-19T19:00:00+00:00</updated>
      <id>https://heuristicwave.github.io/eksctl_ppt</id>
      <content type="html" xml:base="https://heuristicwave.github.io/eksctl_ppt">&lt;p&gt;&lt;a href=&quot;https://www.meetup.com/awskrug/events/290666942/&quot;&gt;AWSKRUG ì»¨í…Œì´ë„ˆ ì†Œëª¨ì„ğŸ³ - 1ì›” 19ì¼(ëª©)&lt;/a&gt; ë°œí‘œ ìë£Œ&lt;/p&gt;

&lt;h2 id=&quot;intro&quot;&gt;Intro&lt;/h2&gt;

&lt;p&gt;eksctlì„ í˜„ì—…ì—ì„œ ì ìš©í•˜ê¸° ìœ„í•´ í•„ìˆ˜ì ìœ¼ë¡œ í•„ìš”í•œ ìµœì†Œí•œì˜ ìš”ì†Œë“¤ì„ ë‹¤ë£¹ë‹ˆë‹¤.&lt;/p&gt;

&lt;iframe src=&quot;https://www.slideshare.net/slideshow/embed_code/key/KnHQ8gpSIFKpbE?hostedIn=slideshare&amp;amp;page=upload&quot; width=&quot;840&quot; height=&quot;523&quot; frameborder=&quot;0&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; scrolling=&quot;no&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;ğŸ’¡ SlideShare ë§í¬ë¥¼ í†µí•´ ë‹¤ìš´ë¡œë“œ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;h2 id=&quot;outro&quot;&gt;Outro&lt;/h2&gt;

&lt;p&gt;AWSKRUGì—ì„œëŠ” ì²« ë°œí‘œì˜€ëŠ”ë°, ë¶€ì¡±í•œ ë°œí‘œì„ì—ë„ 19ì¼ ë‹¹ì¼ ì†Œì¤‘í•œ ì‹œê°„ì„ ë‚´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤. 
ì¶”í›„, í•´ë‹¹ ì¥í‘œë“¤ì„ ì„¤ëª…í•˜ëŠ” ë¸”ë¡œê·¸ í¬ìŠ¤íŒ…ì„ í•¨ê»˜ ê°œì œí•  ì˜ˆì •ì…ë‹ˆë‹¤.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;span class=&quot;table-of-contents-list&quot;&gt;EKSCTL Tips&lt;/span&gt;&lt;/p&gt;
&lt;ul class=&quot;table-of-contents-list&quot;&gt;
    &lt;li&gt;&lt;a href=&quot;./eksctl_ppt&quot;&gt;DIY Amazon EKS with eksctl (Deck)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;</content>

      
      
      
      
      

      <author>
          <name>Heuristic Wave</name>
        
        
      </author>

      

      
        <category term="devops" />
      
        <category term="eks" />
      
        <category term="aws" />
      

      
        <summary type="html">AWSKRUG ì»¨í…Œì´ë„ˆ ì†Œëª¨ì„ğŸ³ - 1ì›” 19ì¼(ëª©) ë°œí‘œ ìë£Œ</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">ECS on EC2 Walkthrough</title>
      <link href="https://heuristicwave.github.io/ECS_Walkthrough" rel="alternate" type="text/html" title="ECS on EC2 Walkthrough" />
      <published>2022-07-03T00:00:00+00:00</published>
      <updated>2022-07-03T00:00:00+00:00</updated>
      <id>https://heuristicwave.github.io/ECS_Walkthrough</id>
      <content type="html" xml:base="https://heuristicwave.github.io/ECS_Walkthrough">&lt;p&gt;EC2 ê¸°ë°˜ì˜ ECSë¥¼ ë‹¤ë£¨ê¸° ìœ„í•œ ì‚¬ì†Œí•œ ì§€ì‹ë“¤ í†±ì•„ë³´ê¸°!&lt;/p&gt;

&lt;h1 id=&quot;intro&quot;&gt;Intro&lt;/h1&gt;

&lt;p&gt;ë‹¹ì¥ Amazon Elastic Container Service(ì´í•˜ ECS)ë¥¼ ìš´ì˜í•´ì•¼ í•˜ì§€ë§Œ, ê³µì‹ ë¬¸ì„œë¥¼ ë‹¤ ì½ê¸°ì—ëŠ” ë²…ì°¨ê³  ì¤‘ìš”í•œ ìš´ì˜ í¬ì¸íŠ¸ë“¤ì„ ë¹ ë¥´ê²Œ í•™ìŠµí•˜ê¸° ìœ„í•´ ì•„ë˜ì™€ ê°™ì€ ìš”ì†Œë“¤ì„ ë‹¤ë£¹ë‹ˆë‹¤.
&lt;em&gt;ECS ë§ˆìŠ¤í„°&lt;/em&gt;ê°€ ë  ìˆ˜ ìˆëŠ” ëª¨ë“  ê²ƒì„ ë‹¤ë£¨ëŠ” ê²ƒì€ ì•„ë‹ˆì§€ë§Œ, ìµœì†Œí•œì˜ ê³ ë¯¼í•´ ë³¼ ë§Œí•œ ì§€ì ë“¤ì„ ë‹¤ë¤„ë³´ì•˜ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Amazon ECS Container Agent&lt;/li&gt;
  &lt;li&gt;ECS ë¦¬ì†ŒìŠ¤ í• ë‹¹&lt;/li&gt;
  &lt;li&gt;ECS Scaling&lt;/li&gt;
  &lt;li&gt;ECS ì„œë¹„ìŠ¤ êµ¬ì„±&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;-ecs-container-agent&quot;&gt;ğŸ•‹ ECS Container Agent&lt;/h2&gt;

&lt;p&gt;EC2 ê¸°ë°˜ì˜ ECSë¥¼ ìš´ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” &lt;a href=&quot;https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-optimized_AMI.html&quot;&gt;ECS ìµœì í™” AMI&lt;/a&gt;ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
ì¼ë°˜ EC2 ì¸ìŠ¤í„´ìŠ¤ë¡œë„ ECSë¥¼ ìš´ìš©í•  ìˆ˜ ìˆì§€ë§Œ, ECS ìµœì í™” AMIë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê´€ë¦¬ì™€ ìš´ìš© ì¸¡ë©´ì—ì„œ ìœ ë¦¬í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ì˜ˆë¥¼ ë“¤ì–´ Dockerë¥¼ ìš´ì˜í•˜ë‹¤ ë³´ë©´, ë¯¸ì‚¬ìš© ìƒíƒœì¸ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ê°€ ìŒ“ì—¬ë‚˜ê°€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;prune&lt;/code&gt; ëª…ë ¹ì–´ë¥¼ í†µí•´ ì´ë¯¸ì§€ë¥¼ ì •ë¦¬í•´ ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.
ì´ëŸ° ìƒí™©ì—ì„œ ì»¨í…Œì´ë„ˆ ì—ì´ì „íŠ¸ëŠ” ë‹¤ì–‘í•œ &lt;a href=&quot;https://docs.aws.amazon.com/AmazonECS/latest/developerguide/automated_image_cleanup.html#automated_image_cleanup_parameters&quot;&gt;ìë™í™”ëœ ì´ë¯¸ì§€ ì •ë¦¬&lt;/a&gt; ì˜µì…˜ì„ ì œê³µí•©ë‹ˆë‹¤.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ECS-optimized AMIì—ëŠ” &lt;a href=&quot;https://github.com/aws/amazon-ecs-agent&quot;&gt;Amazon ECS Container Agent&lt;/a&gt;ê°€ ê¸°ë³¸ì ìœ¼ë¡œ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
ECS ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë¶€íŠ¸ìŠ¤íŠ¸ë© í•˜ëŠ” ë‹¨ê³„ì—ì„œ EC2ì˜ user dataë¥¼ ì‚¬ìš©í•´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/ecs/ecs.config&lt;/code&gt;ì— configuration parametersì„ ì „ë‹¬í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì•„ë˜ì™€ ê°™ì´ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì§€ì •í•˜ì§€ ì•Šì•„ë„ default ê°’ì´ ì§€ì •ë˜ì–´ ìˆì–´ ìš´ìš©ìƒì˜ í° ë¬¸ì œëŠ” ì—†ì§€ë§Œ,
&lt;a href=&quot;https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-agent-config.html&quot;&gt;ê³µì‹ ë¬¸ì„œ&lt;/a&gt;ë¥¼ í™•ì¸í•´ í•„ìš”í•œ configuration ë“¤ì„ íŒŒì•…í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#!/bin/bash&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;EOF&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;' &amp;gt;&amp;gt; /etc/ecs/ecs.config
ECS_CLUSTER=MyCluster
ECS_LOGLEVEL=debug
&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;EOF
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ë‹¤ì–‘í•œ configuration ì¤‘, ìš´ì˜ í™˜ê²½(GPU, SPOT, ì„œë¹„ìŠ¤ ë“±)ì— ë”°ë¼ í•„ìš”í•œ Configuration ê°’ë“¤ì´ ë‹¤ë¥´ê² ì§€ë§Œ ì¼ë°˜ì ìœ¼ë¡œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ECS_RESERVED_MEMORY&lt;/code&gt;ëŠ” ê³ ë ¤í•˜ì—¬ ì§€ì •í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ğŸ’¡ ì¸ìŠ¤í„´ìŠ¤ì˜ ëª¨ë“  ë©”ëª¨ë¦¬ë¥¼ í…ŒìŠ¤í¬ì— ë°°ì •í•œë‹¤ë©´, í…ŒìŠ¤í¬ì™€ ì¤‘ìš”í•œ ì‹œìŠ¤í…œ í”„ë¡œì„¸ìŠ¤ ì‚¬ì´ì—ì„œ ë©”ëª¨ë¦¬ ê²½í•©ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì´ë¥¼ ì˜ˆë°©í•˜ê¸° ìœ„í•´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ECS_RESERVED_MEMORY&lt;/code&gt; configurationì„ ì‚¬ìš©í•´ ë©”ëª¨ë¦¬ë¥¼ ì˜ˆì•½í•¨ìœ¼ë¡œì¨ í’€ì—ì„œ í• ë‹¹ ê°€ëŠ¥í•œ ë©”ëª¨ë¦¬ë¥¼ ì œì™¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
í•„ìš”ë¡œ í•˜ëŠ” ìµœì†Œí•œì˜ ìš”êµ¬ ë©”ëª¨ë¦¬ê°€ ì •ì˜ë˜ì–´ ìˆì§€ëŠ” ì•Šì§€ë§Œ, ì €ëŠ” ë¬¸ì„œì˜ ì˜ˆì‹œì²˜ëŸ¼ 256MiBë¡œ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;-ecs-resource&quot;&gt;ğŸ› ECS Resource&lt;/h2&gt;

&lt;p&gt;ECSëŠ” 3ê°€ì§€ ë²”ì£¼ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ğŸ¥‡ &lt;strong&gt;Container instance&lt;/strong&gt; : ECS í´ëŸ¬ìŠ¤í„°ë¥¼ ì´ë£¨ê³  ìˆëŠ” EC2 ì¸ìŠ¤í„´ìŠ¤ì˜ ìœ í˜• &lt;br /&gt;
ğŸ¥ˆ &lt;strong&gt;Task Size&lt;/strong&gt; : Task Definitionsì„ í†µí•´ ì •ì˜í•˜ëŠ” Size &lt;br /&gt;
ğŸ¥‰ &lt;strong&gt;Container Size&lt;/strong&gt; : Task Definitionsì˜ Container ì •ì˜ ë¶€ë¶„ì—ì„œ ì •ì˜í•˜ëŠ” Size &lt;br /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ğŸ’¡ ECS on EC2ì—ì„œëŠ” Task Sizeì™€ Container Size ë°©ì‹ ì¤‘ ì„ íƒ ê°€ëŠ¥í•˜ì§€ë§Œ, Fargate ë°©ì‹ì—ì„œ Task SizeëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;container-definitions&quot;&gt;Container definitions&lt;/h3&gt;

&lt;p&gt;Container Sizeì˜ ë¦¬ì†ŒìŠ¤ í• ë‹¹ íŒŒë¼ë¯¸í„°ëŠ” ê°ê° ë‹¤ìŒê³¼ ê°™ì€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;docker run&lt;/code&gt; ëª…ë ¹ì–´ ì˜µì…˜ì— ë§¤í•‘ë©ë‹ˆë‹¤. &lt;br /&gt;
&lt;strong&gt;cpu&lt;/strong&gt; : &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--cpu-shares&lt;/code&gt;, &lt;strong&gt;memory&lt;/strong&gt; : &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--memory&lt;/code&gt;(hard) / &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--memory-reservation&lt;/code&gt;(soft)&lt;/p&gt;

&lt;p&gt;&lt;em&gt;CPU : Unit ë‹¨ìœ„ (1,024ê°œì˜ CPU ìœ ë‹›ì€ vCPU 1ê°œ), Memory : Hard/Soft Limits&lt;/em&gt; &lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Hard ğŸ†š Soft&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Hard : ëª…ì‹œí•œ ê°’ë§Œí¼ ë¦¬ì†ŒìŠ¤ ì œì•½ì´ ìƒê¹ë‹ˆë‹¤. ë•Œë¬¸ì— í´ëŸ¬ìŠ¤í„° ì¸ìŠ¤í„´ìŠ¤ì—ì„œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;docker stats&lt;/code&gt; ëª…ë ¹ì–´ë¥¼ ì¡°íšŒí•˜ë©´ LIMIT ê°’ì´ &lt;strong&gt;Hardë¡œ ëª…ì‹œí•œ ê°’&lt;/strong&gt;ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤.&lt;/li&gt;
  &lt;li&gt;Soft : ëª…ì‹œí•œ ê°’ì´ í´ëŸ¬ìŠ¤í„° ì¸ìŠ¤í„´ìŠ¤ì— ì˜ˆì•½ë©ë‹ˆë‹¤. Soft limitì´ë¯€ë¡œ ì»¨í…Œì´ë„ˆ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ëª…ì‹œí•œ ê°’ì˜ ì œí•œì„ ë„˜ê²¨ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.
Hardì™€ ë‹¬ë¦¬, í´ëŸ¬ìŠ¤í„° ì¸ìŠ¤í„´ìŠ¤ì—ì„œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;docker stats&lt;/code&gt; ëª…ë ¹ì–´ë¥¼ ì¡°íšŒí•˜ë©´ LIMIT ê°’ì´ &lt;strong&gt;í´ëŸ¬ìŠ¤í„° ì¸ìŠ¤í„´ìŠ¤ì˜ ì´ ìì›&lt;/strong&gt;ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ğŸ¥‡ë¡œ ê°ˆìˆ˜ë¡ ë” ìƒìœ„ ê°œë…ì´ë©°, Task Definitionsì—ì„œëŠ” ğŸ¥ˆ, ğŸ¥‰ì„ í™œìš©í•´ ë¦¬ì†ŒìŠ¤ë¥¼ ì œì–´í•©ë‹ˆë‹¤.
ì„¸ë°€í•œ ì œì–´ë¥¼ í•˜ê³  ì‹¶ë‹¤ë©´ ğŸ¥ˆ, ğŸ¥‰ì„ ëª¨ë‘ ì‚¬ìš©í•˜ì—¬ ì œì–´í•  ìˆ˜ ìˆìœ¼ë‚˜,
ğŸ¥‰ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” íŠ¹ë³„í•œ ì´ìœ ê°€ ì—†ë‹¤ë©´ ğŸ¥ˆë§Œì„ ì‚¬ìš©í•´ ë¦¬ì†ŒìŠ¤ë¥¼ ì œì–´í•˜ëŠ” ê²ƒì´ ìš©ì´í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;actual-available-memory&quot;&gt;Actual available memory&lt;/h3&gt;

&lt;p&gt;16GiBì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í”„ë¡œë¹„ì €ë‹í•´ë„ &lt;strong&gt;ì‹¤ì œ ì‚¬ìš© ê°€ëŠ¥í•œ ë©”ëª¨ë¦¬(15318 MiB)&lt;/strong&gt;ëŠ” ë” ì ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Amazon EC2&lt;/th&gt;
      &lt;th&gt;ì¸ìŠ¤í„´ìŠ¤&lt;/th&gt;
      &lt;th&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;free -m&lt;/code&gt;&lt;/th&gt;
      &lt;th&gt;Registered&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;c5.2xlarge&lt;/td&gt;
      &lt;td&gt;16384 MiB&lt;/td&gt;
      &lt;td&gt;15574 MiB&lt;/td&gt;
      &lt;td&gt;15318 MiB&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;EC2 ì¸ìŠ¤í„´ìŠ¤ì™€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;free -m&lt;/code&gt; ëª…ë ¹ì–´ë¡œ í™•ì¸í•œ ì°¨ì´&lt;/p&gt;

&lt;p&gt;&lt;em&gt;ECS í”Œë«í¼ ë©”ëª¨ë¦¬ ì˜¤ë²„í—¤ë“œì™€ OS ì»¤ë„ì´ ì°¨ì§€í•˜ëŠ” ë©”ëª¨ë¦¬ë¡œ ì¸í•´ ì°¨ì´ê°€ ë°œìƒí•©ë‹ˆë‹¤.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;free -m&lt;/code&gt; ëª…ë ¹ì–´ë¡œ í™•ì¸í•œ ë©”ëª¨ë¦¬ì™€ ì»¨í…Œì´ë„ˆ ì¸ìŠ¤í„´ìŠ¤(registered)ì˜ ì°¨ì´&lt;/p&gt;

&lt;p&gt;&lt;em&gt;ì»¨í…Œì´ë„ˆ ì—ì´ì „íŠ¸ë¥¼ ì„¤ì •í•  ë•Œ, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ECS_RESERVED_MEMORY=256&lt;/code&gt;ìœ¼ë¡œ ì„¤ì •í•œ ë§Œí¼ ì°¨ì´ê°€ ë°œìƒí•©ë‹ˆë‹¤.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;-ecs-scaling&quot;&gt;ğŸ˜ ECS Scaling&lt;/h2&gt;

&lt;p&gt;ECSì˜ Scaling ë°©ë²•ì€ 2ê°€ì§€ë¡œ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•´ë‹¹ ìŠ¤ì¼€ì¼ë§ ê¸°ë²•ì€ ì„ íƒ ì‚¬í•­ì´ ì•„ë‹ˆë¼, 2ê°€ì§€ ëª¨ë‘ë¥¼ ê³ ë ¤í•´ ì ìš©í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Serviceì— ì˜í•˜ì—¬ Taskê°€ Scaling ë˜ëŠ” Horizontal Autoscaling&lt;/li&gt;
  &lt;li&gt;CapacityProviderì— ì˜í•˜ì—¬ ì»¨í…Œì´ë„ˆ ì¸ìŠ¤í„´ìŠ¤ê°€ Scaling ë˜ëŠ” Cluster Autoscaling&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;service-auto-scaling&quot;&gt;Service auto scaling&lt;/h3&gt;

&lt;p&gt;ì„œë¹„ìŠ¤ ìŠ¤ì¼€ì¼ë§ì€ ë˜ë‹¤ì‹œ &lt;a href=&quot;https://docs.aws.amazon.com/AmazonECS/latest/userguide/service-autoscaling-targettracking.html&quot;&gt;Target tracking&lt;/a&gt;ê³¼ &lt;a href=&quot;https://docs.aws.amazon.com/AmazonECS/latest/userguide/service-autoscaling-stepscaling.html&quot;&gt;Step&lt;/a&gt; scalingìœ¼ë¡œ ë‚˜ë‰©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;Target trackingì€ &lt;strong&gt;CPU/Memory ì‚¬ìš©ë¥ &lt;/strong&gt; ë° &lt;strong&gt;ALB ìš”ì²­ íšŸìˆ˜&lt;/strong&gt;ë¥¼ ê¸°ë°˜ì˜ ì •ì±…ì´ ìˆìœ¼ë©°, Step ë°©ì‹ì€ &lt;strong&gt;Alarmì„ í™œìš©í•œ Custom&lt;/strong&gt; ì •ì±…ë“¤ì„ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ğŸ’¡ Step scaling policiesì˜ ë¬¸ì„œ ì²« ë¬¸ì¥ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. &lt;br /&gt;
Although Amazon ECS service auto scaling supports using Application Auto Scaling step scaling policies, we recommend using target tracking scaling policies instead. &lt;br /&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Step scalingì€ ì¡°ê¸ˆ ë” ê³µê²©ì ì¸ ì •ì±…ì´ í•„ìš”í•  ë•Œ ëŒ€ì•ˆìœ¼ë¡œ ì‚¬ìš©í•˜ê³ , Service auto scalingì€ ë³µìˆ˜ì˜ ì¡°ì • ì •ì±…ì„ ë™ì‹œì— í™œìš©í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ í•˜ë‚˜ì˜ ì •ì±…ì— ì˜ì¡´í•˜ê¸°ë³´ë‹¤ëŠ” ë³µìˆ˜ì˜ ì •ì±…ì„ ì‚¬ìš©í•´ ë³´ë‹¤ ì„¸ë°€í•œ Scaling ì •ì±…ì„ ë§Œë“œëŠ” ê²Œ ì–´ë–¨ê¹Œìš”? ğŸ§&lt;/p&gt;

&lt;h3 id=&quot;cluster-auto-scaling&quot;&gt;Cluster auto scaling&lt;/h3&gt;

&lt;p&gt;Service auto scalingì— ì»¨í…Œì´ë„ˆ ì¸ìŠ¤í„´ìŠ¤ ë‚´ ìì›ì„ ë‹¤ í• ë‹¹í–ˆì„ ê²½ìš°, CapacityProvider EC2 Auto Scalingì„ í™œìš©í•´ í´ëŸ¬ìŠ¤í„° ìì›ì„ í™•ë³´í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://aws.amazon.com/blogs/containers/deep-dive-on-amazon-ecs-cluster-auto-scaling/&quot;&gt;AWS ë¸”ë¡œê·¸&lt;/a&gt;ì— ìì„¸í•œ ì‘ë™ì›ë¦¬ê°€ ë‚˜ì˜¤ë¯€ë¡œ ê¼­ í•œë²ˆ ì½ì–´ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤.
í•´ë‹¹ ë‚´ìš©ì„ ìš”ì•½í•˜ìë©´ &lt;strong&gt;Capacity Provider&lt;/strong&gt;ë¥¼ Cluster ì¸í”„ë¼ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.
ì´ë¥¼ ìœ„í•´ &lt;strong&gt;CapacityProviderReservation ì§€í‘œ&lt;/strong&gt;ê°€ ì¡´ì¬í•˜ê³  ì‚¬ì „ì— ì„¤ì •í•œ &lt;strong&gt;Target capacity %&lt;/strong&gt;(1~100ì‚¬ì´ì˜ ê°’)ì— ë§ì¶° EC2 AutoScalingGroup(ASG)ì— Triggerê°€ ì‘ë™í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CapacityProviderReservation(%) = M(í˜„ì¬ ì¸ìŠ¤í„´ìŠ¤+ì¶”ê°€ ìš”ì²­ ì¸ìŠ¤í„´ìŠ¤)/N(í˜„ì¬ ì¸ìŠ¤í„´ìŠ¤) * 100(%)&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;ë§Œì•½ Target capacityì„ 100ìœ¼ë¡œ ì§€ì •í–ˆì„ ë•Œ, í˜„ì¬ Clusterì˜ Node ê°œìˆ˜ê°€ 3ì´ê³  CapacityProviderReservationê°€ 200ì´ë¼ë©´
CapacityProviderReservationë¥¼ ëª©í‘œì¹˜(Target capacity)ì¸ 100ì— ë§ì¶”ê¸° ìœ„í•´ 3ê°œì˜ EC2ë¥¼ Scale-out ì‹œí‚µë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;âš ï¸ To create an empty Auto Scaling group, set the desired count to zero. &lt;br /&gt; 
Capacity ProviderëŠ” &lt;strong&gt;Desired&lt;/strong&gt; ê°’ì´ &lt;strong&gt;0&lt;/strong&gt;ì¸ ASGì™€ ì—°ê²°ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ë˜í•œ CapacityProviderì— ì˜í•˜ì—¬ ê´€ë¦¬í˜• ì¡°ì •ì„ enable í•œ ìƒíƒœì—ì„œ,
ASGë¥¼ &lt;strong&gt;ìˆ˜ë™&lt;/strong&gt;ìœ¼ë¡œ ìˆ˜ì •í•œë‹¤ë©´ CapacityProviderReservation ê³„ì‚°ì— ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆìœ¼ë¯€ë¡œ &lt;strong&gt;ì§€ì–‘&lt;/strong&gt;í•´ì•¼ í•©ë‹ˆë‹¤. 
&lt;br /&gt;&lt;br /&gt;
ğŸš«ï¸ DO NOT EDIT OR DELETE &lt;br /&gt;
í•´ë‹¹ ë©”ì‹œì§€ëŠ” Service &amp;amp; Cluster Scalingì´ CloudWatchì— ìë™ìœ¼ë¡œ ìƒì„±í•œ TargetTrackingì˜ ì£¼ì„ ë‚´ìš©ì…ë‹ˆë‹¤.
ê´€ë¦¬í˜• ì •ì±…ì˜ ê¸°ëŠ¥ì„ í™œìš© ì‹œ, ì¡°ê¸ˆ ë” ì„¸ë°€í•œ Scaling í•„ìš”í•˜ë‹¤ë©´ ì•ŒëŒ Triggerì˜ ë¹ˆë„ê°€ ì•„ë‹Œ ë‹¤ë¥¸ ë°©ì•ˆì„ ê³ ë¯¼í•˜ë„ë¡ í•©ë‹ˆë‹¤!&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;-ecs-service-configuration&quot;&gt;ğŸ§® ECS Service Configuration&lt;/h2&gt;

&lt;h3 id=&quot;deployment-configuration&quot;&gt;Deployment Configuration&lt;/h3&gt;

&lt;p&gt;ECS ì„œë¹„ìŠ¤ì—ì„œ &lt;a href=&quot;https://docs.aws.amazon.com/AmazonECS/latest/APIReference/API_DeploymentConfiguration.html&quot;&gt;ë°°í¬ì™€ ê´€ë ¨ëœ ì„¤ì •&lt;/a&gt;ì„ ë³´ë©´, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;maximumPercent&lt;/code&gt;ì™€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;minimumHealthyPercent&lt;/code&gt;ê°€ ìˆìŠµë‹ˆë‹¤.
ë¹„ìŠ·í•˜ë©´ì„œë„ í—·ê°ˆë¦¬ê¸° ì‰¬ìš´ 2ê°œì˜ ì„¤ì •ê°’ ê°œë…ì€ ì†ì— ì¡íë“¯í•˜ë©´ì„œë„ ì‰½ê²Œ ì¡íˆì§€ ì•ŠëŠ” ê²ƒ ê°™ì•„, ì˜ˆì‹œ ìƒí™©ì„ ì ì–´ë³´ì•˜ìŠµë‹ˆë‹¤.ğŸ˜‚&lt;/p&gt;

&lt;p&gt;&lt;em&gt;í•´ë‹¹ ê°œë…ì´ ì¡°ê¸ˆ ë” ì™€ë‹¿ì„ ìˆ˜ ìˆë„ë¡, ê³µì‹ ë¬¸ì„œë¥¼ ì½ì–´ë³´ì‹œê³  ì•„ë˜ ìƒí™©ì´ ì–´ë–¨ì§€ ì˜ˆìƒí•´ ë³´ì„¸ìš”!&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;ğŸ§‘ğŸ»â€ğŸ’»ëŠ” ECS &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;maximumPercent&lt;/code&gt;ê°€ 200%, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;minimumHealthyPercent&lt;/code&gt;ê°€ 100%ë¡œ ì„¤ì •ë˜ì–´ ìˆìœ¼ë©°, Rolling update ë°©ì‹ì„ ì‚¬ìš©í•˜ê³  ìˆë‹¤.
í˜„ì¬ ver01ì„ ìš´ì˜í•˜ëŠ” ğŸ§‘ğŸ»â€ğŸ’»ëŠ” ì‹¤ìˆ˜ë¡œ ì˜¤ë¥˜ë¥¼ í¬í•¨í•œ ver02ë¥¼ ë°°í¬í–ˆë‹¤. ê¸°ì¡´ Task 4ê°œì¼ ë•Œ, ì–´ë–¤ ìƒí™©ì´ ë²Œì–´ì§€ëŠ”ê°€?&lt;/p&gt;

&lt;details&gt;
  &lt;summary&gt;ğŸ– ì •ë‹µ ë³´ê¸°&lt;/summary&gt;

  &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;minimumHealthyPercent&lt;/code&gt;ê°€ 100%ì´ê¸° ë•Œë¬¸ì— ver02ì— í”„ë¡œë¹„ì €ë‹ë˜ê³  ì •ìƒ ìƒíƒœë¡œ í™•ì¸ë  ë•Œê¹Œì§€ ver01ì€ ì¤‘ë‹¨ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
ver02ëŠ” &lt;strong&gt;running&lt;/strong&gt; ìƒíƒœë¡œ ì§„ì…í•˜ì§€ ëª»í•´ &lt;strong&gt;provisioning-pending-stopped&lt;/strong&gt; ë‹¨ê³„ë¥¼ ë°˜ë³µí•©ë‹ˆë‹¤.
ì´ë•Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;maximumPercent&lt;/code&gt;ê°€ 200%ì„ì— ë”°ë¼ ver02 TaskëŠ” 4ê°œì™€ ver01 Task 4ê°œ(í•©, ìµœëŒ€ 8ê°œ)ì˜ Taskê°€ ë™ì‹œì— ì˜¬ë¼ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;/details&gt;

&lt;h3 id=&quot;task-placement&quot;&gt;Task Placement&lt;/h3&gt;

&lt;p&gt;ECSì˜ ì„œë¹„ìŠ¤ê°€ ì»¨í…Œì´ë„ˆ ì¸ìŠ¤í„´ìŠ¤ì— Taskë¥¼ ë°°ì¹˜í•˜ëŠ” ì „ëµì€ ì•„ë˜ì™€ ê°™ì´ 3ê°€ì§€ ë¶„ë¥˜ë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;binpack&lt;/code&gt;: CPU ë˜ëŠ” ë©”ëª¨ë¦¬ë¥¼ ìµœì†Œí™”í•˜ê¸° ìœ„í•´ ìœ íœ´ ìì›ì„ ê³ ë ¤í•œ ë°°ì¹˜&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;random&lt;/code&gt; : ë¬´ì‘ìœ„ ë°°ì¹˜&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;spread&lt;/code&gt; : ami-id, availability-zone, instance-type, os-type ë“±ì„ ê³ ë ¤í•œ ë°°ì¹˜&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ìœ„ 3ê°€ì§€ ì „ëµì€ ë‹¨ë… í˜¹ì€ ë³µìˆ˜ë¡œ ì„ íƒë˜ì–´ ì‚¬ìš©ë  ìˆ˜ ìˆìœ¼ë©°, ê°€ìš©ì„±ì„ í™•ë³´í•˜ê¸° ìœ„í•´ AZë¥¼ ê³ ë ¤í•˜ì—¬ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;AZ + binpack&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;AZ + spread&lt;/code&gt;ì™€ ê°™ì´ ì‚¬ìš©ë˜ê¸°ë„ í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ê³µë¶€í•´ ë³´ì‹  ë¶„ì´ë¼ë©´, í•´ë‹¹ ì „ëµì€ ë§ˆì¹˜ k8sì˜ nodeSelectorì™€ ë¹„ìŠ·í•˜ê²Œ ë™ì‘í•©ë‹ˆë‹¤.&lt;/em&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ğŸ”Š CapacityProviderReservationì— ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ë°°í¬ ì„¤ì •ê³¼ ë°°ì¹˜ ì „ëµ &lt;br /&gt;
ECS ì„œë¹„ìŠ¤ ì„¤ì •ì—ì„œ ì–¸ê¸‰í•œ ë°°í¬ ì„¤ì •ê³¼ ë°°ì¹˜ ì „ëµì€ ê°€ìš©ì„± ë¬¸ì œì™€ ì§ê²°ë˜ê³  ì´ëŠ” ë¹„ìš© ë¬¸ì œë¡œë„ ì´ì–´ì§‘ë‹ˆë‹¤.
ì•ì„œ ì–¸ê¸‰ í•œ CapacityProviderReservation ê³„ì‚°ì— í™œìš©ë˜ëŠ” M ê°’ì— ë°°í¬ ì„¤ì •ê³¼ ë°°ì¹˜ ì „ëµì´ ì˜í–¥ì„ ë¯¸ì¹œë‹¤ëŠ” ì ì„ ìœ ì˜í•˜ì„¸ìš”!&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;outro&quot;&gt;Outro&lt;/h2&gt;

&lt;p&gt;ì´ë²ˆ í¬ìŠ¤íŒ…ì„ í†µí•´ ECSì™€ ê´€ë ¨ëœ ë‚´ìš©ì„ ì •ë¦¬í•˜ë‹¤ ë³´ë‹ˆ, AWS ë‚´ì˜ ë‹¤ë¥¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ì„œë¹„ìŠ¤ì¸ EKSì˜ ìš´ìš© ì „ëµê³¼ ë¬´ì²™ì´ë‚˜ ë¹„ìŠ·í•˜ë‹¤ëŠ” ëŠë‚Œì„ ì§€ìš¸ ìˆ˜ ì—†ì—ˆìŠµë‹ˆë‹¤.
ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ HPA ìµœì í™”, Pod ë°°ì¹˜ ë° ë¦¬ì†ŒìŠ¤ í• ë‹¹ ì „ëµê³¼ ê°™ì€ í¬ì¸íŠ¸ë“¤ì€ ìš´ì˜ì„ í•˜ë©° ì§€ì†ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ê´€ë¦¬ ëŒ€ìƒì¸ ë§Œí¼,
ìœ„ì— ì–¸ê¸‰ëœ ECSì˜ ìš´ì˜ í¬ì¸íŠ¸ë“¤ë„ &lt;strong&gt;ì„œë¹„ìŠ¤ë¥¼ ë°°í¬í•œ ì´í›„ì—ë„ ì§€ì†ì ìœ¼ë¡œ ê´€ì‹¬&lt;/strong&gt;ì„ ê°€ì ¸ì•¼ í•˜ëŠ” í¬ì¸íŠ¸ì„ì„ ê°•ì¡°í•˜ë©° ë§ˆì¹©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì†Œì¤‘í•œ ì‹œê°„ì„ ë‚´ì–´ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ì˜ëª»ëœ ë‚´ìš©ì€ ì§€ì í•´ ì£¼ì„¸ìš”! ğŸ˜ƒ&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;</content>

      
      
      
      
      

      <author>
          <name>Heuristic Wave</name>
        
        
      </author>

      

      
        <category term="aws" />
      

      
        <summary type="html">EC2 ê¸°ë°˜ì˜ ECSë¥¼ ë‹¤ë£¨ê¸° ìœ„í•œ ì‚¬ì†Œí•œ ì§€ì‹ë“¤ í†±ì•„ë³´ê¸°!</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">Export cloudwatch log data to Amazon S3 using lambda</title>
      <link href="https://heuristicwave.github.io/Export_data_to_S3_Lambda" rel="alternate" type="text/html" title="Export cloudwatch log data to Amazon S3 using lambda" />
      <published>2022-04-07T00:00:00+00:00</published>
      <updated>2022-04-07T00:00:00+00:00</updated>
      <id>https://heuristicwave.github.io/Export_data_to_S3_Lambda</id>
      <content type="html" xml:base="https://heuristicwave.github.io/Export_data_to_S3_Lambda">&lt;p&gt;ë³¸ ê¸€ì€ Cloudwatch Logs groupsì˜ ë°ì´í„°ë¥¼ Lambdaë¥¼ ì‚¬ìš©í•´ ì£¼ê¸°ì ìœ¼ë¡œ S3ë¡œ export í•˜ëŠ” ë°©ë²•ì„ ë‹¤ë£¹ë‹ˆë‹¤.&lt;/p&gt;

&lt;h1 id=&quot;intro&quot;&gt;Intro&lt;/h1&gt;

&lt;p&gt;ê¸€ì„ ì‹œì‘í•˜ê¸° ì•ì„œ, &lt;a href=&quot;https://noob2geek.in/2021/06/18/export-aws-cloudwatch-logs-to-s3-using-lambda-functions-in-node-js/&quot;&gt;Shraddha Paghdar - Export AWS CloudWatch logs to S3 using lambda functions in Node.js&lt;/a&gt;
ë¥¼ ì°¸ê³ í•˜ì—¬ í•´ë‹¹ ê¸€ì„ ì‘ì„±í–ˆìŒì„ ì•Œë¦½ë‹ˆë‹¤. ë³¸ê²©ì ìœ¼ë¡œ ë°©ë²•ì„ ì†Œê°œí•˜ê¸° ì•ì„œ, Cloudwatch Logs groupsì˜ ë°ì´í„°ë¥¼ Lambdaë¥¼ ì‚¬ìš©í•´ ì£¼ê¸°ì ìœ¼ë¡œ S3ë¡œ export í•˜ê¸° ìœ„í•œ í”Œë¡œìš°ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/background/exportLambda.png&quot; alt=&quot;imageBuilder&quot; /&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Amazon EventBridgeì— ì •ì˜í•œ Ruleì— ì˜í•´ Lambdaë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.&lt;/li&gt;
  &lt;li&gt;ì´í›„ ëŒë‹¤ê°€ ì§€ì •í•œ CloudWatchì˜ Logsì— ì ì¬ëœ ë°ì´í„°ë¥¼ ì°¾ìŠµë‹ˆë‹¤.&lt;/li&gt;
  &lt;li&gt;2ë²ˆì— ì—°ì†ë˜ì–´ ì´ê´€ë  ëŒ€ìƒì˜ ë¡œê·¸ë“¤ì´ S3ë¡œ ì´ê´€ë©ë‹ˆë‹¤.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;-workshop&quot;&gt;ğŸ“œ Workshop&lt;/h2&gt;

&lt;h3 id=&quot;1ï¸âƒ£-logë¥¼-ë‹´ì„-bucket-ë°-ì •ì±…-ìƒì„±í•˜ê¸°&quot;&gt;1ï¸âƒ£ Logë¥¼ ë‹´ì„ Bucket ë° ì •ì±… ìƒì„±í•˜ê¸°&lt;/h3&gt;

&lt;p&gt;Amazon S3 ì½˜ì†” í™”ë©´ì— ì ‘ì†í•´ Logë“¤ì´ ë‹´ê¸¸ Bucketì„ ìƒì„±í•˜ê³  ì´ì–´ì„œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Permissions&lt;/code&gt;ì—ì„œ S3 ë²„í‚·ì— ëŒ€í•œ ê¶Œí•œì„ ì„¤ì •í•©ë‹ˆë‹¤.
í•´ë‹¹ ë°©ë²•ì€ &lt;a href=&quot;https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/S3ExportTasksConsole.html&quot;&gt;ê³µì‹ ë¬¸ì„œ, 1ë‹¨ê³„ì™€ 3ë‹¨ê³„&lt;/a&gt;ì— ìì„¸íˆ ì„¤ëª…ë˜ì–´ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ğŸ’¡ ê³µì‹ ë¬¸ì„œ 3ë‹¨ê³„ì—ì„œ ê¸°ì¬ëœ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;random-string&lt;/code&gt;ì€ í•„ìš”ì— ì˜í•œ ê²½ìš° ì‚¬ìš©í•˜ì„¸ìš”. í•´ë‹¹ ê¸€ì—ì„œëŠ” í¸ì˜ìƒ ìƒëµí•˜ì˜€ìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;2ï¸âƒ£-lambda-ìƒì„±í•˜ê¸°&quot;&gt;2ï¸âƒ£ Lambda ìƒì„±í•˜ê¸°&lt;/h3&gt;

&lt;h4 id=&quot;step-1--lambdaê°€-ì‚¬ìš©í•˜ëŠ”-iam-role--policy-ìƒì„±&quot;&gt;Step 1 : Lambdaê°€ ì‚¬ìš©í•˜ëŠ” IAM Role &amp;amp; Policy ìƒì„±&lt;/h4&gt;

&lt;p&gt;Lambdaê°€ Logë¥¼ Export í•  ìˆ˜ ìˆë„ë¡ ë‹¤ìŒ ì •ì±…ì„ ìƒì„±í•©ë‹ˆë‹¤.
IAMì—ì„œ Create policyë¥¼ ì„ íƒí•˜ê³  ì•„ë˜ JSONì„ ë³µì‚¬í•˜ì—¬ ë¶™ì—¬ ë„£ê³ , &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cloudwatch_export_task&lt;/code&gt;ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì •ì±…ì„ ìƒì„±í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;Version&quot;&lt;/span&gt;: &lt;span class=&quot;s2&quot;&gt;&quot;2012-10-17&quot;&lt;/span&gt;,
    &lt;span class=&quot;s2&quot;&gt;&quot;Statement&quot;&lt;/span&gt;: &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;s2&quot;&gt;&quot;Effect&quot;&lt;/span&gt;: &lt;span class=&quot;s2&quot;&gt;&quot;Allow&quot;&lt;/span&gt;,
            &lt;span class=&quot;s2&quot;&gt;&quot;Action&quot;&lt;/span&gt;: &lt;span class=&quot;s2&quot;&gt;&quot;logs:CreateExportTask&quot;&lt;/span&gt;,
            &lt;span class=&quot;s2&quot;&gt;&quot;Resource&quot;&lt;/span&gt;: &lt;span class=&quot;s2&quot;&gt;&quot;arn:aws:logs:{Region}:{AccountNumber}:*&quot;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Lambdaì— ê¶Œí•œì„ ë¶€ì—¬í•´ ì£¼ê¸° ìœ„í•´ì„œ IAM &amp;gt; Roles &amp;gt; Create Roleì„ ì„ íƒí•©ë‹ˆë‹¤.
Use caseë¡œ Lambdaë¥¼ ì„ íƒí•˜ê³  ì•ì„œ ìƒì„±í•œ ì •ì±…ì„ ë¶€ì—¬í•œ ë’¤, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;export_S3_lambda&lt;/code&gt;ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ Roleì„ ìƒì„±í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;h4 id=&quot;step-2--ì½”ë“œ-ì‘ì„±&quot;&gt;Step 2 : ì½”ë“œ ì‘ì„±&lt;/h4&gt;

&lt;p&gt;Lambda ì½˜ì†” í™”ë©´ì—ì„œ ì•„ë˜ì™€ ê°™ì´ ë¹ˆì¹¸ì„ ì±„ìš°ê³ , Step 1ì—ì„œ ë§Œë“¤ì–´ë‘” roleì„ ë¶€ì—¬í•´ ëŒë‹¤ í•¨ìˆ˜ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/guide/exportLambda.png&quot; alt=&quot;baseimage&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ğŸ’¡ ë§Œì•½, Export ì—­í• ì„ ìˆ˜í–‰í•˜ëŠ” &lt;strong&gt;ëŒë‹¤ í•¨ìˆ˜ê°€ ìƒì„±í•˜ëŠ” ë¡œê·¸&lt;/strong&gt;ë¥¼ ìˆ˜ì§‘í•˜ê³  ì‹¶ì„ ê²½ìš°ì—ëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Create a new role with basic Lambda permissions&lt;/code&gt;ì„
ì„ íƒí•˜ê³  Consoleì— ì˜í•´ ìë™ì ìœ¼ë¡œ ìƒì„±ë˜ëŠ” Roleì— Step 1ì—ì„œ ë§Œë“  ì •ì±…ì„ ë¶€ì—¬í•˜ë©´ ë©ë‹ˆë‹¤.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ì´ì–´ì„œ ì•„ë˜ ì½”ë“œë¥¼ ë³µì‚¬í•˜ì—¬ ìƒí™©ì— ë§ëŠ” ì¸ì ê°’ì„ ë„£ì–´ì£¼ê³  Deploy í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Parameter&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;region : ë¡œê·¸ ê·¸ë£¹ê³¼ ëŒ€ìƒ ë²„í‚·ì€ ë™ì¼ ë¦¬ì „ì— ìœ„ì¹˜&lt;/li&gt;
  &lt;li&gt;destination : ë¡œê·¸ê°€ ì´ê´€ë˜ëŠ” ëŒ€ìƒ ë²„í‚·&lt;/li&gt;
  &lt;li&gt;logGroupName : Cloudwatch Log group ì´ë¦„&lt;/li&gt;
  &lt;li&gt;destinationPrefix : 1ï¸âƒ£ ì—ì„œ ì–¸ê¸‰í•œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;random-string&lt;/code&gt; ê°’&lt;/li&gt;
  &lt;li&gt;from/to : Lambda í•¨ìˆ˜ê°€ í˜¸ì¶œ ë˜ëŠ” ì‹œì ì„ ê¸°ì¤€ìœ¼ë¡œ, from/to ê¸°ê°„ì˜ ë¡œê·¸ ê·¸ë£¹ë“¤ì„ export&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;AWS&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;aws-sdk&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;cloudconfig&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;apiVersion&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;2014-03-28&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;region&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;region&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;cloudwatchlogs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;AWS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;CloudWatchLogs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;cloudconfig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;exports&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;handler&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;params&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;destination&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;bucket-name&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;logGroupName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;log-groups-name&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;destinationPrefix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;from&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;86400&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;cloudwatchlogs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;createExportTask&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;statusCode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}).&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;statusCode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;501&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ì´í›„ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ì„ ëˆŒëŸ¬ ê²°ê³¼ê°’ì„ ë³´ë©´ taskId ê°’ì´ ìƒì„±ë˜ê³  S3ì— ë¡œê·¸ê°€ ì´ê´€ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;3ï¸âƒ£-eventbridge-íŠ¸ë¦¬ê±°-ìƒì„±í•˜ê¸°&quot;&gt;3ï¸âƒ£ EventBridge íŠ¸ë¦¬ê±° ìƒì„±í•˜ê¸°&lt;/h3&gt;

&lt;p&gt;ì‘ì„±í•œ ëŒë‹¤ í•¨ìˆ˜ ì½˜ì†” í™”ë©´ ìƒë‹¨ì—ì„œ &lt;strong&gt;Add trigger&lt;/strong&gt; ë²„íŠ¼ì„ ëˆŒëŸ¬ ë‹¤ìŒê³¼ ê°™ì´ Ruleì„ ìƒì„±í•©ë‹ˆë‹¤. ì €ëŠ” ì£¼ê¸°ë¥¼ ì ê²€í•˜ê¸° ìœ„í•´ ì•„ë˜ì™€ ê°™ì´ 5ë¶„ì„ ì£¼ì—ˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/guide/eventBridgeRule.png&quot; alt=&quot;baseimage&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ğŸ’¡ &lt;a href=&quot;https://docs.aws.amazon.com/lambda/latest/dg/services-cloudwatchevents-expressions.html&quot;&gt;ìŠ¤ì¼€ì¥´ í‘œí˜„ì‹ ì‘ì„±ë²•&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;outro&quot;&gt;Outro&lt;/h2&gt;

&lt;p&gt;ì§€ê¸ˆê¹Œì§€ Lambda í•¨ìˆ˜ì™€ EventBrdigeë¥¼ ì‚¬ìš©í•˜ì—¬ ìë™ìœ¼ë¡œ ë¡œê·¸ë¥¼ S3ìœ¼ë¡œ ë°±ì—…í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.
í•´ë‹¹ ë°©ë²• ì™¸ì—ë„ ë¡œê·¸ë¥¼ ì´ê´€í•˜ëŠ” ë‹¤ì–‘í•œ ë°©ë²•ë“¤ì´ ìˆìœ¼ë¯€ë¡œ, ë” ì‰½ê³  ì¢‹ì€ ë°©ë²•ì´ ìˆë‹¤ë©´ ì•Œë ¤ì£¼ì„¸ìš”!&lt;/p&gt;

&lt;p&gt;ì†Œì¤‘í•œ ì‹œê°„ì„ ë‚´ì–´ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ì˜ëª»ëœ ë‚´ìš©ì€ ì§€ì í•´ ì£¼ì„¸ìš”! ğŸ˜ƒ&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;</content>

      
      
      
      
      

      <author>
          <name>Heuristic Wave</name>
        
        
      </author>

      

      
        <category term="aws" />
      

      
        <summary type="html">ë³¸ ê¸€ì€ Cloudwatch Logs groupsì˜ ë°ì´í„°ë¥¼ Lambdaë¥¼ ì‚¬ìš©í•´ ì£¼ê¸°ì ìœ¼ë¡œ S3ë¡œ export í•˜ëŠ” ë°©ë²•ì„ ë‹¤ë£¹ë‹ˆë‹¤.</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">Using the awslogs log driver in ECS(Fargate)</title>
      <link href="https://heuristicwave.github.io/ECS_CW_Logs" rel="alternate" type="text/html" title="Using the awslogs log driver in ECS(Fargate)" />
      <published>2022-03-01T00:00:00+00:00</published>
      <updated>2022-03-01T00:00:00+00:00</updated>
      <id>https://heuristicwave.github.io/ECS_CW_Logs</id>
      <content type="html" xml:base="https://heuristicwave.github.io/ECS_CW_Logs">&lt;p&gt;ECS Taskì˜ ì»¨í…Œì´ë„ˆê°€ ìƒì‚°í•˜ëŠ” ë¡œê·¸ë“¤ì€ CloudWatchë¥¼ í™œìš©í•˜ì—¬ ìˆ˜ì§‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
Cloudwatch Logsë¥¼ ìš´ì˜í•˜ë©° ë¡œê·¸ ì ì¬ê°€ ì œëŒ€ë¡œ ë˜ì§€ ì•Šê±°ë‚˜, Timestampê°€ ì¼ì¹˜í•˜ì§€ ì•Šê±°ë‚˜, ì§€ë‚˜ì¹œ ì§€ì—° ì‹œê°„ì´ ë°œìƒí•˜ê±°ë‚˜, ì•Œì•„ë³´ê¸° ì–´ë ¤ìš´ í˜•íƒœë¡œ ë¡œê·¸ê°€ ìŒ“ì¸ë‹¤ë©´ 
ì•„ë˜ ìš”ì†Œë“¤ì„ ê³ ë¯¼í•´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;h2 id=&quot;-references&quot;&gt;ğŸ“š References&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.aws.amazon.com/AmazonECS/latest/developerguide/using_awslogs.html&quot;&gt;Using the awslogs log driver&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Regular_expression&quot;&gt;Regular expression Wikipedia&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;fargateì—ì„œ-í•„ìš”í•œ-awslogs-ë¡œê·¸-ë“œë¼ì´ë²„&quot;&gt;Fargateì—ì„œ í•„ìš”í•œ awslogs ë¡œê·¸ ë“œë¼ì´ë²„&lt;/h2&gt;

&lt;p&gt;ê³µì‹ ë¬¸ì„œì—ì„œëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;awslogs-region&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;awslogs-group&lt;/code&gt; ë§Œì´ í•„ìš”í•˜ë‹¤ê³  í•˜ì§€ë§Œ, &lt;strong&gt;Fargate&lt;/strong&gt;ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;awslogs-stream-prefix&lt;/code&gt;ì´ ì¶”ê°€ì ìœ¼ë¡œ í•„ìš”í•©ë‹ˆë‹¤.
ë˜í•œ, ê°€ì‹œì„±ì„ í™•ë³´í•˜ê¸° ìœ„í•´ CloudWatch Logsì— ìˆ˜ì§‘ëœ ì—¬ëŸ¬ ì¤„ì˜ ë¡œê·¸ë¥¼ í•˜ë‚˜ì˜ ë©”ì‹œì§€ë¡œ ë³´ê¸° ìœ„í•´ì„œëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;awslogs-multiline-pattern&lt;/code&gt;ì´ í•„ìˆ˜ì ìœ¼ë¡œ í•„ìš”í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;awslogs-multiline-pattern&quot;&gt;awslogs-multiline-pattern&lt;/h3&gt;

&lt;p&gt;ê³µì‹ ë¬¸ì„œì˜ Note ë¶€ë¶„ì„ ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì€ ë©”ëª¨ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. &lt;em&gt;(ì •ë§ ê³µì‹ ë¬¸ì„œëŠ” í•œ ì¤„ë„ ê·¸ëƒ¥ ì§€ë‚˜ì¹  ìˆ˜ ì—†ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤!)&lt;/em&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Multiline logging performs regular expression parsing and matching of all log messages.
This may have a negative impact on logging performance.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ì‹¤ì œë¡œ ì €ëŠ” ì •ê·œ í‘œí˜„ì‹ì„ ê°„ê³¼í•˜ê³  ê²€ì¦ë˜ì§€ ì•Šì€ ì •ê·œì‹ë“¤ì„ ì ìš©í–ˆë‹¤ê°€ ë‹¤ìŒê³¼ ê°™ì€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Negative Impact&lt;/code&gt;ë¥¼ ë§Œë‚¬ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;ë¡œê·¸ê°€ ìˆ˜ì§‘ë˜ê¸°ê¹Œì§€ì˜ ì§€ë‚˜ì¹œ ì§€ì—° ì‹œê°„ ë°œìƒ (10ë¶„ ì´ìƒ)&lt;/li&gt;
  &lt;li&gt;ì§€ì—°ì‹œê°„ìœ¼ë¡œ ì¸í•œ Timestamp ë¶ˆì¼ì¹˜ (Ingestion timeê³¼ Event Timestampì˜ ê³¼ë„í•œ ì˜¤ì°¨)&lt;/li&gt;
  &lt;li&gt;1, 2ë²ˆ ì´ìœ ë¡œ ì¸í•œ ë¡œê·¸ ë¯¸ìˆ˜ì§‘&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;regular-expression-lab&quot;&gt;Regular Expression Lab&lt;/h2&gt;

&lt;p&gt;ì§€ê¸ˆë¶€í„° ì˜ˆì‹œë“¤ì„ í†µí•´, CW Logsë¥¼ ìš´ì˜í•˜ë©° ë§Œë‚  ìˆ˜ ìˆëŠ” ìƒí™©ë“¤ì„ ì²´í—˜í•´ ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;ìƒ˜í”Œ ë¡œê·¸ë¥¼ ë³µì‚¬í•˜ì—¬ &lt;a href=&quot;https://regexr.com&quot;&gt;RegExr&lt;/a&gt;ì—ì„œ match ì—¬ë¶€ë¥¼ í…ŒìŠ¤íŠ¸í•´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;case-1ï¸âƒ£&quot;&gt;Case 1ï¸âƒ£&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;awslogs-multiline-pattern&lt;/code&gt;ì˜ &lt;strong&gt;value&lt;/strong&gt;ë¡œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;^INFO&lt;/code&gt;ë¥¼ ì„¤ì •í•  ê²½ìš° 3ê°œì˜ Line ì¤‘ match ë˜ëŠ” ë¼ì¸ì€ ëª‡ ë¼ì¸ì¼ê¹Œìš”?&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;INFO | &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;pkg/trace/info/stats.go:104 &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;LogStats&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;                &lt;span class=&quot;c&quot;&gt;# Line 1&lt;/span&gt;
INFO | &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;pkg/trace/info/stats.go:104 &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;LogStats&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;                &lt;span class=&quot;c&quot;&gt;# Line 2&lt;/span&gt;
12:15:10 UTC | INFO | &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;pkg/trace/info/stats.go:104 &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;LogStats&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# Line 3&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;details&gt;
  &lt;summary&gt;ğŸ– ì •ë‹µ ë³´ê¸°&lt;/summary&gt;

  &lt;blockquote&gt;
    &lt;p&gt;&lt;strong&gt;INFO&lt;/strong&gt; | (pkg/trace/info/stats.go:104 in LogStats)                # Line 1&lt;/p&gt;
  &lt;/blockquote&gt;

  &lt;p&gt;^(caret) ì€ ì „ì²´ ë¬¸ìì—´ì˜ ì‹œì‘ ìœ„ì¹˜ì—ë§Œ ì¼ì¹˜í•˜ë¯€ë¡œ, Line 1 ë§Œì´ match ë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;/details&gt;

&lt;h3 id=&quot;case-2ï¸âƒ£&quot;&gt;Case 2ï¸âƒ£&lt;/h3&gt;

&lt;p&gt;ë‹¤ìŒì€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ì‹œ:ë¶„:ì´ˆ&lt;/code&gt;ë¥¼ í‘œí˜„í•˜ëŠ” ì •ê·œ í‘œí˜„ì‹ ì…ë‹ˆë‹¤. í•´ë‹¹ ì •ê·œ í‘œí˜„ì‹ì€ ì•„ë˜ 3ì¤„ì„ ëª¨ë‘ Match ì‹œí‚¬ ìˆ˜ ìˆì„ê¹Œìš”? &lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(0[1-9]|1[0-9]|2[0-4]):(0[1-9]|[1-5][0-9]):(0[1-9]|[1-5][0-9])&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;07:36:35 | Which line will match? Line 1
08:00:01 | I am Line 2!
08:01:00 | I am Line 3!
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;details&gt;
  &lt;summary&gt;ğŸ– ì •ë‹µ ë³´ê¸°&lt;/summary&gt;

  &lt;blockquote&gt;
    &lt;p&gt;&lt;strong&gt;07:36:35&lt;/strong&gt; | I was matched &lt;br /&gt;
08:00:01 | I was not matched! &lt;br /&gt;
08:01:00 | I was not matched! &lt;br /&gt;&lt;/p&gt;
  &lt;/blockquote&gt;

  &lt;p&gt;ê·¸ë ‡ë‹¤ë©´ ì™œ? ì²« ë²ˆì§¸ ë¼ì¸ë§Œì´ ë§¤ì¹­ë˜ì—ˆì„ê¹Œìš”? &lt;strong&gt;ë¶„, ì´ˆ&lt;/strong&gt;ì— í•´ë‹¹í•˜ëŠ” í‘œí˜„ì‹ì„ ìœ ì‹¬íˆ ì‚´í´ë³´ë©´ 00ë¶„ 00ì‹œëŠ” ë§¤ì¹­ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
ë•Œë¬¸ì— ê°ê° (ë¶„ : &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(0[0-9]|[1-5][0-9])&lt;/code&gt;, ì´ˆ : &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(0[0-9]|[1-5][0-9])&lt;/code&gt;)ë¡œ ìˆ˜ì •í•´ì•¼ ìœ„ 3ì¤„ì„ ë§¤ì¹­ ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;/details&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h3 id=&quot;other-case&quot;&gt;Other Case&lt;/h3&gt;

&lt;p&gt;ìœ„ 2ê°€ì§€ ì¼€ì´ìŠ¤ë§Œ ì¤€ë¹„ëœë‹¤ë©´ ëª¨ë“  ë¡œê·¸ë“¤ì„ ì œëŒ€ë¡œ ë¶„ë¦¬í•˜ì—¬ ìˆ˜ì§‘í•  ìˆ˜ ìˆì„ê¹Œìš”?&lt;/p&gt;

&lt;details&gt;
  &lt;summary&gt;ğŸ¤” ìƒê°í•´ë³´ê¸°&lt;/summary&gt;

  &lt;ul&gt;
    &lt;li&gt;Flagê°€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;INFO&lt;/code&gt; í˜•ì‹ì´ ì•„ë‹Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WARN&lt;/code&gt;ì´ ë°œìƒí•  ê²½ìš°&lt;/li&gt;
    &lt;li&gt;Timestampë¡œ ë§¤ì¹­ ì‘ì—…ì„ í•˜ëŠ”ë° í•œ ì¤„ì— 1íšŒ ì´ìƒ Timestampê°€ í¬í•¨ëœ ê²½ìš°
      &lt;blockquote&gt;
        &lt;p&gt;ex) &lt;strong&gt;08:00:01&lt;/strong&gt; | Itâ€™s &lt;strong&gt;08:02:03&lt;/strong&gt; right now.&lt;/p&gt;
      &lt;/blockquote&gt;
    &lt;/li&gt;
    &lt;li&gt;Application Crashë¡œ ì¸í•œ ì˜ˆìƒì¹˜ ëª»í•œ ë©”ì‹œì§€ê°€ í¬í•¨ë  ê²½ìš°&lt;/li&gt;
    &lt;li&gt;awslogs ë¡œê·¸ ë“œë¼ì´ë²„ ë‚´ì˜ ìš°ì„ ìˆœìœ„&lt;/li&gt;
  &lt;/ul&gt;

&lt;/details&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;ì•„ë§ˆë„ ìœ„ì— ê¸°ì¬í•œ ê²ƒë“¤ ì™¸ì—ë„ ë” ê³ ë ¤ í•  ê²ƒë“¤ì´ ë§ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.
ê°œë°œì´ë‚˜ ì•Œê³ ë¦¬ì¦˜ ë¬¸ì œë¥¼ í’€ ë•Œì™€ ë§ˆì°¬ê°€ì§€ë¡œ í•­ìƒ ì˜ˆìƒì¹˜ ëª»í•œ ì‹¤íŒ¨ ì§€ì ì„ ì˜ˆìƒí•˜ëŠ” ìŠµê´€ì´ í•„ìš”í•œ ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;span class=&quot;table-of-contents-list&quot;&gt;ECS Error Handling and Troubleshooting&lt;/span&gt;&lt;/p&gt;
&lt;ul class=&quot;table-of-contents-list&quot;&gt;
    &lt;li&gt;&lt;a href=&quot;./ECS_Exec&quot;&gt;Using Amazon ECS Exec for debugging&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./ECS_CW_Logs&quot;&gt;Using the awslogs log driver in ECS(Fargate)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;</content>

      
      
      
      
      

      <author>
          <name>Heuristic Wave</name>
        
        
      </author>

      

      
        <category term="aws" />
      
        <category term="devops" />
      

      
        <summary type="html">ECS Taskì˜ ì»¨í…Œì´ë„ˆê°€ ìƒì‚°í•˜ëŠ” ë¡œê·¸ë“¤ì€ CloudWatchë¥¼ í™œìš©í•˜ì—¬ ìˆ˜ì§‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Cloudwatch Logsë¥¼ ìš´ì˜í•˜ë©° ë¡œê·¸ ì ì¬ê°€ ì œëŒ€ë¡œ ë˜ì§€ ì•Šê±°ë‚˜, Timestampê°€ ì¼ì¹˜í•˜ì§€ ì•Šê±°ë‚˜, ì§€ë‚˜ì¹œ ì§€ì—° ì‹œê°„ì´ ë°œìƒí•˜ê±°ë‚˜, ì•Œì•„ë³´ê¸° ì–´ë ¤ìš´ í˜•íƒœë¡œ ë¡œê·¸ê°€ ìŒ“ì¸ë‹¤ë©´ ì•„ë˜ ìš”ì†Œë“¤ì„ ê³ ë¯¼í•´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">Using Amazon ECS Exec for debugging</title>
      <link href="https://heuristicwave.github.io/ECS_Exec" rel="alternate" type="text/html" title="Using Amazon ECS Exec for debugging" />
      <published>2022-02-22T00:00:00+00:00</published>
      <updated>2022-02-22T00:00:00+00:00</updated>
      <id>https://heuristicwave.github.io/ECS_Exec</id>
      <content type="html" xml:base="https://heuristicwave.github.io/ECS_Exec">&lt;p&gt;Dockerì—ì„œëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;exec&lt;/code&gt; ëª…ë ¹ì–´ë¥¼ í†µí•´ ì‹¤í–‰ì¤‘ì¸ ì»¨í…Œì´ë„ˆì— ì ‘ì†í•˜ì—¬ ë””ë²„ê¹…ì´ ê°€ëŠ¥í•˜ë‹¤.
21ë…„ 3ì›” ë¶€í„° í•´ë‹¹ ê¸°ëŠ¥ì´ AWSì˜ ECSì—ì„œë„ ì‚¬ìš©ê°€ëŠ¥í•˜ê²Œ ë˜ì—ˆëŠ”ë°, í•´ë‹¹ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë©° ë§Œë‚¬ë˜ ë¬¸ì œë“¤ì„ ê¸°ë¡.&lt;/p&gt;

&lt;h2 id=&quot;-references&quot;&gt;ğŸ“š References&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-exec.html&quot;&gt;Using Amazon ECS Exec for debugging&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.aws.amazon.com/cli/latest/reference/ecs/execute-command.html&quot;&gt;AWS CLI Cmd Ref : excute-commnad&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;exec-í™œì„±í™”&quot;&gt;Exec í™œì„±í™”&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;SSM ì—ì´ì „íŠ¸ì™€ SSM ì„œë¹„ìŠ¤ ê°„ì˜ í†µì‹ ì— í•„ìš”í•œ ê¶Œí•œ ë¶€ì—¬&lt;/li&gt;
  &lt;li&gt;task-definition config ì¶”ê°€
    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s2&quot;&gt;&quot;linuxParameters&quot;&lt;/span&gt;: &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;initProcessEnabled&quot;&lt;/span&gt;: &lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;CLIë¡œ execute-command enable í›„, ì ê²€
    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;aws ecs create-service &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--cluster&lt;/span&gt; cluster-name &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--task-definition&lt;/span&gt; task-definition-name &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--enable-execute-command&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--service-name&lt;/span&gt; service-name &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--desired-count&lt;/span&gt; 1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;p&gt;ì•„ë˜ ëª…ë ¹ì–´ë¡œ í™œì„±í™” ì—¬ë¶€ í™•ì¸. (grep option í™œìš©, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep -F4 &quot;managedAgents&quot;&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep &quot;enableExecuteCommand&quot;&lt;/code&gt;)&lt;/p&gt;
    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;aws ecs describe-tasks &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--cluster&lt;/span&gt; cluster-name &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--tasks&lt;/span&gt; task-id 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;p&gt;í™œì„±í™” ìƒíƒœì¼ ë•Œì˜ Snippet&lt;/p&gt;
    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;tasks&quot;&lt;/span&gt;: &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            ...
            &lt;span class=&quot;s2&quot;&gt;&quot;containers&quot;&lt;/span&gt;: &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                    ...
                    &lt;span class=&quot;s2&quot;&gt;&quot;managedAgents&quot;&lt;/span&gt;: &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;
                        &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                            &lt;span class=&quot;s2&quot;&gt;&quot;lastStartedAt&quot;&lt;/span&gt;: &lt;span class=&quot;s2&quot;&gt;&quot;2021-03-01T14:49:44.574000-06:00&quot;&lt;/span&gt;,
                            &lt;span class=&quot;s2&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;s2&quot;&gt;&quot;ExecuteCommandAgent&quot;&lt;/span&gt;,
                            &lt;span class=&quot;s2&quot;&gt;&quot;lastStatus&quot;&lt;/span&gt;: &lt;span class=&quot;s2&quot;&gt;&quot;RUNNING&quot;&lt;/span&gt;
                        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
                    &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;,
            ...
            &lt;span class=&quot;s2&quot;&gt;&quot;enableExecuteCommand&quot;&lt;/span&gt;: &lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;,
            ...
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;Running ECS Exec
    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;aws ecs execute-command &lt;span class=&quot;nt&quot;&gt;--cluster&lt;/span&gt; cluster-name &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--task&lt;/span&gt; task-id &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--container&lt;/span&gt; container-name &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--interactive&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--command&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;/bin/sh&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ë¬¸ì œ-í•´ê²°&quot;&gt;ë¬¸ì œ í•´ê²°&lt;/h2&gt;

&lt;p&gt;Exec ëª…ë ¹ì–´ ì´í›„ ì—ëŸ¬ í•¸ë“¤ (ê³µì‹ ë¬¸ì„œë“¤ì— ë‹µì´ ë‹¤ ìˆì—‡ë‹¤ ğŸ˜‚)&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;An error occurred &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;ClusterNotFoundException&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; when calling the ExecuteCommand operation: Cluster not found.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;Cluster ARN ê¸°ì… (From AWS CLI Ref : The Amazon Resource Name (ARN) or short name of the cluster from AWS CLI Ref)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;SessionManagerPlugin is not found. Please refer to SessionManager Documentation here: http://docs.aws.amazon.com/console/systems-manager/session-manager-plugin-not-found
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;í´ë¼ì´ì–¸íŠ¸ PCì— SSM Plugin ì„¤ì¹˜ (From AWS Docs : Prerequisites for using ECS Exec)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;span class=&quot;table-of-contents-list&quot;&gt;ECS Error Handling and Troubleshooting&lt;/span&gt;&lt;/p&gt;
&lt;ul class=&quot;table-of-contents-list&quot;&gt;
    &lt;li&gt;&lt;a href=&quot;./ECS_Exec&quot;&gt;Using Amazon ECS Exec for debugging&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./ECS_CW_Logs&quot;&gt;Using the awslogs log driver in ECS(Fargate)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;</content>

      
      
      
      
      

      <author>
          <name>Heuristic Wave</name>
        
        
      </author>

      

      
        <category term="aws" />
      
        <category term="devops" />
      

      
        <summary type="html">Dockerì—ì„œëŠ” exec ëª…ë ¹ì–´ë¥¼ í†µí•´ ì‹¤í–‰ì¤‘ì¸ ì»¨í…Œì´ë„ˆì— ì ‘ì†í•˜ì—¬ ë””ë²„ê¹…ì´ ê°€ëŠ¥í•˜ë‹¤. 21ë…„ 3ì›” ë¶€í„° í•´ë‹¹ ê¸°ëŠ¥ì´ AWSì˜ ECSì—ì„œë„ ì‚¬ìš©ê°€ëŠ¥í•˜ê²Œ ë˜ì—ˆëŠ”ë°, í•´ë‹¹ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë©° ë§Œë‚¬ë˜ ë¬¸ì œë“¤ì„ ê¸°ë¡.</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">Create Immutable Server using AWS Image Builder &amp;amp; Auto Scaling Group</title>
      <link href="https://heuristicwave.github.io/ImageBuilder" rel="alternate" type="text/html" title="Create Immutable Server using AWS Image Builder &amp; Auto Scaling Group" />
      <published>2022-02-21T00:00:00+00:00</published>
      <updated>2022-02-21T00:00:00+00:00</updated>
      <id>https://heuristicwave.github.io/ImageBuilder</id>
      <content type="html" xml:base="https://heuristicwave.github.io/ImageBuilder">&lt;p&gt;ë³¸ ê¸€ì€ 2021ë…„ 4ì›” 30ì¼ &lt;a href=&quot;https://aws.amazon.com/about-aws/whats-new/2021/04/ec2-image-builder-supports-auto-scaling-launch-template/&quot;&gt;EC2 Image Builder supports Auto Scaling launch template&lt;/a&gt;ì—
ì†Œê°œëœ ê¸°ëŠ¥ì„ í™œìš©í•´ Image Builderë¡œ Golden AMIë¥¼ ë§Œë“¤ê³ ,
í•´ë‹¹ ì´ë¯¸ì§€ë¡œ Auto Scaling Groupì˜ launch templateì„ ì—…ë°ì´íŠ¸í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;h1 id=&quot;intro&quot;&gt;Intro&lt;/h1&gt;

&lt;p&gt;í´ë¼ìš°ë“œë¥¼ ë‹¤ë£¨ë‹¤ ë³´ë©´ &lt;strong&gt;Netflix&lt;/strong&gt; ê°€ ì—¬ëŸ¬ ë¶„ì•¼ì—ì„œ ì•ì¥ì„œ ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ê·¸ì¤‘ì—ì„œ Immutable Server Patternì„ ì•Œë¦¬ëŠ”ë° ê¸°ì—¬í•œ 2013ë…„ì— ë°œê°„ëœ &lt;a href=&quot;https://netflixtechblog.com/ami-creation-with-aminator-98d627ca37b0&quot;&gt;AMI Creation with Aminator&lt;/a&gt;ë¥¼
ê¼­ í•œë²ˆ ì½ì–´ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤. ê³¼ê±° ë„·í”Œë¦­ìŠ¤ëŠ” AWSì˜ ì´ë¯¸ì§€ íŒŒì¼ì„ ìƒì„±í•˜ê¸° ìœ„í•´ Aminatorë¼ëŠ” ë„êµ¬ë¥¼ ì‚¬ìš©í–ˆì§€ë§Œ,
ë³¸ í¬ìŠ¤íŒ…ì—ì„œëŠ” ì´ë¯¸ì§€ ë¹Œë”ë¡œ AMIë¥¼ ë§Œë“¤ê³  Auto Scaling Groupì— ì ìš©ì‹œí‚¤ëŠ” ë°©ë²•ì„ ë°°ì›Œ Immutable Server Patternì„ í•™ìŠµí•´ ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;immutable-server&quot;&gt;Immutable Server&lt;/h2&gt;

&lt;p&gt;Immutable Server ëŒ€í•œ ë‚´ìš©ì€ martin fowler ë¸”ë¡œê·¸ì— ì†Œê°œëœ &lt;a href=&quot;https://martinfowler.com/bliki/ImmutableServer.html&quot;&gt;ImmutableServer&lt;/a&gt;
ê¸€ì„ ë³´ì‹œë©´ êµ‰ì¥íˆ ì˜ ì„¤ëª…ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ìš”ì•½ + ê·¸ë™ì•ˆì˜ ì œ ë‡Œí”¼ì…œì„ í•¨ê»˜ ë§ì”€ë“œë¦¬ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì„œë²„ë¥¼ ìš´ì˜í•˜ë‹¤ ë³´ë©´ ì—…ë°ì´íŠ¸ë¥¼ ë¹„ë¡¯í•œ ë‹¤ì–‘í•œ ì´ìŠˆë“¤ë¡œ ì¸í•´ êµ¬ì„±ìš”ì†Œê°€ ìì£¼ ë³€í•˜ê²Œ ë©ë‹ˆë‹¤.
ê·¸ë ‡ê²Œ ìš´ì˜í•˜ë‹¤ ë³´ë©´ ë¬´ì–¸ê°€ ê¼¬ì—¬ ì„œë²„ë¥¼ ì¬ ìƒì„±í•˜ëŠ” ì¼ì´ ë°œìƒí•˜ëŠ”ë° ì•„ë˜ì™€ ê°™ì€ ë¼ì´í”„ ì‚¬ì´í´ì„ ë§Œë‚˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://martinfowler.com/bliki/images/immutableServer/PhoenixServerLifecycle.png&quot; alt=&quot;phoenixServerLifecycle&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ì´ëŸ° ìƒí™©ì—ì„œ êµ¬ì„±ì´ ë‹¤ë¥¸ ì—¬ëŸ¬ ëŒ€ì˜ ì„œë²„ë¥¼ ê°€ì§€ê²Œ ë˜ë©´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Configuration drift&lt;/code&gt;ê°€ ë°œìƒí–ˆë‹¤ê³  í‘œí˜„í•©ë‹ˆë‹¤.
ë˜í•œ ìœ„ ê·¸ë¦¼ì²˜ëŸ¼ ìê¾¸ ìƒˆë¡œìš´ ì´ë¯¸ì§€ë¡œ íšŒê·€í•˜ë‹ˆê¹Œ, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Shift Left&lt;/code&gt;ë¼ê³ ë„ í‘œí˜„í•˜ê³  ì´ë¥¼ í•œêµ­ì–´ë¡œ í‘œí˜„í•˜ëŠ” ë§ì„ ì°¾ì•„ë³´ë‹ˆ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ì›ì  íšŒê·€&lt;/code&gt;ë¼ëŠ” í‘œí˜„ë„ ì“°ì…ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;êµ¬ì„± ë³€ê²½ì´ ì¦ì€ ì„œë²„ëŠ” ê¹¨ì§€ê¸°(fragile) ì‰½ê³ , ë˜ ì¥ì• ê°€ ë°œìƒí•  ê²½ìš° ì¬í˜„ì´ ì–´ë ¤ìš¸ë¿ë”ëŸ¬ ë³€ê²½ ì‹œ ì—°ì‡„ì ì¸ ì¥ì• ë¥¼ ìœ ë°œí•  ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤.
ì´ë¥¼ ë‘ê³  ê¹¨ì§€ê¸° ì‰¬ìš´ ëˆˆì†¡ì´ ê°™ë‹¤ í•˜ì—¬ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Snowflake Server&lt;/code&gt;ë¼ ë¶€ë¦…ë‹ˆë‹¤.
ì´ ìƒí™©ì„ í”¼í•˜ê¸° ìœ„í•´, Configuration driftë¥¼ í”¼í•˜ëŠ” Base Image(Configurationì´ ë°œìƒí•˜ë©´ ìƒˆë¡­ê²Œ ìƒì„±)ë¥¼ í™œìš©í•œ ë°©ë²•ì„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Phoenix Server&lt;/code&gt;
ë¼ ë¶€ë¦…ë‹ˆë‹¤. &lt;em&gt;(&lt;a href=&quot;https://martinfowler.com/bliki/PhoenixServer.html&quot;&gt;Phoenix Server&lt;/a&gt; ìš©ì–´ëŠ” ë§ˆí‹´ íŒŒìš¸ëŸ¬ì˜ ë™ë£Œ &lt;a href=&quot;https://twitter.com/kornys&quot;&gt;Kornelis Sietsma&lt;/a&gt;ê°€ ì œì•ˆí–ˆë‹¤ í•©ë‹ˆë‹¤.)&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/imagebuilder/immutableServer.png&quot; alt=&quot;immutableServer&quot; /&gt;&lt;/p&gt;

&lt;p&gt;í”¼ë‹‰ìŠ¤ ì„œë²„ì˜ ê°œë…ì€ ê¸°ë³¸ ì´ë¯¸ì§€(Base AMI, Golden AMI)ë¥¼ í†µí•´ ì–¸ì œë‚˜ ì¼ê´€ì„± ìˆëŠ” í™˜ê²½ì„ ì œê³µí–ˆê³ ,
ì´ëŸ¬í•œ ê°œë…ë“¤ì´ ìì—°ìŠ¤ëŸ½ê²Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Immutable Server&lt;/code&gt;ì˜ ê°œë…ìœ¼ë¡œ ì´ì–´ì¡ŒìŠµë‹ˆë‹¤.
&lt;em&gt;(ìµœê·¼ì—ëŠ” Immutable Serverë¥¼ ë„˜ì–´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Immutable Infrastructure&lt;/code&gt;ì˜ ê°œë…ë„ ìˆìŠµë‹ˆë‹¤!)&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ì´ë¯¸ì§€-ë¹Œë”ì™€-ì˜¤í† -ìŠ¤ì¼€ì¼-ê·¸ë£¹ìœ¼ë¡œ-ì´ë®¤í„°ë¸”-ì„œë²„-êµ¬ì¶•í•˜ê¸°&quot;&gt;ì´ë¯¸ì§€ ë¹Œë”ì™€ ì˜¤í†  ìŠ¤ì¼€ì¼ ê·¸ë£¹ìœ¼ë¡œ ì´ë®¤í„°ë¸” ì„œë²„ êµ¬ì¶•í•˜ê¸°&lt;/h2&gt;

&lt;p&gt;í´ë¼ìš°ë“œì—ì„œì˜ Immutable Server Pattern ê²€ìƒ‰í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ì¢‹ì€ ì˜ˆì‹œë“¤ì´ ë‚˜ì˜µë‹ˆë‹¤.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://aws.amazon.com/ko/blogs/mt/create-immutable-servers-using-ec2-image-builder-aws-codepipeline/&quot;&gt;Create immutable servers using EC2 Image Builder and AWS CodePipeline&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://cloudblogs.microsoft.com/opensource/2018/05/23/immutable-infrastructure-azure-vsts-terraform-packer-ansible/&quot;&gt;Tutorial: Immutable infrastructure for Azure, using VSTS, Terraform, Packer and Ansible&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://learn.hashicorp.com/tutorials/terraform/packer&quot;&gt;Provision Infrastructure with Packer&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://heuristicwave.github.io/Packer&quot;&gt;í•˜ì‹œì½”í”„ íŠœí† ë¦¬ì–¼ì„ ë³´ê³  ë§Œë“  í•„ìì˜ ë¸”ë¡œê·¸ ğŸ¥²&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ê·¸ëŸ¬ë‚˜ ì´ì œë¶€í„° ë‹¤ë£°, ì´ë¯¸ì§€ ë¹Œë”ì™€ ì˜¤í†  ìŠ¤ì¼€ì¼ ê·¸ë£¹ìœ¼ë¡œ ì´ë®¤í„°ë¸” ì„œë²„ íŒ¨í„´ì„ ë§Œì¡±ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
AWSì—ì„œ ì œê³µí•˜ëŠ” AutoScaleì€ íƒ„ë ¥ì ì¸ í™•ì¥ê³¼ ì¶•ì†Œë¥¼ ì œê³µí•˜ì§€ë§Œ Desired Capacity ê¸°ëŠ¥ì„ í™œìš©í•´ í•­ìƒ ë™ì¼í•œ ì„œë²„ì˜ ìˆ˜ë¥¼ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/background/imagebuilder.png&quot; alt=&quot;imageBuilder&quot; /&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Image Builderì˜ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Image pipelines&lt;/code&gt;ë¥¼ í™œìš©í•´ ì›ë³¸ AMIë¡œë¶€í„° ì›í•˜ëŠ” í˜•íƒœì˜ Output(Custom/Golden/Base AMI)ì„ ì œì‘í•©ë‹ˆë‹¤.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Distribution settings&lt;/code&gt;ì„ í†µí•´ lt(Launch Template)ì— 1ë²ˆì—ì„œ ìƒì„±í•œ AMIë¡œ êµì²´í•˜ì—¬ ìƒˆë¡œìš´ ë²„ì „ì„ ë§Œë“­ë‹ˆë‹¤.&lt;/li&gt;
  &lt;li&gt;ì´ì œ, ìƒˆë¡­ê²Œ ìƒì„±ë˜ëŠ” ASG(Auto Scaling Group)ì€ ìƒˆë¡­ê²Œ ë²„ì „ ì—…ëœ ltë¥¼ í†µí•´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;em&gt;3ë²ˆì˜ ASGì˜ ê²½ìš°, Refreshë¥¼ í•˜ê¸° ì „ê¹Œì§€ëŠ” ì´ì „ ìƒíƒœì˜ ltë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ê°€ ìš´ì˜ë˜ê³  ìˆìŠµë‹ˆë‹¤.
ì´ë¯¸ì§€ ìƒì„±ê³¼ ë™ì‹œì— ìƒˆë¡œìš´ AMIë¡œ EC2 Refreshë¥¼ í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ìˆì§€ë§Œ,
ìƒˆë¡­ê²Œ ìƒì„±ëœ ì¸ìŠ¤í„´ìŠ¤ê°€ ìš´ì˜í™˜ê²½ì— ë°”ë¡œ ì ìš©ë˜ëŠ” ê²ƒì€ ë°”ëŒì§í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ í•´ë‹¹ ë¶€ë¶„ì— ëŒ€í•œ ìë™í™”ëŠ” ì œì™¸í•˜ì˜€ìŠµë‹ˆë‹¤.
ë§Œì•½ ê²€ì¦ëœ AMIë¥¼ ìƒì„±í•œë‹¤ë©´, Lambda í˜¹ì€ ê¸°íƒ€ ë°©ë²• ë“±ì„ í†µí•´ Refresh í•˜ì—¬ ì´ë¯¸ì§€ ìƒì„±ë¶€í„° ë°°í¬ê¹Œì§€ ìë™í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;ì¶”í›„ ë‹¤ë¥¸ í¬ìŠ¤íŒ…ì—ì„œ ìì„¸íˆ ë‹¤ë£° ì˜ˆì •ì´ì§€ë§Œ, ì´ëŸ¬í•œ íŒ¨í„´ì€ Immutable Infrastructureì˜ í•œ ìš”ì†Œë¥¼ ì´ë£¨ê¸°ë„ í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;h2 id=&quot;-workshop&quot;&gt;ğŸ“œ Workshop&lt;/h2&gt;

&lt;h3 id=&quot;0ï¸âƒ£-launch-template--auto-scaling-groups-ìƒì„±&quot;&gt;0ï¸âƒ£ Launch Template &amp;amp; Auto Scaling groups ìƒì„±&lt;/h3&gt;

&lt;p&gt;ê¸°ì¡´ í™˜ê²½ì— 0ï¸âƒ£ì´ ì¤€ë¹„ë˜ì–´ ìˆë‹¤ë©´ ë‹¤ìŒ ë‹¨ê³„ì¸ &lt;strong&gt;Distribution settings&lt;/strong&gt;ìœ¼ë¡œ ë„˜ì–´ê°€ë„ ì¢‹ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;í•´ë‹¹ ë‹¨ê³„ëŠ” ì œê°€ êµ‰ì¥íˆ ê²Œìœ¼ë¥¸ ê´€ê³„ë¡œ AWS Documentation : &lt;a href=&quot;https://docs.aws.amazon.com/autoscaling/ec2/userguide/create-asg-launch-template.html&quot;&gt;Creating an Auto Scaling group using a launch template&lt;/a&gt;ë¡œ ëŒ€ì²´í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ğŸ’¡ ë§Œì•½ ê¸°ì¡´ í™˜ê²½ì´ Launch Templateì´ ì•„ë‹Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Launch Configurations&lt;/code&gt;ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆì„ ê²½ìš°,
ì½˜ì†” í™”ë©´ì—ì„œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Copy to launch template&lt;/code&gt; ë²„íŠ¼ì„ ëˆ„ë¥´ì‹œë©´ ì†ì‰½ê²Œ ltë¡œ ë³€ê²½ ê°€ëŠ¥í•©ë‹ˆë‹¤. &lt;br /&gt;
ğŸ’¡ Launch Templateê³¼ Launch ConfigurationsëŠ” êµ‰ì¥íˆ ìœ ì‚¬í•˜ì§€ë§Œ, Launch Templateì˜ ê²½ìš° ë” ë‹¤ì–‘í•œ ê¸°ëŠ¥ë“¤ì„ ì œê³µí•©ë‹ˆë‹¤.
íŠ¹íˆ ë²„ì „ê´€ë¦¬ ê¸°ëŠ¥ì„ í†µí•´ Rollbackì„ í•˜ê±°ë‚˜, ì—…ë°ì´íŠ¸ì‹œ ASGë¥¼ í™œìš©í•œ Rolling Updateê°€ ê°€ëŠ¥í•´ Launch Template ì‚¬ìš©ì„ ê¶Œì¥í•©ë‹ˆë‹¤.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;1ï¸âƒ£-distribution-settings&quot;&gt;1ï¸âƒ£ Distribution settings&lt;/h3&gt;

&lt;p&gt;EC2 Image Builder ì½˜ì†” í™”ë©´ì— ì ‘ì†í•´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Distribution settings&lt;/code&gt;ì—ì„œ ìƒˆë¡œìš´ ì„¸íŒ…ì„ ìƒì„±í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/imagebuilder/distribution.png&quot; alt=&quot;distribution&quot; /&gt;&lt;/p&gt;

&lt;p&gt;í•„ìˆ˜ í•­ëª©ì¸ ì´ë¦„ì„ ì‘ì„±í•˜ê³  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Region settings&lt;/code&gt;ì—ì„œ ë°°í¬í•  ë¦¬ì „ì„ í™•ì¸í•œ í›„,
í•˜ë‹¨ì˜ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Launch template configuration&lt;/code&gt;ì—ì„œ Step 0ï¸âƒ£ì—ì„œ ì‘ì„±í•œ ltë¥¼ ì§€ì •í•˜ê³  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;create settings&lt;/code&gt;ë¡œ ìƒì„±í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;2ï¸âƒ£-image-pipelines&quot;&gt;2ï¸âƒ£ Image pipelines&lt;/h3&gt;

&lt;h4 id=&quot;step-1&quot;&gt;Step 1&lt;/h4&gt;

&lt;p&gt;Distribution settings ì‘ì„±ì´ ì™„ë£Œë˜ì—ˆë‹¤ë©´, ì½˜ì†”ì—ì„œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Image pipelines&lt;/code&gt;ì— ì ‘ì†í•˜ì—¬ ì•„ë˜ ì •ë³´ë“¤ì„ ê¸°ì¬í•©ë‹ˆë‹¤.
ì•„ë˜ ì‚¬ì§„ì˜ ì¢Œì¸¡ Step 5ê¹Œì§€ì˜ ê³¼ì •ì„ ê±°ì¹˜ë©´ ëª©í‘œë¡œ í–ˆë˜ í™˜ê²½ì´ ì™„ì„±ë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/imagebuilder/imagepipeline.png&quot; alt=&quot;pipeline&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Build schedule&lt;/code&gt;ì—ì„œëŠ” ì£¼ê¸°ì ìœ¼ë¡œ íŒŒì´í”„ë¼ì¸ì„ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ë°©ë²•ë“¤ì„ ì œê³µí•˜ëŠ”ë° ìš´ì˜ìê°€ ì›í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;h4 id=&quot;step-2&quot;&gt;Step 2&lt;/h4&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Choose recipe&lt;/code&gt; ë‹¨ê³„ì—ì„œëŠ” ê¸°ì¡´ì— ë§Œë“¤ì–´ë‘” &lt;strong&gt;recipe&lt;/strong&gt;ê°€ ì—†ìœ¼ë¯€ë¡œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Create new recipe&lt;/code&gt;ë¥¼ ì„ íƒí•˜ê³ , &lt;strong&gt;Image type&lt;/strong&gt;ìœ¼ë¡œ &lt;strong&gt;AMI&lt;/strong&gt;ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ë‹¤ìŒ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Base image&lt;/code&gt;ë¥¼ ê³ ë¥´ëŠ” ë‹¨ê³„ì—ì„œëŠ” ì•„ë˜ í™”ë©´ê³¼ ê°™ì´ &lt;strong&gt;ê´€ë¦¬í˜• ì´ë¯¸ì§€&lt;/strong&gt;ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ ê¸°ì¡´ì— ì‘ì„±í•œ &lt;strong&gt;Custom AMI ID&lt;/strong&gt;ë¥¼ ì‚¬ìš©í•´ë„ ë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/imagebuilder/baseimage.png&quot; alt=&quot;baseimage&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ê·¸ë‹¤ìŒ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Instance configuration&lt;/code&gt;ì™€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Working directory&lt;/code&gt;ì—ì„œëŠ” &lt;strong&gt;ê¸°ë³¸ ê°’&lt;/strong&gt;ìœ¼ë¡œ ë‘¬ë„ ìƒê´€ì—†ì§€ë§Œ
&lt;strong&gt;SSM, User data, Working directory path&lt;/strong&gt;ì˜ í•„ìš” ì—¬ë¶€ì— ë”°ë¼ í™œìš©í•˜ì‹œë©´ ë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì´ì–´ì„œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Components&lt;/code&gt;ì—ì„œëŠ” Golden AMIë¥¼ êµ¬ì¶•í•˜ê¸° ìœ„í•´ ì„ í–‰ë˜ì–´ì•¼ í•˜ëŠ” ê°ì¢… Agentë‚˜ ì†Œí”„íŠ¸ì›¨ì–´(Apache, dotnet etc)ë¥¼ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì €ëŠ” í¸ì˜ìƒ CloudWatch Agentë¥¼ ì„ íƒí–ˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/imagebuilder/components.png&quot; alt=&quot;components&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ê·¸ë‹¤ìŒ ì´ì–´ì§€ëŠ” &lt;strong&gt;Test components, Storage, Tags&lt;/strong&gt; ì—­ì‹œ í•„ìš” ì—¬ë¶€ì— ë”°ë¼ í™œìš©í•˜ì‹œë©´ ë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;h4 id=&quot;step-3&quot;&gt;Step 3&lt;/h4&gt;

&lt;p&gt;3ë‹¨ê³„ì— ì§„ì…í•˜ë©´ ì•„ë˜ ì‚¬ì§„ê³¼ ê°™ì´ ì´ë¯¸ì§€ ë¹Œë”ì˜ ì¸í”„ë¼ Config ê°’ë“¤ì„ ì •ì˜í•  ìˆ˜ ìˆëŠ” ê³µê°„ì´ ë‚˜ì˜µë‹ˆë‹¤.
3ë²ˆì§¸ ë²„íŠ¼ì¸ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Create New infrastructure configuration&lt;/code&gt;ìœ¼ë¡œ ì§ì ‘ ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•, ë„¤íŠ¸ì›Œí¬, SNS topicì„ ì„¤ì •ì´ ê°€ëŠ¥í•˜ì§€ë§Œ,
ì €ëŠ” 1ë²ˆ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Create infrastructure configuration using service defaults&lt;/code&gt;ë¡œ ê¸°ë³¸ êµ¬ì„± ê°’ë“¤ì„ ì¡ì•„ì£¼ì—ˆìŠµë‹ˆë‹¤.
(IAM Roleê³¼ SNS Topicë„ ìë™ìœ¼ë¡œ ìƒì„±í•´ ì£¼ê³  êµ‰ì¥íˆ í¸ë¦¬í•˜ë„¤ìš”.)&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/imagebuilder/defineconfig.png&quot; alt=&quot;config&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;step-4&quot;&gt;Step 4&lt;/h4&gt;

&lt;p&gt;ë“œë””ì–´, ì´ì „ &lt;strong&gt;1ï¸âƒ£ Distribution settings&lt;/strong&gt; ê³¼ì •ì—ì„œ ë§Œë“¤ì–´ë‘” &lt;strong&gt;ë°°í¬ ì„¤ì •&lt;/strong&gt; í•´ë‹¹ ë‹¨ê³„ì—ì„œ ì„ íƒí•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/imagebuilder/associatelt.png&quot; alt=&quot;asso&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;step-5&quot;&gt;Step 5&lt;/h4&gt;

&lt;p&gt;Review ë‹¨ê³„ê¹Œì§€ êµ¬ì„± ìš”ì†Œë“¤ì„ ê²€í† í•´ ë³´ê³  Create pipelineì„ ëˆ„ë¥´ê³  Image pipelines ì½˜ì†”ë¡œ ëŒì•„ì˜¤ë©´ ì•„ë˜ì™€ ê°™ì€ í™”ë©´ì„ ë§Œë‚˜ê²Œ ë©ë‹ˆë‹¤.
ì•„ë˜ ìº¡ì²˜í™”ë©´ì˜ ê²½ìš° ì´ë¯¸ ë¹Œë“œê°€ ëë‚œ ìƒíƒœì´ì§€ë§Œ, í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ì„œ &lt;strong&gt;Actions - Run pipeline&lt;/strong&gt; ë‹¨ê³„ë¥¼ ê±°ì¹˜ë©´,
ec2 ì½˜ì†”ì—ì„œ image buildë¥¼ ìœ„í•œ builder ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ê³  ì¢…ë£Œë˜ëŠ” ê²ƒì„ ê³¼ì •ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/imagebuilder/imgconsole.png&quot; alt=&quot;console&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;3ï¸âƒ£-review&quot;&gt;3ï¸âƒ£ Review&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;EC2 - Images - AMIs&lt;/strong&gt;ì—ì„œ ìƒˆë¡­ê²Œ ìƒì„±ëœ AMI í™•ì¸&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;EC2 - Launch templates&lt;/strong&gt;ì—ì„œ ìƒˆë¡­ê²Œ ë²„ì „ì´ ì˜¬ë¼ê°„ lt í™•ì¸, ì—¬ê¸°ì„œ Versions ì •ë³´ë¥¼ ëˆ„ë¥´ë©´ Image Builderê°€ ìƒì„±í•œ Descriptionì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
&lt;img src=&quot;../../assets/built/images/post/imagebuilder/version.png&quot; alt=&quot;version&quot; /&gt;&lt;/li&gt;
  &lt;li&gt;ì œëŒ€ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ê¸°ì¡´ì˜ EC2 í•˜ë‚˜ë¥¼ ì¢…ë£Œì‹œí‚¤ë©´, ì €ì˜ ê²½ìš° ASGì˜ Desiredê°€ 2ë¡œ ì„¤ì •í–ˆìœ¼ë¯€ë¡œ í•˜ë‚˜ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒˆë¡œìš´ ë²„ì „ìœ¼ë¡œ ë³€ê²½ë©ë‹ˆë‹¤.
ì´ëŠ” &lt;strong&gt;EC2 - Auto Scaling groups&lt;/strong&gt;ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
&lt;img src=&quot;../../assets/built/images/post/imagebuilder/asg.png&quot; alt=&quot;asg&quot; /&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;4ï¸âƒ£-clean-up&quot;&gt;4ï¸âƒ£ Clean Up&lt;/h3&gt;

&lt;p&gt;ë¶„í•´ëŠ” ì¡°ë¦½ì˜ ì—­ìˆœìœ¼ë¡œ?! 2ï¸âƒ£ -&amp;gt; 1ï¸âƒ£ -&amp;gt; 0ï¸âƒ£ ì—­ìˆœìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ ì •ë¦¬í•˜ê³  3ï¸âƒ£ Review í•­ëª©ì„ ì ê²€í•˜ì—¬ ëª¨ë“  ë¦¬ì†ŒìŠ¤ê°€ íšŒìˆ˜ë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;outro&quot;&gt;Outro&lt;/h2&gt;

&lt;p&gt;ì§€ê¸ˆê¹Œì§€ ê°ì¢… ì´ì•¼ê¸° ê±°ë¦¬ë“¤ê³¼ EC2 Image Builderë¥¼ ì‚¬ìš©í•˜ë©° Immutable Server Patternì„ í•™ìŠµí•´ ë³´ì•˜ìŠµë‹ˆë‹¤.
ê³¼ê±° ì œê°€ Packerë¡œ ê´€ë ¨ í™˜ê²½ì„ êµ¬ì¶•í•œ ì ì´ ìˆëŠ”ë°, ì—­ì‹œ AWS í™˜ê²½ì—ì„œëŠ” AWSì˜ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²Œ ì—°ê³„ë„ ìš©ì´í•˜ê³  êµ¬ì¶•ë„ ì‰½ë„¤ìš”.&lt;/p&gt;

&lt;p&gt;ì†Œì¤‘í•œ ì‹œê°„ì„ ë‚´ì–´ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ì˜ëª»ëœ ë‚´ìš©ì€ ì§€ì í•´ ì£¼ì„¸ìš”! ğŸ˜ƒ&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ğŸ“š References&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ê¸€ ì¤‘ê°„ì¤‘ê°„ í•˜ì´í¼ ë§í¬ë¡œ Reference ë“¤ì„ ë‹¬ì•„ë‘ì—ˆìŠµë‹ˆë‹¤.
íŠ¹íˆ, ì´ë²ˆ í¬ìŠ¤íŒ… ë ˆí¼ëŸ°ìŠ¤ë“¤ì€ ì¢‹ì€ ë‚´ìš©ë“¤ì´ ë§ìœ¼ë‹ˆ ì›ë³¸ë“¤ì„ ì½ì–´ë³´ì‹œê³  ë‹¹ì‹œ ì œê°€ ëŠë‚€ ê¸°ì¨ë“¤ì„ í•¨ê»˜ ëŠë‚„ìˆ˜ ìˆìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;</content>

      
      
      
      
      

      <author>
          <name>Heuristic Wave</name>
        
        
      </author>

      

      
        <category term="aws" />
      
        <category term="devops" />
      

      
        <summary type="html">ë³¸ ê¸€ì€ 2021ë…„ 4ì›” 30ì¼ EC2 Image Builder supports Auto Scaling launch templateì— ì†Œê°œëœ ê¸°ëŠ¥ì„ í™œìš©í•´ Image Builderë¡œ Golden AMIë¥¼ ë§Œë“¤ê³ , í•´ë‹¹ ì´ë¯¸ì§€ë¡œ Auto Scaling Groupì˜ launch templateì„ ì—…ë°ì´íŠ¸í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤.</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">AWS CDK Library, Construct Hub</title>
      <link href="https://heuristicwave.github.io/ConstructHub" rel="alternate" type="text/html" title="AWS CDK Library, Construct Hub" />
      <published>2021-12-21T00:00:00+00:00</published>
      <updated>2021-12-21T00:00:00+00:00</updated>
      <id>https://heuristicwave.github.io/ConstructHub</id>
      <content type="html" xml:base="https://heuristicwave.github.io/ConstructHub">&lt;p&gt;ë³¸ ê¸€ì€ ì§€ë‚œ AWS re:Invent 2021ì—ì„œ ë°œí‘œëœ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Construct Hub&lt;/code&gt;ë¥¼ ë‘˜ëŸ¬ë³´ë©° ëŠë‚€ ì²«ì¸ìƒì— ëŒ€í•œ ê¸€ì…ë‹ˆë‹¤.&lt;/p&gt;

&lt;h1 id=&quot;intro&quot;&gt;Intro&lt;/h1&gt;

&lt;p&gt;&lt;a href=&quot;https://youtu.be/8_Xs8Ik0h1w?t=4666&quot;&gt;AWS re:Invent 2021, ì•„ë§ˆì¡´ CTOì¸ Dr. Werner Vogels í‚¤ë…¸íŠ¸&lt;/a&gt;ì—ì„œ
AWS CDK ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì„ í™œìš©í•  ìˆ˜ ìˆëŠ” &lt;a href=&quot;https://constructs.dev/&quot;&gt;Construct Hub&lt;/a&gt;ê°€ ë°œí‘œë˜ì—ˆìŠµë‹ˆë‹¤.
ë³´í†µ AWS ë¦¬ì¸ë²¤íŠ¸ì—ì„œëŠ” AWS ê³ ìœ ì˜ ì„œë¹„ìŠ¤ë“¤ì´ ì†Œê°œë˜ëŠ”ë°ìš”,
ì´ë²ˆì— ë§ì”€ë“œë¦´ Construct HubëŠ” AWSì˜ ì†”ë£¨ì…˜ì´ ì•„ë‹Œ ì˜¤í”ˆ ì†ŒìŠ¤ ì»¤ë®¤ë‹ˆí‹°ì´ì,
&lt;strong&gt;CDK ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê²€ìƒ‰í•˜ê³  ê³µìœ í•  ìˆ˜ ìˆëŠ” ì¥&lt;/strong&gt;ì´ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
Construct Hubë¥¼ í†µí•´ AWSê°€ ê·¸ë¦¬ëŠ” IaC(Infrastructure as Code)ì˜ ë¯¸ë˜ë¥¼ í•¨ê»˜ ë§Œë‚˜ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ìš°ì„ , Construct Hubë¥¼ ì†Œê°œí•˜ê¸° ì•ì„œ AWSì˜ IaC ë„êµ¬ë“¤ì— ëŒ€í•˜ì—¬ ê°„ëµí•˜ê²Œ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ï¸-aws-cloudformation&quot;&gt;ï¸ğŸ“‚ AWS CloudFormation&lt;/h2&gt;

&lt;p&gt;2011ë…„ AWSì˜ ë¦¬ì†ŒìŠ¤ë¥¼ JSON ë˜ëŠ” YAML í˜•ì‹ìœ¼ë¡œ ì¸í”„ë¼ë¥¼ í…œí”Œë¦¿í™” í•  ìˆ˜ ìˆëŠ” CloudFormationì„ ë°œí‘œí–ˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ì˜ˆ) AWS S3 ë²„í‚· ë¦¬ì†ŒìŠ¤ë¥¼ ì œì–´í•˜ëŠ” CloudFormation ì½”ë“œ&lt;/p&gt;
  &lt;pre&gt;&lt;code class=&quot;language-YAML&quot;&gt;Resources:
  HelloBucket:
    Type: AWS::S3::Bucket
    Properties:
      AccessControl: PublicRead
      WebsiteConfiguration:
        IndexDocument: index.html
        ErrorDocument: error.html
&lt;/code&gt;&lt;/pre&gt;
&lt;/blockquote&gt;

&lt;p&gt;ê·¸ëŸ¬ë‚˜, ì¸í”„ë¼ê°€ ë³µì¡í•´ì§ˆìˆ˜ë¡ CloudFormation ì½”ë“œì˜ ê¸¸ì´ë„ ê¸¸ì–´ì§€ê³  ë¦¬ì†ŒìŠ¤ ê°„ì˜ ê´€ê³„ë„ íŒŒì•…í•˜ê¸° ì–´ë ¤ì›Œ ê´€ë¦¬ì˜ í”¼ë¡œë„ê°€ ì¦ê°€í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
AWSëŠ” ì´ëŸ¬í•œ CloudFormationì˜ ì•½ì ì„ ë³´ì™„í•˜ê³  ê°œë°œìë“¤ì´ YAML í˜•ì‹ìœ¼ë¡œ ì¸í”„ë¼ë¥¼ ì •ì˜í•˜ëŠ” ê²Œ ì•„ë‹ˆë¼,
&lt;strong&gt;ì„ í˜¸í•˜ëŠ” í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë¡œ í´ë¼ìš°ë“œ ì¸í”„ë¼ë¥¼ ì •ì˜í•  ìˆ˜ ìˆë„ë¡ Cloud Development Kit(CDK)&lt;/strong&gt; ë¥¼ 2019ë…„ì— ì •ì‹ìœ¼ë¡œ ì¶œì‹œí–ˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ï¸-aws-cloud-development-kit&quot;&gt;âŒ¨ï¸ AWS Cloud Development Kit&lt;/h2&gt;

&lt;p&gt;CDKëŠ” ìµìˆ™í•œ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë¥¼ ì‚¬ìš©í•´ í´ë¼ìš°ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¦¬ì†ŒìŠ¤ë¥¼ ì •ì˜í•  ìˆ˜ ìˆëŠ” ì˜¤í”ˆ ì†ŒìŠ¤ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤.
CDKëŠ” ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ, ì•ì„œ ì–¸ê¸‰ëœ CloudFormationì˜ ì•½ì ë“¤ì„ ë³´ì™„í•˜ëŠ”ì§€ ê·¸ë¦¼ê³¼ í•¨ê»˜ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/construct/cdk.png&quot; alt=&quot;cdk&quot; /&gt;&lt;/p&gt;

&lt;p&gt;CDKëŠ” &lt;strong&gt;Construct&lt;/strong&gt;ì˜ ì§‘í•©ì²´ë¼ ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
&lt;strong&gt;Construct&lt;/strong&gt;ëŠ” í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ë¥¼ ì´ë£¨ëŠ” ì»´í¬ë„ŒíŠ¸ë¼ ìƒê°í•˜ì…”ë„ ì¢‹ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;CDK í”„ë ˆì„ì›Œí¬ë¥¼ í†µí•´ ê°œë°œì í˜¹ì€ í´ë¼ìš°ë“œ ìš´ì˜ìëŠ” íƒ€ì…ìŠ¤í¬ë¦½íŠ¸, íŒŒì´ì¬, ë‹·ë„·, ìë°” ë“±ì˜ ìµìˆ™í•œ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ ì¤‘
í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì—¬, construct ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ í”„ë¡œê·¸ë˜ë° í•©ë‹ˆë‹¤.
í•˜ë‚˜ì˜ Stackìœ¼ë¡œ ì—®ì–´ì§„ ì†ŒìŠ¤ì½”ë“œë¥¼ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cdk synth&lt;/code&gt; ë¼ëŠ” ëª…ë ¹ì–´ë¡œ CloudFormationì—ì„œ ì‚¬ìš©ë˜ëŠ” í…œí”Œë¦¿ìœ¼ë¡œ ë³€í™˜í•˜ê³  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cdk deploy&lt;/code&gt; ëª…ë ¹ì–´ë¡œ ì¸í”„ë¼ë¥¼ ë°°í¬í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;CDKë¡œ ì‘ì„±ëœ ì¸í”„ë¼ ì½”ë“œëŠ” í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì˜ ì´ì ì„ ê·¸ëŒ€ë¡œ ì±„íƒí•˜ì—¬,
í•´ë‹¹ ì–¸ì–´ì— ìµìˆ™í•œ ì‚¬ëŒì´ë¼ë©´ YAMLë¡œ ì‘ì„±ëœ CloudFormation ë³´ë‹¤ ì¸í”„ë¼ì˜ í™˜ê²½ì„ íŒŒì•…í•˜ê¸° ì‰½ìŠµë‹ˆë‹¤.
ì‹¤ì œë¡œ ì˜¬í•´ í‚¤ë…¸íŠ¸ì— ì–¸ê¸‰ëœ &lt;a href=&quot;https://youtu.be/8_Xs8Ik0h1w?t=4872&quot;&gt;Liberty Mutual INSURANCEì‚¬ì˜ CDK ë„ì… ì‚¬ë¡€&lt;/a&gt;ì—ì„œ
1500ë¼ì¸ì˜ CloudFormation ì½”ë“œë¥¼ CDKì—ì„œ ë‹¨ 14ì¤„ë¡œ êµ¬í˜„í•˜ë©° CDKì˜ ë›°ì–´ë‚œ ê°€ì‹œì„±ì„ ì•Œë ¸ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/construct/cdk2.png&quot; alt=&quot;cdk_migration&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;-construct-hub&quot;&gt;ğŸ—‚ Construct Hub&lt;/h2&gt;

&lt;p&gt;ëŒ€ë§ì˜ Construct Hubë¥¼ ì†Œê°œí•˜ê¸° ìœ„í•´ ë¨¼ ê¸¸ì„ ëŒì•„ì™”ìŠµë‹ˆë‹¤.ğŸ˜“
ë§¨ ì²˜ìŒì— Construct Hubë¥¼ ì˜¤í”ˆ ì†ŒìŠ¤ ì»¤ë®¤ë‹ˆí‹°ì´ì, CDK ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê²€ìƒ‰í•˜ê³  ê³µìœ í•  ìˆ˜ ìˆëŠ” ì¥ì´ë¼ê³  ì†Œê°œí•œ ë§ì´ ë§ëŠ”ì§€ ê·¸ë¦¼ê³¼ í•¨ê»˜ í™•ì¸í•´ ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/construct/hub1.png&quot; alt=&quot;construct_hub&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://constructs.dev/&quot;&gt;Construct Hub&lt;/a&gt;ì˜ ë©”ì¸ í™ˆí˜ì´ì§€ë¥¼ í™•ì¸í•´ ë³´ë©´ CDK ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê²€ìƒ‰í•  ìˆ˜ ìˆëŠ”
â€˜ì„œì¹˜ ë°”â€™ì™€ í˜„ì¬ â€˜ì§€ì›í•˜ëŠ” ì–¸ì–´â€™ì™€ â€˜ì„œë¹„ìŠ¤ í”„ë¡œë°”ì´ë”â€™(AWS, Datadog, Mongo DB, Aqua Security ë“±)ê°€ ë³´ì…ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì´ ì¤‘ì—ì„œë„ í™”ë©´ ì™¼ìª½ì— ìœ„ì¹˜í•œ ë‹¤ì–‘í•œ CDKë“¤ì˜ ì¢…ë¥˜ì— ëŒ€í•´ ê¶ê¸ˆì¦ì´ ìƒê¸°ì‹¤ ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì•ì„œ ì†Œê°œí•œ AWS CDKëŠ” í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë¡œ ì‘ì„±í•œ ì¸í”„ë¼ ì½”ë“œë¥¼ Cloudformationìœ¼ë¡œ í…œí”Œë¦¿ì„ ìƒì„±í–ˆìŠµë‹ˆë‹¤.
ì´ì²˜ëŸ¼ CDKê°€ ìƒì„±í•˜ëŠ” í…œí”Œë¦¿ì´ AWS Cloudformationìœ¼ë¡œ í™œìš© ê°€ëŠ¥í•˜ë„ë¡ í•˜ëŠ” ê²ƒì„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;AWS CDK&lt;/code&gt;,
ì¿ ë²„ë„¤í‹°ìŠ¤ë¡œ í™œìš© ê°€ëŠ¥í•˜ë„ë¡ í•˜ëŠ” ê²ƒì„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CDK8s&lt;/code&gt;, í…Œë¼í¼ìœ¼ë¡œ í™œìš© ê°€ëŠ¥í•˜ë„ë¡ í•˜ëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CDKtf&lt;/code&gt;ë¼ê³  í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/construct/cdk3.png&quot; alt=&quot;cdk_type&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ìœ„ì™€ ê°™ì´ í˜„ì¬ 3ê°€ì§€ Typeì„ ì§€ì›í•˜ê³  ìˆìœ¼ë©°, í–¥í›„ ë‹¤ë¥¸ ë„êµ¬ë“¤ë„ ì§€ì›í•  ê°€ëŠ¥ì„±ì´ ìˆë‹¤ê³  í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ë‹¤ìŒìœ¼ë¡œëŠ” Construct Hubì— ë“±ë¡ëœ ë‹¤ì–‘í•œ Construct ê²€ìƒ‰ ê²°ê³¼ì…ë‹ˆë‹¤. 
í˜„ì¬ëŠ” ëŒ€ë¶€ë¶„ ConstructëŠ” Hahicorp, Datadogê³¼ ê°™ì€ í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ Publisher ë“¤ì´ ì°¸ì—¬í–ˆì§€ë§Œ,
ê°œì¸ë„ &lt;a href=&quot;https://aws.github.io/jsii/&quot;&gt;JSII&lt;/a&gt; (CDKê°€ ë‹¤ì¤‘ ì–¸ì–´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì œê³µí•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê¸°ìˆ )
ê¸°ë°˜ì˜ constructë¥¼ ë§Œë“¤ê³  aws-cdk, cdk8s, cdktf ë“±ì˜ í‚¤ì›Œë“œì™€ í•¨ê»˜ npm ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ê³µê°œë˜ì–´ ìˆë‹¤ë©´ ì•½ 30ë¶„ ë‚´ì— &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Construct Hub&lt;/code&gt;ì—ë„ ê°œì‹œëœë‹¤ê³  í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/construct/hub2.png&quot; alt=&quot;construct_hub2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;í™”ë©´ì— ë³´ì´ëŠ” íŠ¹ì´ì ìœ¼ë¡œëŠ” HashiCorpê°€ ì œê³µí•˜ëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CDKtf&lt;/code&gt;ë¥¼ í†µí•´,
ë‹¤ë¥¸ í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ë“¤ê³¼ í†µí•©í•˜ì—¬ AWS ì„œë¹„ìŠ¤ ë§Œì´ ì•„ë‹Œ &lt;strong&gt;ëª¨ë“  í´ë¼ìš°ë“œë¥¼ CDKë¡œ ì œì–´ ê°€ëŠ¥&lt;/strong&gt;í•˜ê²Œ í•˜ë ¤ëŠ” í° ê·¸ë¦¼ì„ ê·¸ë ¤ë‚˜ê°€ê³  ìˆë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;outro&quot;&gt;Outro&lt;/h2&gt;

&lt;p&gt;ì§€ê¸ˆê¹Œì§€ Construct Hubë¥¼ ê°„ë‹¨í•˜ê²Œ ì‚´í´ë³´ë©°, AWS IaC ë„êµ¬ë“¤ì˜ ë³€ì²œì‚¬ì™€ AWSê°€ ê·¸ë¦¬ëŠ” IaCì˜ ë¯¸ë˜ë¥¼ ì—¿ë³¼ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ê·¸ì¤‘ì—ì„œë„ í¥ë¯¸ë¡œì› ë˜ ìš”ì†Œë“¤ì€ ë‹¤ìŒ 2ê°€ì§€ë¡œ ë§ì”€ë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;IaCë¥¼ ë„ì…í•œ ì¡°ì§ì˜ ê²½ìš°, Terraform, Ansible ë“± ì—¬ëŸ¬ IaC ë„êµ¬ë¥¼ ê°ê°ì˜ IaC ë„êµ¬ë“¤ì˜ íŠ¹ì„±ì— ë§ê²Œ ë³µí•©ì ìœ¼ë¡œ ìš´ì˜í•©ë‹ˆë‹¤. CDKê°€ ë‹¤ë°©ë©´ìœ¼ë¡œ IaC ë„êµ¬ë¥¼ ì§€ì›(AWS CDK, CDK8s, CDKtf) í•˜ê²Œ ë§Œë“¤ì–´ ê´€ë¦¬ ë³µì¡ë„ë¥¼ ì¤„ì´ë ¤ëŠ” ë…¸ë ¥ì´ í¥ë¯¸ë¡­ìŠµë‹ˆë‹¤.&lt;/li&gt;
  &lt;li&gt;CDKtfë¥¼ í†µí•´, íƒ€ í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ë¥¼ CDKë¡œ ì œì–´í•˜ê²Œ ëœë‹¤ëŠ” ì ì´ í¥ë¯¸ë¡­ìŠµë‹ˆë‹¤.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ì‚¬ì‹¤ CDK8s, CDKtf ëª¨ë‘ Construct Hubê°€ ë‚˜ì˜¤ê¸° ì´ì „ë¶€í„° ì¡´ì¬í–ˆì§€ë§Œ, Construct Hubì— ê°œì‹œëœ ë¬¸ì„œë“¤ì„ ë³´ë‹ˆ ë” í¥ë¯¸ë¡­ê²Œ ë‹¤ê°€ì˜µë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì•„ì§ ì„¸ìƒì— ì•Œë ¤ì§„ì§€ ì–¼ë§ˆ ë˜ì§€ ì•Šì€ Construct Hubë¥¼ í™œìš©í•˜ê¸°ì—ëŠ” ì–´ë ¤ì›€ì´ ìˆì§€ë§Œ, ëˆ„êµ¬ë‚˜ Construct Hubì— ê¸°ì—¬í•  ìˆ˜ ìˆëŠ” ì˜¤í”ˆì†ŒìŠ¤ ìƒíƒœê³„ë¥¼ êµ¬ì¶•í•œ ë§Œí¼ ë¹ ë¥¸ ì„±ì¥ì´ ê¸°ëŒ€ë©ë‹ˆë‹¤. Construct Hubê°€ ê¸°ì—¬í•  IaC ë¯¸ë˜ì— ê¸ì •ì ì¸ ê¸°ëŒ€ë¥¼ ê±¸ì–´ë´…ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì†Œì¤‘í•œ ì‹œê°„ì„ ë‚´ì–´ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ì˜ëª»ëœ ë‚´ìš©ì€ ì§€ì í•´ì£¼ì„¸ìš”! ğŸ˜ƒ&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h3 id=&quot;-references&quot;&gt;ğŸ“š References&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://aws.amazon.com/ko/about-aws/whats-new/2021/12/aws-construct-hub-availability/&quot;&gt;AWS Construct Hub availability&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://constructs.dev/&quot;&gt;Construct Hub&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;</content>

      
      
      
      
      

      <author>
          <name>Heuristic Wave</name>
        
        
      </author>

      

      
        <category term="aws" />
      

      
        <summary type="html">ë³¸ ê¸€ì€ ì§€ë‚œ AWS re:Invent 2021ì—ì„œ ë°œí‘œëœ Construct Hubë¥¼ ë‘˜ëŸ¬ë³´ë©° ëŠë‚€ ì²«ì¸ìƒì— ëŒ€í•œ ê¸€ì…ë‹ˆë‹¤.</summary>
      

      
      
    </entry>
  
</feed>
