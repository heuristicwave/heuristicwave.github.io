<!DOCTYPE html>
<html>
<head>

    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Base Meta -->
    <!-- dynamically fixing the title for tag/author pages -->



    <title>Amazon Nova Vision 기능 모델 증류 하기: Fine-Tuning Text-Image-to-Text</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.edited.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/syntax.css" />

    <!-- Custom.css -->
    <link rel="stylesheet" type="text/css" href="/assets/built/custom.css" />
    
    <!-- Inline Dark Theme CSS for immediate effect -->
    <style>
    /* Dark Theme Styles */
    [data-theme="dark"] body {
        background-color: #15171a !important;
        color: #ffffff !important;
    }
    
    [data-theme="dark"] .site-main {
        background-color: #15171a !important;
        color: #ffffff !important;
    }
    
    [data-theme="dark"] .post-card {
        background-color: #2a2d32 !important;
        border-color: #2a2d32 !important;
        color: #ffffff !important;
    }
    
    [data-theme="dark"] .post-card-title,
    [data-theme="dark"] .post-card-excerpt,
    [data-theme="dark"] .post-card-content-link,
    [data-theme="dark"] h1, [data-theme="dark"] h2, [data-theme="dark"] h3, 
    [data-theme="dark"] h4, [data-theme="dark"] h5, [data-theme="dark"] h6,
    [data-theme="dark"] p, [data-theme="dark"] span, [data-theme="dark"] div {
        color: #ffffff !important;
    }
    
    [data-theme="dark"] .post-full-content {
        background-color: #15171a !important;
        color: #ffffff !important;
    }
    
    [data-theme="dark"] .post-template .site-main,
    [data-theme="dark"] .page-template .site-main {
        background-color: #15171a !important;
    }
    
    /* 포스트 카드 메타 영역 - 카드와 동일한 배경색 */
    [data-theme="dark"] .post-card-meta {
        background-color: #2a2d32 !important;
        color: #ffffff !important;
        border-top: 1px solid #3a3d42 !important;
        margin: 0 !important;
        padding: 15px 25px !important;
    }
    
    /* 작성자 정보 통일감 있게 조정 - 더 구체적인 선택자 */
    [data-theme="dark"] .post-card-author,
    [data-theme="dark"] .author-card-name,
    [data-theme="dark"] .author-card-name a,
    [data-theme="dark"] .post-full-meta,
    [data-theme="dark"] .post-full-meta-date,
    [data-theme="dark"] .post-card-meta .post-card-author,
    [data-theme="dark"] .post-card-meta a {
        color: #ffffff !important;
    }
    
    /* 읽기 시간 정보 - 흰색으로 통일 */
    [data-theme="dark"] .reading-time {
        color: #ffffff !important;
    }
    
    /* 태그 정보 */
    [data-theme="dark"] .post-card-tags {
        color: #c5d2d9 !important;
    }
    
    /* 작성자 프로필 이미지 테두리 */
    [data-theme="dark"] .author-profile-image {
        border: 2px solid #3a3d42 !important;
    }
    
    /* 포스트 메타 정보 전체 - 카드와 완전히 통일 */
    [data-theme="dark"] .post-card-meta,
    [data-theme="dark"] .post-card-meta *:not(a) {
        background-color: #2a2d32 !important;
        color: #ffffff !important;
    }
    
    /* 메타 영역의 모든 하위 요소들 */
    [data-theme="dark"] .post-card-meta *,
    [data-theme="dark"] .post-card-meta .post-card-author,
    [data-theme="dark"] .post-card-meta .reading-time,
    [data-theme="dark"] .post-card-meta span,
    [data-theme="dark"] .post-card-meta div {
        background-color: #2a2d32 !important;
        color: #ffffff !important;
    }
    
    /* 메타 영역의 링크들 */
    [data-theme="dark"] .post-card-meta a {
        background-color: #2a2d32 !important;
        color: #ffffff !important;
    }
    
    /* 메타 영역 구분선 스타일 */
    [data-theme="dark"] .post-card-meta {
        position: relative;
        border-radius: 0 0 8px 8px !important;
    }
    
    [data-theme="dark"] .post-card-meta::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background-color: #3a3d42;
    }
    
    /* 카테고리/태그 링크 */
    [data-theme="dark"] .post-card-tags a,
    [data-theme="dark"] .tag {
        color: #3eb0ef !important;
    }
    
    /* 댓글 시스템 스타일 개선 */
    [data-theme="dark"] .post-full-comments,
    [data-theme="dark"] .post-full-comments * {
        background-color: #15171a !important;
        color: #ffffff !important;
    }
    
    /* 댓글 입력 폼 */
    [data-theme="dark"] .post-full-comments input,
    [data-theme="dark"] .post-full-comments textarea,
    [data-theme="dark"] .post-full-comments button {
        background-color: #2a2d32 !important;
        color: #ffffff !important;
        border: 1px solid #3a3d42 !important;
    }
    
    /* 라이트 모드에서 댓글 부분 수정 */
    [data-theme="light"] .post-full-comments,
    [data-theme="light"] .post-full-comments *,
    body:not([data-theme="dark"]) .post-full-comments,
    body:not([data-theme="dark"]) .post-full-comments * {
        background-color: #ffffff !important;
        color: #15171a !important;
    }
    
    /* 더 구체적인 작성자 정보 선택자들 */
    [data-theme="dark"] .post-card-meta .post-card-author,
    [data-theme="dark"] .post-card-meta a[href*="author"],
    [data-theme="dark"] .post-card-meta span,
    [data-theme="dark"] .author-list .author-card-name,
    [data-theme="dark"] .byline-meta .author,
    [data-theme="dark"] .author-meta,
    [data-theme="dark"] .post-meta .author {
        color: #ffffff !important;
    }
    
    /* 읽기 시간 더 구체적으로 */
    [data-theme="dark"] .post-card-meta .reading-time,
    [data-theme="dark"] .reading-time,
    [data-theme="dark"] .post-meta .reading-time,
    [data-theme="dark"] [class*="reading"],
    [data-theme="dark"] [class*="min-read"] {
        color: #ffffff !important;
    }
    
    /* 모든 메타 정보를 강제로 흰색 처리 */
    [data-theme="dark"] .post-card-meta > *,
    [data-theme="dark"] .post-card-meta span,
    [data-theme="dark"] .post-card-meta div,
    [data-theme="dark"] .post-card-meta a:not([href*="tag"]) {
        color: #ffffff !important;
    }
    
    /* 전역적으로 모든 텍스트를 흰색으로 (네비게이션 제외) */
    [data-theme="dark"] body *:not(.site-nav *):not(.site-header *) {
        color: #ffffff !important;
    }
    
    /* 링크는 파란색으로 */
    [data-theme="dark"] a:not(.site-nav a):not(.site-header a) {
        color: #3eb0ef !important;
    }
    
    /* Copy 버튼 숨기기 */
    .copy-button,
    .copy-btn,
    [class*="copy"],
    button[title*="Copy"],
    button[aria-label*="Copy"],
    .highlight .copy,
    pre .copy,
    code .copy,
    .code-toolbar .toolbar,
    .code-toolbar .toolbar-item {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
    }
    
    /* 일반적인 Copy 텍스트가 포함된 요소들 숨기기 */
    *[class*="copy"]:not(.copyright),
    *[id*="copy"]:not(.copyright),
    button:contains("Copy"),
    span:contains("Copy -->"),
    div:contains("Copy -->") {
        display: none !important;
    }
    
    [data-theme="dark"] a:not(.site-nav a) {
        color: #3eb0ef !important;
    }
    
    /* Bold and Strong text - 더 밝은 색상으로 강조 */
    [data-theme="dark"] strong,
    [data-theme="dark"] b,
    [data-theme="dark"] .post-full-content strong,
    [data-theme="dark"] .post-full-content b {
        color: #ffffff !important;
        font-weight: 700 !important;
        text-shadow: 0 0 1px rgba(255, 255, 255, 0.3) !important;
    }
    
    /* Inline code blocks - 배경색과 테두리로 구분 */
    [data-theme="dark"] code,
    [data-theme="dark"] .post-full-content code {
        background-color: #2a2d32 !important;
        color: #a4d037 !important; /* 연두색으로 강조 */
        border: 1px solid #3a3d42 !important;
        padding: 2px 6px !important;
        border-radius: 4px !important;
        font-weight: 500 !important;
    }
    
    /* Pre code blocks - 더 어두운 배경 */
    [data-theme="dark"] pre,
    [data-theme="dark"] .post-full-content pre {
        background-color: #1a1d20 !important;
        border: 1px solid #3a3d42 !important;
        color: #ffffff !important;
    }
    
    [data-theme="dark"] pre code,
    [data-theme="dark"] .post-full-content pre code {
        background-color: transparent !important;
        border: none !important;
        color: #ffffff !important;
        padding: 0 !important;
    }
    
    /* Emphasis and italic text */
    [data-theme="dark"] em,
    [data-theme="dark"] i,
    [data-theme="dark"] .post-full-content em,
    [data-theme="dark"] .post-full-content i {
        color: #c5d2d9 !important;
        font-style: italic !important;
    }
    
    /* Blockquotes - 좌측 보더와 배경으로 구분 */
    [data-theme="dark"] blockquote,
    [data-theme="dark"] .post-full-content blockquote {
        background-color: #1f2124 !important;
        border-left: 4px solid #3eb0ef !important;
        color: #c5d2d9 !important;
        padding: 15px 20px !important;
        margin: 20px 0 !important;
        border-radius: 0 4px 4px 0 !important;
    }
    
    [data-theme="dark"] blockquote p,
    [data-theme="dark"] .post-full-content blockquote p {
        color: #c5d2d9 !important;
    }
    
    /* Lists - 리스트 마커 색상 */
    [data-theme="dark"] ul,
    [data-theme="dark"] ol,
    [data-theme="dark"] li {
        color: #ffffff !important;
    }
    
    /* Tables - 테이블 스타일 개선 */
    [data-theme="dark"] table,
    [data-theme="dark"] .post-full-content table {
        background-color: #2a2d32 !important;
        border: 1px solid #3a3d42 !important;
    }
    
    [data-theme="dark"] th,
    [data-theme="dark"] td,
    [data-theme="dark"] .post-full-content th,
    [data-theme="dark"] .post-full-content td {
        background-color: #2a2d32 !important;
        border: 1px solid #3a3d42 !important;
        color: #ffffff !important;
    }
    
    [data-theme="dark"] th,
    [data-theme="dark"] .post-full-content th {
        background-color: #1f2124 !important;
        font-weight: 700 !important;
    }
    
    /* Horizontal rules */
    [data-theme="dark"] hr {
        border-color: #3a3d42 !important;
        background-color: #3a3d42 !important;
    }
    
    /* Mark/highlight text */
    [data-theme="dark"] mark {
        background-color: #fecd35 !important;
        color: #15171a !important;
        padding: 2px 4px !important;
        border-radius: 2px !important;
    }
    
    /* Small text */
    [data-theme="dark"] small {
        color: #738a94 !important;
    }
    
    /* Theme Toggle Button Improvements */
    #theme-toggle {
        /* 다른 플로팅 요소들과 겹치지 않도록 */
        pointer-events: auto !important;
    }
    
    /* 플로팅 모드일 때만 적용되는 스타일 */
    #theme-toggle[data-mode="floating"] {
        /* 모바일에서 위치 조정 */
        @media (max-width: 768px) {
            top: 70px !important;
            right: 15px !important;
            width: 44px !important;
            height: 44px !important;
            font-size: 16px !important;
        }
        
        /* 태블릿에서 위치 조정 */
        @media (min-width: 769px) and (max-width: 1024px) {
            top: 75px !important;
            right: 20px !important;
        }
    }
    
    /* 네비게이션 모드 스타일 */
    .site-nav-right #theme-toggle {
        flex-shrink: 0;
    }
    
    /* 다크 테마에서 네비게이션 버튼 스타일 */
    [data-theme="dark"] .site-nav-right #theme-toggle {
        border-color: rgba(255, 255, 255, 0.3) !important;
        color: #fff !important;
    }
    
    [data-theme="dark"] .site-nav-right #theme-toggle:hover {
        border-color: rgba(255, 255, 255, 0.5) !important;
        background: rgba(255, 255, 255, 0.1) !important;
    }
    
    /* 플로팅 헤더와 겹치지 않도록 조정 */
    .floating-header {
        z-index: 9998 !important;
    }
    
    /* 공유 버튼들과 겹치지 않도록 */
    .floating-header-share {
        z-index: 9997 !important;
    }
    
    /* 스크롤 시 테마 토글 버튼 위치 조정 */
    body.floating-active #theme-toggle {
        top: 120px !important;
        transition: top 0.3s ease !important;
    }
    </style>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- webfont -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/earlyaccess/nanumgothic.css">

    <!-- syntax.css -->
    <link rel="stylesheet" type="text/css" href="/assets/built/syntax.css" />

    <!-- highlight.js -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>

    <!--[if IE]>
        <style>
            p, ol, ul{
                width: 100%;
            }
            blockquote{
                width: 100%;
            }
        </style>
    <![endif]-->
    
    <!-- This tag outputs SEO meta+structured data and other important settings -->
    <meta name="description" content="Careful Writer" />
    <link rel="shortcut icon" href="https://heuristicwave.github.io/assets/built/images/water-wave-48.png" type="image/png" />
    <link rel="canonical" href="https://heuristicwave.github.io/Fine-tuning-Nova" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

     <!--title below is coming from _includes/dynamic_title-->
    <meta property="og:site_name" content="Heuristic Wave Blog" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Amazon Nova Vision 기능 모델 증류 하기: Fine-Tuning Text-Image-to-Text" />
    <meta property="og:description" content="이 포스팅에서는 Amazon Nova Pro Model의 Vision 성능을 Lite Model에 효과적으로 전달하기 위한 Text-Image-to-Text 미세 조정 방법을 소개합니다. 본격적인 내용에 들어가기에 앞서, 처음에는 Vision 분야의 Model Distillation(이하, 모델 증류) 기법을 직접 다루고자 했으나, 현재 Amazon Bedrock에서 이에 대한 직접적인 지원이 제한적이라는 점을 말씀드립니다. 이에 대안으로 “Fine-Tuning: Text-Image-to-Text” 방식을 활용하여 Vision" />
    <meta property="og:url" content="https://heuristicwave.github.io/Fine-tuning-Nova" />
    <meta property="og:image" content="https://heuristicwave.github.io/assets/built/images/background/AmazonNova.png" />
    <meta property="article:publisher" content="https://www.facebook.com/" />
    <meta property="article:author" content="https://www.facebook.com/" />
    <meta property="article:published_time" content="2025-05-05T00:00:00+00:00" />
    <meta property="article:modified_time" content="2025-05-05T00:00:00+00:00" />
    <meta property="article:tag" content="Aws" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Amazon Nova Vision 기능 모델 증류 하기: Fine-Tuning Text-Image-to-Text" />
    <meta name="twitter:description" content="이 포스팅에서는 Amazon Nova Pro Model의 Vision 성능을 Lite Model에 효과적으로 전달하기 위한 Text-Image-to-Text 미세 조정 방법을 소개합니다. 본격적인 내용에 들어가기에 앞서, 처음에는 Vision 분야의 Model Distillation(이하, 모델 증류) 기법을 직접 다루고자 했으나, 현재 Amazon Bedrock에서 이에 대한 직접적인 지원이 제한적이라는 점을 말씀드립니다. 이에 대안으로 “Fine-Tuning: Text-Image-to-Text” 방식을 활용하여 Vision" />
    <meta name="twitter:url" content="https://heuristicwave.github.io/" />
    <meta name="twitter:image" content="https://heuristicwave.github.io/assets/built/images/background/AmazonNova.png" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Heuristic Wave Blog" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Aws" />
    <meta name="twitter:site" content="@" />
    <meta name="twitter:creator" content="@" />
    <meta property="og:image:width" content="1400" />
    <meta property="og:image:height" content="933" />

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "Heuristic Wave Blog",
        "logo": "https://heuristicwave.github.io/"
    },
    "url": "https://heuristicwave.github.io/Fine-tuning-Nova",
    "image": {
        "@type": "ImageObject",
        "url": "https://heuristicwave.github.io/assets/built/images/background/AmazonNova.png",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://heuristicwave.github.io/Fine-tuning-Nova"
    },
    "description": "이 포스팅에서는 Amazon Nova Pro Model의 Vision 성능을 Lite Model에 효과적으로 전달하기 위한 Text-Image-to-Text 미세 조정 방법을 소개합니다. 본격적인 내용에 들어가기에 앞서, 처음에는 Vision 분야의 Model Distillation(이하, 모델 증류) 기법을 직접 다루고자 했으나, 현재 Amazon Bedrock에서 이에 대한 직접적인 지원이 제한적이라는 점을 말씀드립니다. 이에 대안으로 “Fine-Tuning: Text-Image-to-Text” 방식을 활용하여 Vision"
}
    </script>
    <script data-ad-client="ca-pub-6093187208665634" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <!-- <script type="text/javascript" src="https://demo.ghost.io/public/ghost-sdk.min.js?v=724281a32e"></script>
    <script type="text/javascript">
    ghost.init({
    	clientId: "ghost-frontend",
    	clientSecret: "f84a07a72b17"
    });
    </script> -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-0FTXSPJZFY"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-0FTXSPJZFY');
    </script>
    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="Amazon Nova Vision 기능 모델 증류 하기: Fine-Tuning Text-Image-to-Text" href="https://heuristicwave.github.io/feed.xml" />


</head>
<body class="post-template">

    <div class="site-wrapper">
        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template -->

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
        
            
                <a class="site-nav-logo" href="https://heuristicwave.github.io/">Heuristic Wave Blog</a>
            
        
        
            <ul class="nav" role="menu">
    <li class="nav-home" role="menuitem"><a href="/">Home</a></li>
    <li class="nav-about" role="menuitem"><a href="/about/">About</a></li>
    <li class="nav-extracurricular" role="menuitem"><a href="/tag/uncategorized/">Uncategorized</a></li>
    <li class="nav-aws" role="menuitem"><a href="/tag/ai/">AI</a></li>
    <li class="nav-aws" role="menuitem"><a href="/tag/aws/">AWS</a></li>
    <li class="nav-backend" role="menuitem"><a href="/tag/backend/">Back-end</a></li>
    <li class="nav-devops" role="menuitem"><a href="/tag/devops/">DevOps</a></li>
    <li class="nav-backend" role="menuitem"><a href="/tag/security/">Security</a></li>
    <li class="nav-archive" role="menuitem">
        <a href="/archive">All Posts</a>
    </li>
    <li class="nav-archive" role="menuitem">
        <a href="/author_archive.html">Tag별 Posts</a>
    </li>
</ul>

        
    </div>
    <div class="site-nav-right">
        <div class="social-links">
            
            
        </div>
        
            <a class="subscribe-button" href="#subscribe">Search</a>
        
    </div>
</nav>

    </div>
</header>

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full  tag-aws tag-genai post tag-ai ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime=" 5 May 2025"> 5 May 2025</time>
                    
                        <span class="date-divider">/</span>
                        
                            
                               <a href='/tag/aws/'>AWS</a>,
                            
                        
                            
                               <a href='/tag/genai/'>GENAI</a>
                            
                        
                    
                </section>
                <h1 class="post-full-title">Amazon Nova Vision 기능 모델 증류 하기: Fine-Tuning Text-Image-to-Text</h1>
            </header>

            
            <figure class="post-full-image" style="background-image: url(/assets/built/images/background/AmazonNova.png)">
            </figure>
            

            <section class="post-full-content">
                <div class="kg-card-markdown">
                    <p>이 포스팅에서는 Amazon Nova Pro Model의 Vision 성능을 Lite Model에 효과적으로 전달하기 위한 Text-Image-to-Text 미세 조정 방법을 소개합니다.</p>

<p>본격적인 내용에 들어가기에 앞서, 처음에는 Vision 분야의 Model Distillation(이하, 모델 증류) 기법을 직접 다루고자 했으나, 현재 Amazon Bedrock에서 이에 대한 직접적인 지원이 제한적이라는 점을 말씀드립니다. 이에 대안으로 “Fine-Tuning: Text-Image-to-Text” 방식을 활용하여 Vision 모델 증류를 우회적으로 구현하는 방법을 공유하고자 합니다.</p>

<h2 id="️-model-distillation"><a href="#distillation">⚗️ Model Distillation</a><a id="distillation"></a></h2>

<p>지난 2024년 re:Invent에서 Amazon Bedrock 생태계는 Fine-tuning과 Continued pre-training 외에도 <strong>Distillation</strong>이라는 새로운 모델 커스터마이제이션 기능을 제공하기 시작했습니다. 또 <a href="https://aws.amazon.com/ko/about-aws/whats-new/2025/04/amazon-nova-premier-complex-tasks-model-distillation/">최근(4월 30일)</a>에는 복잡한 작업들에 대한 모델 증류를 위한 교사 모델로 Amazon Nova Premier를 출시하기도 했습니다.</p>

<p>모델 증류는 대규모 교사 모델(Teacher Model)의 지식을 더 작은 학생 모델(Student Model)로 전달하는 기술로, 모델 크기와 연산 비용을 줄이면서도 성능을 최대한 유지할 수 있습니다.
Amazon Bedrock Model Distillation은 두 가지 주요 단계로 구성됩니다. 첫째, 훈련에 필요한 학습 데이터를 생성하는 과정과 둘째, 이렇게 만들어진 학습 데이터를 활용하여 교사 모델을 미세 조정함으로써 증류 모델을 생성하는 과정입니다.
<img src="../../assets/built/images/post/ai/Bedrock/modelDistillation.png" alt="Model Distillation" />
Bedrock은 현재 이미지 작업에 대한 모델 증류를 공식적으로 지원하지 않습니다. 그러나 증류 과정의 기본 원리를 이해하고 있다면, 교사 모델을 활용해 직접 훈련용 데이터를 생성하고 별도로 미세 조정을 수행함으로써 이미지 작업에 대한 모델 증류를 자체적으로 구현할 수 있습니다.</p>

<p><br /></p>

<h2 id="-과제-설정---image-labeling-작업-비교"><a href="#task">📸 과제 설정 - Image Labeling 작업 비교</a><a id="task"></a></h2>

<p>Vision Understanding 기능이 있는 멀티모달 모델은 주어진 이미지를 설명하는 <a href="https://huggingface.co/docs/transformers/en/tasks/image_captioning">Image Captioning</a> 기능을 탑재하고 있습니다.
이미지를 제공하고 원하는 스타일(촬영 기법, 분위기, 객체 등)에 대한 키워드 추출을 요청하면, 해당 이미지에 대한 관련 키워드를 받을 수 있습니다.</p>

<details>
  <summary>👉 Image Labeling Example Prompt 👈</summary>
  <div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>당신은 이미지 키워드 추출 전문가입니다. 이미지를 분석하여 검색에 최적화된 간결한 키워드를 추출해주세요.

다음 5가지 카테고리에 따라 키워드를 추출하되, 최종 결과는 카테고리 구분 없이 쉼표로 구분된 단일 목록으로 제공해주세요:

1. 주요 객체/인물: 인물(성별, 연령대, 민족성), 동물, 사물 등 핵심 요소
2. 위치/배경: 장소, 풍경, 환경(실내/외), 시간, 계절
3. 행동/감정: 활동을 설명하는 동사, 분위기를 나타내는 형용사
4. 시각적 특성: 주요 색상, 구도, 촬영 기법, 이미지 스타일
5. 맥락적 요소: 패션, 랜드마크, 문화적 맥락, 행사/축제 관련 정보

각 카테고리당 2-5개, 총 15-25개의 검색 최적화된 키워드를 제공해주세요. 중복을 피하고 간결하게 작성하세요.
</code></pre></div>  </div>
</details>

<p><img src="../../assets/built/images/post/ai/Bedrock/auto-labeling.png" alt="Image Labeling" /></p>

<p>위 표 이미지는 <a href="https://huggingface.co/datasets/ShutterstockInc/high_resolution_images"><code class="language-plaintext highlighter-rouge">ShutterstockInc/high_resolution_images</code> 데이터셋</a> 중 하나의 사진에 대해 Nova Pro와 Lite 모델로 Image Labeling을 진행한 결과입니다.
동일한 프롬프트를 사용하더라도 각 모델의 응답 결과가 매우 상이함을 확인할 수 있습니다. <strong>본 포스팅에서는 어느 모델이 Image Labeling 작업에 우위에 있는지를 판단하기보다는, Lite 모델이 Pro 모델과 유사한 답변을 도출하도록 하는 작업에 초점을 맞추었다는 점을 기억해주세요!</strong></p>

<p>두 모델의 답변 유사도를 파악하기 위해 공통적으로 제시한 교집합 부분의 자카드 지수(Jaccard index)를 측정한 결과, 0.129로 나타났습니다. 이제 Lite 모델을 Pro의 데이터로 미세 조정하여 두 모델 간의 응답값이 얼마나 유사해질 수 있는지 알아보겠습니다.</p>

<p><br /></p>

<h2 id="-vlm-모델-증류-자체-구현"><a href="#self-diatillation">🧑‍🔬 VLM 모델 증류 자체 구현</a><a id="self-diatillation"></a></h2>

<h3 id="데이터셋-준비-프로세스">데이터셋 준비 프로세스</h3>

<p>VLM 모델을 자체적으로 증류하기 위해 Text-Image-to-Text 방식의 미세 조정을 진행하겠습니다. 이를 위해 다음과 같은 4가지 단계로 미세 조정용 데이터 셋을 준비해야 합니다.
<img src="../../assets/built/images/post/ai/Bedrock/create_datasets.png" alt="Image Labeling" /></p>

<p><em>본 글에서는 VLM 모델 증류를 자체적으로 구현하기 위해 Hugging Face에 올라온 <a href="https://huggingface.co/datasets/ShutterstockInc/high_resolution_images"><code class="language-plaintext highlighter-rouge">ShutterstockInc/high_resolution_images</code>의 medium 데이터셋</a>을 활용하였습니다.</em></p>

<h4 id="1-이미지-전처리">1. 이미지 전처리</h4>

<p>이미지 전처리의 범주는 매우 광범위합니다. 여기서는 특정 작업에 적합한 분류가 완료되었다고 가정하고, 이미지 크기 조정에 관한 전처리만 다루겠습니다.
작업별로 요구되는 해상도는 다르지만, 대부분의 경우 굳이 고해상도 이미지가 필요하지 않습니다.</p>

<p>예를 들어, Claude 모델은 다음 공식으로 이미지의 토큰량을 계산합니다: <code class="language-plaintext highlighter-rouge">토큰 수 = (너비 px × 높이 px) ÷ 750</code></p>

<p><strong>300 × 199 이미지의 경우</strong>:</p>
<ul>
  <li>총 픽셀 수: 300 × 199 = 59,700 픽셀</li>
  <li>소요 토큰 수: 59,700 ÷ 750 = 79.6 ≈ <strong>80 토큰</strong></li>
</ul>

<p><strong>1000 × 665 이미지의 경우</strong>:</p>
<ul>
  <li>총 픽셀 수: 1000 × 665 = 665,000 픽셀</li>
  <li>소요 토큰 수: 665,000 ÷ 750 = 886.67 ≈ <strong>887 토큰</strong></li>
</ul>

<p>이처럼 이미지 해상도에 따라 토큰 소모량이 크게 달라지므로, 훈련용 데이터셋을 구축하기 전에 고해상도 이미지의 크기를 적절히 축소하는 것이 중요합니다. 
이는 모델 훈련 비용을 절감할 뿐만 아니라, 처리 속도 향상에도 기여하면서 대부분의 작업에서 성능 저하 없이 효율적인 학습을 가능하게 합니다.</p>

<h4 id="2-레퍼런스-데이터-구성">2. 레퍼런스 데이터 구성</h4>

<p>이 과정에서는 교사 모델을 호출하여 프롬프트-응답(Prompt-Response) 쌍의 데이터를 생성합니다. 교사 모델이 생성한 응답은 이후 학생 모델의 미세 조정 데이터로 활용됩니다.
멀티모달 기능을 지원하는 Converse API를 통해 교사 모델을 호출하고, 모델의 응답과 해당 이미지 파일명을 미세 조정용 데이터셋 구축을 위해 JSONL 형식으로 저장했습니다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">system_prompts</span> <span class="o">=</span> <span class="p">[{</span><span class="s">"text"</span><span class="p">:</span> <span class="n">system_prompt</span><span class="p">}]</span>
<span class="n">conversation</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s">"role"</span><span class="p">:</span> <span class="s">"user"</span><span class="p">,</span>
        <span class="s">"content"</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span><span class="s">"text"</span><span class="p">:</span> <span class="n">user_prompts</span><span class="p">},</span>
            <span class="p">{</span>
                <span class="s">"image"</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">"format"</span><span class="p">:</span> <span class="s">"jpeg"</span><span class="p">,</span>
                    <span class="s">"source"</span><span class="p">:</span> <span class="p">{</span> <span class="s">"bytes"</span><span class="p">:</span> <span class="n">image_bytes</span> <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">]</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="n">converse</span><span class="p">(</span>
    <span class="n">modelId</span><span class="o">=</span><span class="n">teacher_model_id</span><span class="p">,</span>
    <span class="n">system</span><span class="o">=</span><span class="n">system_prompts</span><span class="p">,</span>
    <span class="n">messages</span><span class="o">=</span><span class="n">conversation</span><span class="p">,</span>
    <span class="n">inferenceConfig</span><span class="o">=</span><span class="p">{</span><span class="s">"maxTokens"</span><span class="p">:</span> <span class="mi">1024</span><span class="p">,</span> <span class="s">"temperature"</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span> <span class="s">"topP"</span><span class="p">:</span> <span class="mf">0.9</span><span class="p">},</span>
<span class="p">)</span>

<span class="n">reponse_text</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s">"output"</span><span class="p">][</span><span class="s">"message"</span><span class="p">][</span><span class="s">"content"</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s">"text"</span><span class="p">]</span>
<span class="n">jsonl_data</span> <span class="o">=</span> <span class="p">{</span> <span class="s">"image"</span><span class="p">:</span> <span class="n">image_path</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="s">"label"</span><span class="p">:</span> <span class="n">reponse_text</span> <span class="p">}</span>
</code></pre></div></div>

<h4 id="3-훈련-데이터셋-생성">3. 훈련 데이터셋 생성</h4>

<p>Bedrock의 미세 조정 요구사항에 맞추어, <a href="https://docs.aws.amazon.com/nova/latest/userguide/fine-tune-prepare-data-understanding.html#custom-fine-tune-constraints">Preparing data for fine-tuning Understanding models</a> 가이드라인을 참고하여 모델 학습에 필요한 데이터셋을 JSONL 형식으로 생성합니다.</p>

<p>본 포스팅에서는 <a href="https://docs.aws.amazon.com/nova/latest/userguide/fine-tune-prepare-data-understanding.html#customize-fine-tune-examples">Single image custom fine tuning format</a> 형식으로 데이터를 준비합니다.
이 과정에서 앞서 <strong>두 번째 단계에서 생성한 데이터를 활용</strong>하여 <code class="language-plaintext highlighter-rouge">system</code>, <code class="language-plaintext highlighter-rouge">messages</code>의 <code class="language-plaintext highlighter-rouge">text</code> 값과 <code class="language-plaintext highlighter-rouge">image</code>의 <code class="language-plaintext highlighter-rouge">uri</code> 필드에 적절히 배치함으로써 완성된 데이터셋을 구성합니다.</p>

<h4 id="4-데이터셋-검증">4. 데이터셋 검증</h4>

<p>미세 조정 작업을 시작하기 전에, <code class="language-plaintext highlighter-rouge">aws-samples</code> GitHub 저장소에서 제공하는 <a href="https://github.com/aws-samples/amazon-bedrock-samples/tree/main/custom-models/bedrock-fine-tuning/nova/understanding/dataset_validation#dataset-validation-for-fine-tuning-nova-understanding-models">Dataset Validation for Fine-tuning Nova Understanding models</a> 도구를 활용하여 데이터셋의 유효성을 먼저 점검하세요.</p>

<p><code class="language-plaintext highlighter-rouge">python3 nova_ft_dataset_validator.py -i &lt;file path&gt; -m &lt;model name&gt;</code> 명령어를 실행하면 검사가 진행되며, 모든 샘플이 검증을 통과할 경우 <code class="language-plaintext highlighter-rouge">Validation successful, all samples passed</code> 메시지가 표시됩니다.</p>

<h3 id="미세-조정">미세 조정</h3>

<p>데이터셋 준비가 완료되면, 미세 조정 과정은 매우 간단하게 진행됩니다. Amazon Bedrock 콘솔에서 데이터셋이 저장된 S3 위치를 지정하고 필요한 하이퍼파라미터 값만 설정하면 됩니다.
이번 훈련에서는 Nova Lite 모델의 기본 에포크(Epoch) 값인 2 대신 5로 상향 조정하였으며, 그 외 파라미터는 기본값을 유지하여 진행했습니다.
<img src="../../assets/built/images/post/ai/Bedrock/hyperparams.png" alt="Hyperparams" />
훈련이 완료되면, 미세 조정 과정에서 지정한 S3 위치에 훈련 결과 지표들이 저장됩니다. <code class="language-plaintext highlighter-rouge">step_wise_training_metrics.csv</code> 파일을 통해 각 단계(step)와 에포크(epoch)별 훈련 손실(training_loss) 값을 확인할 수 있어, 모델의 학습 진행 결과를 확인할 수 있습니다.</p>

<p><br /></p>

<h2 id="️-fine-tuning-text-image-to-text-결과"><a href="#results">🖍️ Fine-Tuning Text-Image-to-Text 결과</a><a id="results"></a></h2>

<p>본 포스팅에서는 <a href="https://huggingface.co/datasets/ShutterstockInc/high_resolution_images">🤗 <code class="language-plaintext highlighter-rouge">ShutterstockInc/high_resolution_images</code></a>의 medium 데이터셋을 활용했으며, 이 데이터셋은 총 1,000장의 이미지로 구성되어 있습니다.
데이터 활용 방식으로는 900장을 훈련용 데이터로 사용하고, 나머지 100장은 미세 조정 완료 후 모델 성능 검증에 활용했습니다. 데이터의 제한적인 특성을 고려하여, 300장과 900장을 각각 사용한 두 가지 훈련 세션을 진행했습니다.</p>

<p><strong>Nova Pro &amp; Nova Lite 비교</strong></p>

<p>먼저 미세 조정을 거치지 않은 상태에서 Nova Pro와 Lite 모델 간의 성능 차이를 확인하기 위해, 100장의 이미지에 대한 분석 결과를 비교했습니다. 두 모델 간의 Jaccard 유사도는 대부분 0.1에서 0.4 사이에 분포하는 것으로 나타났습니다.
<img src="../../assets/built/images/post/ai/Bedrock/jaccard-case1.png" alt="case1" /></p>

<p><strong>Nova Pro &amp; Nova Lite (300장)</strong></p>

<p>300개의 샘플 데이터로 훈련을 진행한 결과, Jaccard 유사도가 0.2에서 0.6 사이로 향상되었습니다. 이는 비교적 적은 양의 데이터만으로도 Lite 모델이 Pro 모델의 성능에 근접할 수 있음을 보여주는 결과입니다.
<img src="../../assets/built/images/post/ai/Bedrock/jaccard-case2.png" alt="case2" /></p>

<p><strong>Nova Pro &amp; Nova Lite (900장)</strong></p>

<p>900개의 샘플 데이터로 훈련을 진행한 결과, Jaccard 유사도가 0.2에서 0.6 사이로 향상되었으며, 300장으로 훈련한 모델(빨간색)과 비교했을 때 900장으로 훈련한 모델(보라색)이 소폭 더 높은 성능을 보여주었습니다.
이번 실험에서는 이미지 데이터의 제한으로 900장만 활용했지만, Amazon Bedrock의 이미지 미세 조정 기능은 최대 20,000개의 데이터를 지원합니다. 따라서 더 많은 데이터로 미세 조정을 진행할 경우, 성능이 더욱 향상될 것으로 기대됩니다.</p>

<p><img src="../../assets/built/images/post/ai/Bedrock/jaccard-case3.png" alt="case2" /></p>

<p><br /></p>

<h2 id="-모델-customization-비용"><a href="#cost">💸 모델 Customization 비용</a><a id="cost"></a></h2>

<p>실험에 소요된 비용 내역을 기재했으니, 향후 미세 조정 작업 계획 시 예상 비용 산출에 도움이 되길 바랍니다. 🙃</p>

<p><strong>Nova Lite 미세 조정 소모 비용</strong></p>

<table>
  <thead>
    <tr>
      <th>사용량 유형</th>
      <th>데이터 수</th>
      <th>비용</th>
      <th>훈련 시간</th>
      <th>전용 처리량 비용 (무약정)</th>
      <th>모델 보관 비용</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>USE1-NovaLite-Customization-Training</td>
      <td>300개</td>
      <td>약 $2.1</td>
      <td>약 1시간</td>
      <td>시간당 $108.15</td>
      <td>월 $1.95</td>
    </tr>
    <tr>
      <td>USE1-NovaLite-Customization-Training</td>
      <td>900개</td>
      <td>약 $7.5</td>
      <td>약 2시간</td>
      <td>시간당 $108.15</td>
      <td>월 $1.95</td>
    </tr>
  </tbody>
</table>

<p><em>이 비용 내역에는 교사 모델을 활용하여 프롬프트-응답 쌍 데이터를 생성하는 데 소모된 비용은 포함되지 않았습니다.
해당 비용을 산출하려면, 작업을 1회 수행한 후 소모된 토큰량을 측정하여 별도로 계산하시기 바랍니다.</em></p>

<p><br /></p>

<h2 id="-마치며"><a href="#outro">🌟 마치며</a><a id="outro"></a></h2>

<p>이번 포스팅에서는 Amazon Bedrock이 Vision 작업에 대한 모델 증류를 공식적으로 지원하지 않는 상황에서, Text-Image-to-Text 미세 조정을 통해 우회적으로 모델 증류를 구현하는 방법을 살펴보았습니다.
성공적인 VLM 모델 증류를 위해서는 체계적인 데이터셋 준비 과정이 필수적입니다. 이미지 전처리를 통한 토큰 소모량 최적화, 교사 모델을 활용한 레퍼런스 데이터 구축, Bedrock 요구사항에 맞는 훈련 데이터셋 생성, 그리고 미세 조정 전 데이터셋 검증까지의 단계가 모델 성능에 직접적인 영향을 미칩니다.
또한 미세 조정 완료 후에는 반드시 검증 과정을 통해 모델의 성능 향상을 확인해야 합니다. 본 글에서는 Jaccard 유사도를 통해 모델 간 응답 일치도를 측정했으며, 데이터양이 증가할수록 Lite 모델이 Pro 모델의 응답에 더 가까워지는 것을 확인할 수 있었습니다.</p>

<p>이러한 우회적 증류 방법은 비록 공식 지원 기능은 아니지만, 적절한 데이터셋 구성과 미세 조정을 통해 경량 모델에서도 고성능 모델과 유사한 결과를 얻을 수 있음을 보여줍니다. 앞으로 Amazon Bedrock에서 Vision 모델 증류에 대한 공식 지원이 확대되기를 기대하며, 그때까지는 이러한 접근법이 실무에서 유용하게 활용될 수 있을 것입니다. 여러분의 프로젝트에도 이러한 방법론이 도움이 되길 바랍니다.</p>

<blockquote>
  <p>🤣 사실 이번 포스팅은 제가 AWS Seoul Summit 2025 발표를 준비하면서 실험했던 내용 중 일부랍니다. 발표 영상이 나오면 여기에 함께 공유해 드릴게요!</p>
</blockquote>

<p><br /></p>

<blockquote>
  <p>🚨 광고 : Bedrock 내에서 나만의 모델을 만드는 다른 방법(<code class="language-plaintext highlighter-rouge">지속적인 사전 훈련</code>, <code class="language-plaintext highlighter-rouge">미세 조정</code>)들은 <br /> <strong>“Amazon Bedrock으로 시작하는 실전 생성형 AI 개발”</strong>를 참고하세요! <br />
판매 링크 : <a href="https://www.yes24.com/Product/Goods/140049541">📘 예스24</a>, <a href="https://product.kyobobook.co.kr/detail/S000214962344">📗 교보문고</a>, <a href="https://www.aladin.co.kr/shop/wproduct.aspx?ItemId=353662061&amp;start=slayer">📕 알라딘</a></p>
</blockquote>

<hr />

                </div>
            </section>

            <footer class="post-full-footer">
                <!-- Everything inside the #author tags pulls data from the author -->
                <!-- #author-->
                
                    
                        <section class="author-card">
                            
                                <img class="author-profile-image" src="/assets/built/images/myGopher.png" alt="HeuristicWave" />
                            
                            <section class="author-card-content">
                                <h4 class="author-card-name"><a href="/author/HeuristicWave">Jihun Lim</a></h4>
                                
                                    <p><a href="https://feedly.com/i/subscription/feed/https://heuristicwave.github.io/feed.xml">Follow my blog</a></p>
                                
                            </section>
                        </section>
                        <div class="post-full-footer-right">
                            <a class="author-card-button" href="/author/HeuristicWave">Read More</a>
                        </div>
                    
                
                <!-- /author  -->
            </footer>

            <!-- Email subscribe form at the bottom of the page
            
                <section class="subscribe-form">
                    <h3 class="subscribe-form-title">Subscribe to Heuristic Wave Blog</h3>
                    <p>Get the latest posts delivered right via RSS</p>
                    <form method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm"  />
    <input class="location" type="hidden" name="location"  />
    <input class="referrer" type="hidden" name="referrer"  />

    <div class="form-group">
        <input class="subscribe-email" type="url" name="rss url" value="https://heuristicwave.github.io" readonly />
    </div>
    <!--To Do Rss Web Font <i class="fas fa-rss"></i> -->
    <button class="" type="submit" disabled><span>Copy</span></button>
    <script type="text/javascript">(function(g,h,o,s,t){h[o]('.location')[s]=h[o]('.location')[s] || g.location.href;h[o]('.referrer')[s]=h[o]('.referrer')[s] || h.referrer;})(window,document,'querySelector','value');</script>
</form>

                </section>
             -->

            <!-- If you use Disqus comments, just uncomment this block.
            The only thing you need to change is "test-apkdzgmqhj" - which
            should be replaced with your own Disqus site-id. -->
            
                <section class="post-full-comments">
                    <div id="disqus_thread"></div>
                    <script>
                        var disqus_config = function () {
                            this.page.url = 'https://heuristicwave.github.io/Fine-tuning-Nova';
                            this.page.identifier = '/Fine-tuning-Nova';
                            this.page.title = 'Amazon Nova Vision 기능 모델 증류 하기: Fine-Tuning Text-Image-to-Text';
                        };
                        (function() {
                            var d = document, s = d.createElement('script');
                            s.src = 'https://heuristicwave-github-io.disqus.com/embed.js';
                            s.setAttribute('data-timestamp', +new Date());
                            (d.head || d.body).appendChild(s);
                        })();
                    </script>
                </section>
            

        </article>

    </div>
</main>

<!-- Links to Previous/Next posts -->
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
                
                
                
                
                    <article class="read-next-card"
                        
                            style="background-image: url(/assets/built/images/blog-cover.jpg)"
                        
                    >
                        <header class="read-next-card-header">
                            <small class="read-next-card-header-sitetitle">&mdash; Heuristic Wave Blog &mdash;</small>
                            
                                <h3 class="read-next-card-header-title"><a href="/tag/aws/">Aws</a></h3>
                            
                        </header>
                        <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
</div>
                        <div class="read-next-card-content">
                            <ul>
                                
                                
                                  
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/Kendra2">Exploring Amazon Kendra GenAI Index with Amazon Bedrock Knowledge Bases</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/BedrockOpenAI">OpenAI-Compatible RESTful APIs</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/reflection">출판 후기 - 첫 책을 출간하면서 놓쳤던 것들</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                            </ul>
                        </div>
                        <footer class="read-next-card-footer">
                            <a href="/tag/aws/">
                                
                                    See all 30 posts  →
                                
                            </a>
                        </footer>
                    </article>
                
            

            <!-- If there's a next post, display it using the same markup included from - partials/post-card.hbs -->
            

            <!-- If there's a previous post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/Kendra2">
                <div class="post-card-image" style="background-image: url(/assets/built/images/post/ai/AmazonKendra.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/Kendra2">
                <header class="post-card-header">
                    
                        
                            
                               <span class="post-card-tags">Aws</span>
                            
                        
                            
                                <span class="post-card-tags">Genai</span>
                            
                        
                    

                    <h2 class="post-card-title">Exploring Amazon Kendra GenAI Index with Amazon Bedrock Knowledge Bases</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p></p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <img class="author-profile-image" src="/assets/built/images/myGopher.png" alt="Jihun Lim" />
                        
                        <span class="post-card-author">
                            <a href="/author/HeuristicWave/">Jihun Lim</a>
                        </span>
                    
                
                <span class="reading-time">
                    
                    
                      1 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

        </div>
    </div>
</aside>

<!-- Floating header which appears on-scroll, included from includes/floating-header.hbs -->
<div class="floating-header">
    <div class="floating-header-logo">
        <a href="https://heuristicwave.github.io/">
            
            <span>Heuristic Wave Blog</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">Amazon Nova Vision 기능 모델 증류 하기: Fine-Tuning Text-Image-to-Text</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=Amazon+Nova+Vision+%EA%B8%B0%EB%8A%A5+%EB%AA%A8%EB%8D%B8+%EC%A6%9D%EB%A5%98+%ED%95%98%EA%B8%B0%3A+Fine-Tuning+Text-Image-to-Text&amp;url=https://heuristicwave.github.ioFine-tuning-Nova"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>

        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://heuristicwave.github.ioFine-tuning-Nova"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>

        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>


<!-- /post -->

<!-- The #contentFor helper here will send everything inside it up to the matching #block helper found in default.hbs -->


        <!-- Previous/next page links - displayed on every page -->
        

        <!-- The footer at the very bottom of the screen -->
        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="https://heuristicwave.github.io/">Heuristic Wave Blog</a> &copy; 2025</section>
                <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> &
                    <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a> using
                    <a href="https://github.com/jekyller/jasper2" target="_blank" rel="noopener">Jasper2</a></section>
                <nav class="site-footer-nav">
                    <a href="/">Latest Posts</a>
                    
                    
                    <a href="https://ghost.org" target="_blank" rel="noopener">Ghost</a>
                </nav>
            </div>
        </footer>

    </div>

    <!-- The big email subscribe modal content -->
    
        <div id="subscribe" class="subscribe-overlay">
            <a class="subscribe-overlay-close" href="#"></a>
            <div class="subscribe-overlay-content">
                
                <h1 class="subscribe-overlay-title">Search on Heuristic Wave Blog</h1>
                <p class="subscribe-overlay-description">lunr.js를 이용한 posts 검색</p>
                <span id="searchform" method="post" action="/search/" class="">
    <input class="confirm" type="hidden" name="confirm"  />
    <input class="location" type="hidden" name="location"  />
    <input class="referrer" type="hidden" name="referrer"  />

    <div class="form-group">
        <input class="subscribe-email" onkeyup="myFunc()"
               id="searchtext" type="text" name="searchtext"
               placeholder="Search..." />
    </div>
    <script type="text/javascript">
        function myFunc() {
            if(event.keyCode == 13) {
                var url = encodeURIComponent($("#searchtext").val());
                location.href = "/search.html?query=" + url;
            }
        }
    </script>
</span>
                <br>
            </div>
        </div>
    

    <!-- highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.10.0/components/prism-abap.min.js"></script>
    <script>$(document).ready(function() {
      $('pre code').each(function(i, block) {
        hljs.highlightBlock(block);
      });
    });</script>

    <!-- jQuery + Fitvids, which makes all video embeds responsive -->
    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://demo.ghost.io/assets/js/jquery.fitvids.js?v=724281a32e"></script>


    <!-- Paginator increased to "infinit" in _config.yml -->
    <!-- if paginator.posts  -->
    <!-- <script>
        var maxPages = parseInt('');
    </script>
    <script src="/assets/js/infinitescroll.js"></script> -->
    <!-- /endif -->

    


    <!-- Theme Toggle Script - Inline for immediate execution -->
    <script>
    (function() {
        'use strict';
        
        console.log('Theme toggle script loaded');
        
        // Theme constants
        const THEMES = {
            LIGHT: 'light',
            DARK: 'dark'
        };
        
        const STORAGE_KEY = 'heuristic-wave-theme';
        const html = document.documentElement;
        
        function getCurrentTheme() {
            const savedTheme = localStorage.getItem(STORAGE_KEY);
            if (savedTheme && Object.values(THEMES).includes(savedTheme)) {
                return savedTheme;
            }
            
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                return THEMES.DARK;
            }
            
            return THEMES.LIGHT;
        }
        
        function applyTheme(theme) {
            html.setAttribute('data-theme', theme);
            localStorage.setItem(STORAGE_KEY, theme);
            console.log('Theme applied:', theme);
            
            // Force comprehensive theme changes for immediate visual feedback
            if (theme === THEMES.DARK) {
                // Apply dark theme styles
                document.body.style.backgroundColor = '#15171a';
                document.body.style.color = '#ffffff';
                
                // Main content areas
                const siteMain = document.querySelector('.site-main');
                if (siteMain) {
                    siteMain.style.backgroundColor = '#15171a';
                    siteMain.style.color = '#ffffff';
                }
                
                // Post cards
                const postCards = document.querySelectorAll('.post-card');
                postCards.forEach(card => {
                    card.style.backgroundColor = '#2a2d32';
                    card.style.borderColor = '#2a2d32';
                    card.style.color = '#ffffff';
                });
                
                // All text content
                const textElements = document.querySelectorAll('h1, h2, h3, h4, h5, h6, p, span, div, a, .post-card-title, .post-card-excerpt, .post-full-title, .post-full-content');
                textElements.forEach(element => {
                    if (!element.closest('.site-nav')) { // Skip navigation elements
                        element.style.color = '#ffffff';
                    }
                });
                
                // 작성자 정보와 메타 정보들 통일감 있게 처리
                const authorElements = document.querySelectorAll('.post-card-author, .author-card-name, .author-card-name a, .post-full-meta, .post-full-meta-date');
                authorElements.forEach(element => {
                    element.style.color = '#ffffff';
                });
                
                // 메타 정보들 강력하게 처리 - 배경색과 텍스트 색상 모두
                const metaElements = document.querySelectorAll('.post-card-meta, .post-card-meta *, .reading-time, .post-card-tags, .post-card-author');
                metaElements.forEach(element => {
                    element.style.setProperty('background-color', '#2a2d32', 'important');
                    element.style.setProperty('color', '#ffffff', 'important');
                });
                
                // 메타 영역 자체 스타일링
                const metaContainers = document.querySelectorAll('.post-card-meta');
                metaContainers.forEach(meta => {
                    meta.style.setProperty('background-color', '#2a2d32', 'important');
                    meta.style.setProperty('border-top', '1px solid #3a3d42', 'important');
                    meta.style.setProperty('border-radius', '0 0 8px 8px', 'important');
                    meta.style.setProperty('margin', '0', 'important');
                });
                
                // 특별히 작성자 이름 강제 적용
                const authorNames = document.querySelectorAll('.post-card-author, [class*="author"]');
                authorNames.forEach(element => {
                    element.style.setProperty('color', '#ffffff', 'important');
                });
                
                // 읽기 시간도 강제 적용
                const readingTimes = document.querySelectorAll('.reading-time, [class*="reading"]');
                readingTimes.forEach(element => {
                    element.style.setProperty('color', '#ffffff', 'important');
                });
                
                // 프로필 이미지 테두리
                const profileImages = document.querySelectorAll('.author-profile-image');
                profileImages.forEach(img => {
                    img.style.border = '2px solid #3a3d42';
                });
                
                // 댓글 시스템 다크 모드 적용
                const commentElements = document.querySelectorAll('.post-full-comments, .post-full-comments *');
                commentElements.forEach(element => {
                    element.style.backgroundColor = '#15171a';
                    element.style.color = '#ffffff';
                });
                
                // 댓글 입력 폼들
                const commentInputs = document.querySelectorAll('.post-full-comments input, .post-full-comments textarea, .post-full-comments button');
                commentInputs.forEach(input => {
                    input.style.backgroundColor = '#2a2d32';
                    input.style.color = '#ffffff';
                    input.style.border = '1px solid #3a3d42';
                });
                
                // Post content links
                const postContent = document.querySelectorAll('.post-card-content-link, .post-full-content');
                postContent.forEach(content => {
                    content.style.color = '#ffffff';
                    content.style.backgroundColor = '#15171a';
                });
                
                // Post full content background
                const postFullContent = document.querySelectorAll('.post-full-content, .post-template .site-main, .page-template .site-main');
                postFullContent.forEach(content => {
                    content.style.backgroundColor = '#15171a';
                    content.style.color = '#ffffff';
                });
                
            } else {
                // Reset to light theme
                document.body.style.backgroundColor = '#f4f8fb';
                document.body.style.color = '#15171a';
                
                const siteMain = document.querySelector('.site-main');
                if (siteMain) {
                    siteMain.style.backgroundColor = '';
                    siteMain.style.color = '';
                }
                
                // Reset all elements to default
                const postCards = document.querySelectorAll('.post-card');
                postCards.forEach(card => {
                    card.style.backgroundColor = '';
                    card.style.borderColor = '';
                    card.style.color = '';
                });
                
                // Reset all text elements
                const textElements = document.querySelectorAll('h1, h2, h3, h4, h5, h6, p, span, div, a, .post-card-title, .post-card-excerpt, .post-full-title, .post-full-content');
                textElements.forEach(element => {
                    element.style.color = '';
                });
                
                const postContent = document.querySelectorAll('.post-card-content-link, .post-full-content');
                postContent.forEach(content => {
                    content.style.color = '';
                    content.style.backgroundColor = '';
                });
                
                // Reset post full content
                const postFullContent = document.querySelectorAll('.post-full-content, .post-template .site-main, .page-template .site-main');
                postFullContent.forEach(content => {
                    content.style.backgroundColor = '';
                    content.style.color = '';
                });
                
                // Reset 작성자 정보와 메타 정보들
                const authorElements = document.querySelectorAll('.post-card-author, .author-card-name, .author-card-name a, .post-full-meta, .post-full-meta-date');
                authorElements.forEach(element => {
                    element.style.color = '';
                });
                
                // 메타 영역 완전 리셋
                const metaElements = document.querySelectorAll('.post-card-meta, .post-card-meta *, .reading-time, .post-card-tags');
                metaElements.forEach(element => {
                    element.style.backgroundColor = '';
                    element.style.color = '';
                    element.style.border = '';
                    element.style.borderRadius = '';
                    element.style.margin = '';
                });
                
                const metaContainers = document.querySelectorAll('.post-card-meta');
                metaContainers.forEach(meta => {
                    meta.style.backgroundColor = '';
                    meta.style.borderTop = '';
                    meta.style.borderRadius = '';
                    meta.style.margin = '';
                });
                
                const profileImages = document.querySelectorAll('.author-profile-image');
                profileImages.forEach(img => {
                    img.style.border = '';
                });
                
                // 댓글 시스템 라이트 모드 리셋
                const commentElements = document.querySelectorAll('.post-full-comments, .post-full-comments *');
                commentElements.forEach(element => {
                    element.style.backgroundColor = '';
                    element.style.color = '';
                });
                
                const commentInputs = document.querySelectorAll('.post-full-comments input, .post-full-comments textarea, .post-full-comments button');
                commentInputs.forEach(input => {
                    input.style.backgroundColor = '';
                    input.style.color = '';
                    input.style.border = '';
                });
            }
        }
        
        function toggleTheme() {
            const currentTheme = getCurrentTheme();
            const newTheme = currentTheme === THEMES.LIGHT ? THEMES.DARK : THEMES.LIGHT;
            applyTheme(newTheme);
            return newTheme;
        }
        
        function createThemeToggle() {
            if (document.getElementById('theme-toggle')) {
                return document.getElementById('theme-toggle');
            }
            
            const button = document.createElement('button');
            button.id = 'theme-toggle';
            button.innerHTML = '🌙';
            
            // 현재 페이지가 포스트 페이지인지 확인
            const isPostPage = document.body.classList.contains('post-template');
            
            if (isPostPage) {
                // 포스트 페이지: 처음에는 네비게이션에 위치
                setupNavigationButton(button);
            } else {
                // 다른 페이지: 항상 네비게이션에 위치
                setupNavigationButton(button);
            }
            
            button.addEventListener('click', function() {
                const newTheme = toggleTheme();
                button.innerHTML = newTheme === THEMES.DARK ? '☀️' : '🌙';
                console.log('Theme toggled to:', newTheme);
            });
            
            console.log('Theme toggle button created');
            return button;
        }
        
        function setupNavigationButton(button) {
            // 네비게이션 바 스타일
            button.style.cssText = `
                position: relative;
                width: 40px;
                height: 40px;
                margin-left: 10px;
                padding: 0;
                background: transparent;
                border: 1px solid rgba(255, 255, 255, 0.3);
                border-radius: 8px;
                color: #fff;
                cursor: pointer;
                transition: all 0.3s ease;
                opacity: 0.8;
                font-size: 16px;
                display: flex;
                align-items: center;
                justify-content: center;
            `;
            
            // 호버 효과
            button.addEventListener('mouseenter', function() {
                button.style.opacity = '1';
                button.style.borderColor = 'rgba(255, 255, 255, 0.5)';
                button.style.background = 'rgba(255, 255, 255, 0.1)';
            });
            
            button.addEventListener('mouseleave', function() {
                button.style.opacity = '0.8';
                button.style.borderColor = 'rgba(255, 255, 255, 0.3)';
                button.style.background = 'transparent';
            });
            
            // 네비게이션에 추가
            const navRight = document.querySelector('.site-nav-right');
            const socialLinks = document.querySelector('.social-links');
            
            if (navRight) {
                navRight.appendChild(button);
            } else if (socialLinks) {
                socialLinks.appendChild(button);
            } else {
                // 폴백: body에 추가하되 네비게이션 스타일 유지
                document.body.appendChild(button);
                button.style.position = 'fixed';
                button.style.top = '20px';
                button.style.right = '20px';
                button.style.zIndex = '1000';
            }
            
            // 포스트 페이지에서만 스크롤 감지
            if (document.body.classList.contains('post-template')) {
                setupScrollBehavior(button);
            }
        }
        
        function setupScrollBehavior(button) {
            let isFloating = false;
            
            window.addEventListener('scroll', function() {
                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                const shouldFloat = scrollTop > 200; // 200px 스크롤 후 플로팅 모드
                
                if (shouldFloat && !isFloating) {
                    // 플로팅 모드로 전환
                    isFloating = true;
                    button.setAttribute('data-mode', 'floating');
                    button.style.cssText = `
                        position: fixed;
                        top: 80px;
                        right: 25px;
                        z-index: 9999;
                        width: 48px;
                        height: 48px;
                        border: 2px solid rgba(255, 255, 255, 0.2);
                        border-radius: 50%;
                        background: linear-gradient(135deg, #3eb0ef 0%, #2a8bc7 100%);
                        color: white;
                        font-size: 18px;
                        cursor: pointer;
                        box-shadow: 
                            0 4px 15px rgba(62, 176, 239, 0.3),
                            0 2px 8px rgba(0, 0, 0, 0.2);
                        transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
                        backdrop-filter: blur(10px);
                        -webkit-backdrop-filter: blur(10px);
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        opacity: 1;
                        transform: translateY(0);
                    `;
                    
                    // 플로팅 모드 호버 효과 재설정
                    button.onmouseenter = function() {
                        button.style.transform = 'translateY(-2px) scale(1.05)';
                        button.style.boxShadow = `
                            0 6px 20px rgba(62, 176, 239, 0.4),
                            0 4px 12px rgba(0, 0, 0, 0.3)
                        `;
                    };
                    
                    button.onmouseleave = function() {
                        button.style.transform = 'translateY(0) scale(1)';
                        button.style.boxShadow = `
                            0 4px 15px rgba(62, 176, 239, 0.3),
                            0 2px 8px rgba(0, 0, 0, 0.2)
                        `;
                    };
                    
                } else if (!shouldFloat && isFloating) {
                    // 네비게이션 모드로 복원
                    isFloating = false;
                    button.removeAttribute('data-mode');
                    
                    // 원래 위치로 버튼 이동
                    const navRight = document.querySelector('.site-nav-right');
                    if (navRight && !navRight.contains(button)) {
                        navRight.appendChild(button);
                    }
                    
                    setupNavigationButton(button);
                }
                
                // 플로팅 헤더와 겹치지 않도록 조정
                if (isFloating) {
                    const floatingHeader = document.querySelector('.floating-header');
                    if (floatingHeader && floatingHeader.classList.contains('floating-active')) {
                        button.style.top = '120px';
                    } else {
                        button.style.top = '80px';
                    }
                }
            }, { passive: true });
        }
        
        function init() {
            console.log('Initializing theme system...');
            const initialTheme = getCurrentTheme();
            applyTheme(initialTheme);
            
            function setupButton() {
                const button = createThemeToggle();
                button.innerHTML = initialTheme === THEMES.DARK ? '☀️' : '🌙';
            }
            
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', setupButton);
            } else {
                setupButton();
            }
        }
        
        // Initialize immediately
        init();
    })();
    </script>

    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'G-0FTXSPJZFY', 'auto');
  ga('send', 'pageview');

 </script>


    <!-- The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in post.hbs, but it needs to be included down here, after jQuery has already loaded. -->
    
        <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>

    

    <!-- Ghost outputs important scripts and data with this tag - it should always be the very last thing before the closing body tag -->
    <!-- ghost_foot -->

</body>
</html>
