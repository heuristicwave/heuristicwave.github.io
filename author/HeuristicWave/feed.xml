<?xml version="1.0" encoding="utf-8"?>

<feed xmlns="http://www.w3.org/2005/Atom" >
  <generator uri="https://jekyllrb.com/" version="3.9.0">Jekyll</generator>
  <link href="https://heuristicwave.github.io/author/HeuristicWave/feed.xml" rel="self" type="application/atom+xml" />
  <link href="https://heuristicwave.github.io/" rel="alternate" type="text/html" />
  <updated>2022-07-25T05:59:34+00:00</updated>
  <id>https://heuristicwave.github.io/author/HeuristicWave/feed.xml</id>

  
  
  

  
    <title type="html">Heuristic Wave Blog | </title>
  

  
    <subtitle>Careful Writer</subtitle>
  

  

  
    
      
    
  

  
  

  
    <entry>
      <title type="html">Terraform Tips 5 - Import</title>
      <link href="https://heuristicwave.github.io/TerraformTips5" rel="alternate" type="text/html" title="Terraform Tips 5 - Import" />
      <published>2022-07-23T00:00:00+00:00</published>
      <updated>2022-07-23T00:00:00+00:00</updated>
      <id>https://heuristicwave.github.io/TerraformTips5</id>
      <content type="html" xml:base="https://heuristicwave.github.io/TerraformTips5">&lt;p&gt;Terraform ë” ìµìˆ™í•˜ê²Œ 5 - Import&lt;/p&gt;

&lt;h2 id=&quot;intro&quot;&gt;Intro&lt;/h2&gt;

&lt;p&gt;IaCë¥¼ ë„ì…í•˜ê¸° ìœ„í•´ êµ¬ì¶• ë‹¨ê³„ë¶€í„° ì½”ë“œë¡œ ì¸í”„ë¼ë¥¼ ì‘ì„±í•  ìˆ˜ë„ ìˆì§€ë§Œ, ê¸° êµ¬ì¶•ëœ ì¸í”„ë¼ë¥¼ ì½”ë“œí™”í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
ì´ë•Œ ì‚¬ìš©í•˜ëŠ” Terraformì˜ ê¸°ëŠ¥ì´ ë°”ë¡œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Import&lt;/code&gt;ì…ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;í•˜ì§€ë§Œ ì €ëŠ” êµ¬ì¶• ë‹¨ê³„ì—ë„ ì¢…ì¢… &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Import&lt;/code&gt; ê¸°ëŠ¥ì„ í™œìš©í•©ë‹ˆë‹¤. Terraformìœ¼ë¡œ ì½”ë“œë¥¼ ì‘ì„±í•˜ê¸° ìœ„í•´ &lt;a href=&quot;https://registry.terraform.io/providers/hashicorp/aws/latest/docs&quot;&gt;registry.terraform.io&lt;/a&gt;ì—ì„œ
ê°€ì´ë“œ í•˜ëŠ” ëŒ€ë¡œ ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒì´ ìƒê°ë³´ë‹¤ ì–´ë ¤ìš´ ì‘ì—…ì´ê¸° ë•Œë¬¸ì´ì£ . ğŸ¥²&lt;/p&gt;

&lt;p&gt;ê·¸ë˜ì„œ ì €ëŠ” ë¨¼ì € êµ¬ì¶•í•˜ê³ ì í•˜ëŠ” ì¸í”„ë¼ë¥¼ ì½˜ì†”ìƒì—ì„œ êµ¬ì„±í•œ ë‹¤ìŒ, êµ¬ì¶•ì— í•„ìš”í•œ Attribute ë“¤ì„ íŒŒì•…í•©ë‹ˆë‹¤.
ê·¸ë‹¤ìŒ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Import&lt;/code&gt;ë¥¼ ì‚¬ìš©í•´ ë™ì‘í•˜ëŠ” IaC ì½”ë“œë¥¼ ì–»ê³  ìˆ˜ì •í•©ë‹ˆë‹¤.
ì¦‰, ì €ëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Import&lt;/code&gt; ê¸°ëŠ¥ì„ Cheat Sheetì²˜ëŸ¼ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. ğŸ˜…&lt;/p&gt;

&lt;p&gt;ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” ì‹¤ì œ ì œê°€ Cheat Sheetìœ¼ë¡œ í™œìš©í•˜ëŠ” &lt;em&gt;â€˜Import ì‹œë‚˜ë¦¬ì˜¤â€™&lt;/em&gt;ë¥¼ í†µí•´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Import&lt;/code&gt;ë¥¼ í•™ìŠµí•´ ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;-ì¡°ë¦½ì€-ë¶„í•´ì˜-ì—­ìˆœ&quot;&gt;â® ì¡°ë¦½ì€ ë¶„í•´ì˜ ì—­ìˆœ&lt;/h2&gt;

&lt;p&gt;AWS Systems Managerì˜ ì¸ìŠ¤í„´ìŠ¤ ìš´ì˜ ìë™í™”ë¥¼ ìœ„í•œ State Manager ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ &lt;a href=&quot;https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/ssm_association&quot;&gt;ë¬¸ì„œ&lt;/a&gt;ë¥¼
í™•ì¸í•´ ë³´ì•˜ì§€ë§Œ, ë‹¤ìŒê³¼ ê°™ì€ ì‚¬ìš©ë²• ë§Œì´ ê¸°ì¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-terraform highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;resource&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;aws_ssm_association&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;example&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;aws_ssm_document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;example&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;

  &lt;span class=&quot;nx&quot;&gt;targets&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;key&lt;/span&gt;    &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;InstanceIds&quot;&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;values&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;aws_instance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;example&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;í•´ë‹¹ ì½”ë“œë¥¼ apply í•´ë„ ë¬´ìˆ˜í•œ Errorë§Œ ë§Œë‚  ë¿ ë¹ ë¥´ê²Œ ì§„ë„ê°€ ë‚˜ê°€ì§€ ì•Šê¸°ì—, ìš°ì„  AWS ì›¹ ì½˜ì†”ì„ í™œìš©í•´ ì¸ìŠ¤í„´ìŠ¤ ìš´ì˜ ìë™í™”ë¥¼ ìœ„í•œ State Manager ê¸°ëŠ¥ì„ êµ¬í˜„í•´ ë‘ì—ˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;0ï¸âƒ£-ì¤€ë¹„-ì‘ì—…&quot;&gt;0ï¸âƒ£ ì¤€ë¹„ ì‘ì—…&lt;/h3&gt;

&lt;p&gt;ì´ë²ˆ í¬ìŠ¤íŒ…ì˜ ì‘ì—… ê³µê°„(~/terraform)ì„ ìƒì„±í•˜ê³  í•´ë‹¹ ìœ„ì¹˜ì—ì„œ ì•„ë˜ ì½”ë“œ ë¸”ë¡ì„ í„°ë¯¸ë„ì— ë³µì‚¬í•©ë‹ˆë‹¤. (ë¦¬ì†ŒìŠ¤ê°€ ìœ„ì¹˜í•œ ë¦¬ì „ ëª…ì— ë§ê²Œ ì„¸íŒ…í•´ ì£¼ì„¸ìš”)&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;EOF&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt; &amp;gt; provider.tf
provider &quot;aws&quot; {
  region  = &quot;ap-northeast-2&quot;
}
&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;EOF
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;ì´í›„, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform init&lt;/code&gt; ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰ì‹œì¼œì£¼ì„¸ìš”.&lt;/p&gt;

&lt;h3 id=&quot;1ï¸âƒ£-skeleton-code-ì‘ì„±&quot;&gt;1ï¸âƒ£ Skeleton Code ì‘ì„±&lt;/h3&gt;

&lt;p&gt;ì›¹ ì½˜ì†”ë¡œ ì‘ì—…í•œ State Managerë¥¼ ì½”ë“œí™”í•˜ê¸° ìœ„í•´ ì•„ë˜ì™€ ê°™ì´ Skeleton Codeë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.
(import í›„, ìƒì„±ë˜ëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*.tfstate&lt;/code&gt;ë¥¼ ë‹´ëŠ” ì¼ì¢…ì˜ ë¹µí‹€ì„ ì œì‘í•˜ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤.)&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;EOF&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt; &amp;gt; main.tf
resource &quot;aws_ssm_association&quot; &quot;copycat&quot; {}
&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;EOF
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;2ï¸âƒ£-import-configuration&quot;&gt;2ï¸âƒ£ Import Configuration&lt;/h3&gt;

&lt;p&gt;ì‚¬ìš©ë²•(&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform import [options] ADDRESS ID&lt;/code&gt;)ì— ë”°ë¼ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰ì‹œí‚¤ë©´ &lt;strong&gt;root directory&lt;/strong&gt;ì— ë¯¸ë¦¬ ìƒì„±ëœ ì¸í”„ë¼ê°€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*.tfstate&lt;/code&gt; íŒŒì¼ì— ë‹´ê¹ë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;terraform import aws_ssm_association.copycat &amp;lt;Association ID&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ìƒì„±ëœ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*.tfstate&lt;/code&gt; íŒŒì¼ì„ í™•ì¸í•˜ë©´ json í˜•íƒœë¡œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;aws_ssm_association&lt;/code&gt; resource blockì— ì‘ì„±í•´ì•¼ í•˜ëŠ” ê°ì¢… Config ê°’ë“¤ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ê·¸ëŸ¬ë‚˜, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;show&lt;/code&gt; ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ HCL Syntaxì— ë§ì¶° &lt;strong&gt;human-readable&lt;/strong&gt;í•œ í˜•íƒœë¡œ ì¶œë ¥í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;terraform show &lt;span class=&quot;nt&quot;&gt;-no-color&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; main.tf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ë³¸ë˜ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-no-color&lt;/code&gt; ì˜µì…˜ì€ coloring ì‘ì—…ì„ ë¹„í™œì„±í™”í•˜ì§€ë§Œ, Editorì— format ë§ì¶”ê¸° ìœ„í•´ í•„ìˆ˜ì ìœ¼ë¡œ í•´ë‹¹ ì˜µì…˜ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;3ï¸âƒ£-modify-arguments&quot;&gt;3ï¸âƒ£ Modify Arguments&lt;/h3&gt;

&lt;p&gt;ì´ì œì„œì•¼ ì–¼ì¶” ëª¨ì–‘ì„ ê°–ì¶˜ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;main.tf&lt;/code&gt;ì˜ &lt;strong&gt;resource block&lt;/strong&gt;ì—ëŠ” ë¦¬ì†ŒìŠ¤ê°€ ì¸í”„ë¼ì— &lt;strong&gt;ë°˜ì˜ëœ ì´í›„ ë‹¨ê³„ì— ìƒì„±ë˜ëŠ” ê°ì¢… result&lt;/strong&gt; ê°’(&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;arn&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;association_id&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;id&lt;/code&gt;)
ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. í•´ë‹¹ ê°’ë“¤ì€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform plan&lt;/code&gt; ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•´ Error ë©”ì‹œì§€ì— ëª…ì‹œë˜ë¯€ë¡œ ì§€ì›Œì•¼ í•˜ëŠ” Argumentsë“¤ì„ ì°¾ì•„ ì½”ë“œë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì´ë•Œ, Instancd Id, IAM Role ARN ë“±ê³¼ ê°™ì´ &lt;strong&gt;ì ˆëŒ€ì ì¸ ê°’&lt;/strong&gt;ë„ &lt;strong&gt;ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ë³€ìˆ˜&lt;/strong&gt;ë¡œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.
í•´ë‹¹ ì‘ì—…ì„ ë§ˆì¹˜ê³  ë‚˜ë©´, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;plan&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;apply&lt;/code&gt; ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ì—¬ ë‹¤ìŒ ë©”ì‹œì§€ë¥¼ ì–»ìœ¼ë©´ ì •ìƒì ìœ¼ë¡œ Import ì‘ì—…ì´ ì™„ë£Œëœ ê²ƒì…ë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Apply complete! Resources: 0 added, 0 changed, 0 destroyed.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;-import-into-module&quot;&gt;ğŸ¥µ Import into Module&lt;/h2&gt;

&lt;p&gt;ì§€ê¸ˆê¹Œì§€ í•™ìŠµí•œ ì ˆì°¨ëŠ” ë‹¨ìˆœ &lt;strong&gt;Resource&lt;/strong&gt;ì— Import ì‹œí‚¤ë¯€ë¡œ ë¹„êµì  ìˆ˜ì›”í•œ ê³¼ì •ì´ì—ˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Resource configured with count &lt;br /&gt;
â¡ï¸ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform import 'aws_instance.baz[0]' i-abcd1234&lt;/code&gt; &lt;br /&gt;
Resource configured with for_each &lt;br /&gt;
â¡ï¸ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform import 'aws_instance.baz[&quot;example&quot;]' i-abcd1234&lt;/code&gt; &lt;br /&gt;
Module &lt;br /&gt;
â¡ï¸ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform import module.foo.aws_instance.bar i-abcd1234&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Moduleì„ Import í•˜ëŠ” ì ˆì°¨ë„ Resourceì™€ ë™ì¼í•˜ì§€ë§Œ, ëª…ë°±í•œ &lt;strong&gt;í•œê³„ì &lt;/strong&gt;ì´ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;í”í•˜ê²Œ ì‚¬ìš©ë˜ëŠ” &lt;a href=&quot;https://registry.terraform.io/modules/terraform-aws-modules/ec2-instance/aws/latest&quot;&gt;ec2-instance&lt;/a&gt; ëª¨ë“ˆì„ ì‚¬ìš©í•œë‹¤ê³  ê°€ì •í•˜ê² ìŠµë‹ˆë‹¤.
Resource ë•Œì™€ ë™ì¼í•˜ê²Œ ì•„ë˜ì™€ ê°™ì€ Skeleton Codeë¥¼ ì‘ì„±í•˜ê³  Import ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ëŠ” ë¶€ë¶„ì€ ë™ì¼í•©ë‹ˆë‹¤. (1ï¸âƒ£ &amp;amp; 2ï¸âƒ£ ê³¼ì • ë™ì¼)&lt;/p&gt;

&lt;div class=&quot;language-terraform highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ec2_instance&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;source&lt;/span&gt;  &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;terraform-aws-modules/ec2-instance/aws&quot;&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;~&amp;gt; 3.0&quot;&lt;/span&gt;

  &lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;single-instance&quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ì´ë•Œ, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;foo&lt;/code&gt;ëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ec2_instance&lt;/code&gt;ê°€ ë˜ê³  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bar&lt;/code&gt;ëŠ” í•´ë‹¹ ëª¨ë“ˆì˜ &lt;strong&gt;aws_instance&lt;/strong&gt;ì—ì„œ ì •ì˜í•œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;this&lt;/code&gt;ê°€ ë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ë¬¸ì œëŠ” &lt;strong&gt;3ï¸âƒ£ Modify Arguments&lt;/strong&gt; ë‹¨ê³„ì—ì„œ ë°œìƒí•©ë‹ˆë‹¤. Single Resourceì—ì„œëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;plan&lt;/code&gt;ì„ í†µí•´ ìˆ˜ì •í•´ì•¼ í•˜ëŠ” &lt;strong&gt;Arguments&lt;/strong&gt;ë“¤ì„ ì•Œ ìˆ˜ ìˆì§€ë§Œ, 
moduleì—ì„œ skeleton code ì´ì™¸ì— ë” ê¸°ì¬í•´ì•¼ í•˜ëŠ” variable ê°’ë“¤ì„ ì•Œ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
ì¦‰, module import ì´í›„ ìƒì„±ë˜ëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*.tfstate&lt;/code&gt; íŒŒì¼ì˜ &lt;strong&gt;json ê°’ì„ ì¼ì¼ì´ í™•ì¸&lt;/strong&gt;í•˜ì—¬ moduleì˜ &lt;strong&gt;input parameterì— í•´ë‹¹í•˜ëŠ” ê°’&lt;/strong&gt;ë“¤ì„ ì•Œì•„ë‚´ &lt;strong&gt;í•˜ë‚˜ì”© ë‹¤ ê¸°ì¬&lt;/strong&gt;í•˜ëŠ” ë°©ë²• ì™¸ì—ëŠ” 
ì˜¨ì „í•˜ê²Œ import ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;Reverse Engineeringìœ¼ë¡œ ì›ë˜ì˜ ì½”ë“œë¥¼ ì™„ë²½í•˜ê²Œ ì¬í˜„í•˜ê¸° ì–´ë ¤ìš´ ê²ƒì²˜ëŸ¼, êµ¬ì„±ì´ ë³µì¡í•œ ëª¨ë“ˆì€ Reverse Terraformingì´ ë§¤ìš° ì–´ë µìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;-reverse-terraform-open-source&quot;&gt;ğŸŒ Reverse Terraform Open Source&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;2ï¸âƒ£ Import Configuration&lt;/strong&gt; ë‹¨ê³„ì—ì„œ ìˆ˜í–‰í•œ ì‘ì—…ì€ &lt;a href=&quot;https://github.com/GoogleCloudPlatform/terraformer&quot;&gt;Terraformer&lt;/a&gt;(ì‘ì„± ì‹œì  ê¸°ì¤€ â˜… 8.1k),
&lt;a href=&quot;https://github.com/dtan4/terraforming&quot;&gt;Terraforming&lt;/a&gt;(ì—…ë°ì´íŠ¸ ì¢…ë£Œ) ë“±ê³¼ ê°™ì€ ì˜¤í”ˆì†ŒìŠ¤ ë„êµ¬ë¥¼ í™œìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;âš ï¸ ê³ ë ¤ ì‚¬í•­&lt;/strong&gt;&lt;br /&gt;
&lt;strong&gt;Terraformer&lt;/strong&gt;ëŠ” &lt;a href=&quot;https://github.com/GoogleCloudPlatform/terraformer/blob/master/docs/aws.md#profiles-support&quot;&gt;AWS configuration Profiles Select&lt;/a&gt;ì™€ &lt;a href=&quot;https://github.com/GoogleCloudPlatform/terraformer/blob/master/docs/aws.md#attribute-filters&quot;&gt;Attribute filters&lt;/a&gt;ê³¼ ê°™ì€ í¸ë¦¬í•œ ê¸°ëŠ¥ë“¤ì„ ì œê³µí•©ë‹ˆë‹¤. &lt;br /&gt;
ê·¸ëŸ¬ë‚˜ &lt;a href=&quot;https://github.com/GoogleCloudPlatform/terraformer/blob/master/docs/aws.md#supported-services&quot;&gt;terraformer AWS ë¦¬ì†ŒìŠ¤ ì§€ì› ë²”ìœ„&lt;/a&gt;ì—ì„œë„ í™•ì¸í•  ìˆ˜ ìˆë‹¤ì‹œí”¼,
ìœ„ì—ì„œ ì‘ì—…í•œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;aws_ssm_association&lt;/code&gt;ê³¼ ê°™ì´ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¦¬ì†ŒìŠ¤ë“¤ë„ ì¡´ì¬í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;outro&quot;&gt;Outro&lt;/h2&gt;

&lt;p&gt;ë§ˆì§€ë§‰ìœ¼ë¡œ Import Workflowë¥¼ ë‹¤ì‹œ í•œë²ˆ ì •ë¦¬í•˜ë©´ì„œ ë§ˆì¹˜ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Import ëŒ€ìƒ(ì´ë¯¸ í”„ë¡œë¹„ì €ë‹ ëœ ì¸í”„ë¼)ì´ ë˜ëŠ” Skeleton Code ì‘ì„±&lt;/li&gt;
  &lt;li&gt;Write Config : Import &amp;amp; Show ëª…ë ¹ì–´ ìˆ˜í–‰&lt;/li&gt;
  &lt;li&gt;Modify Arguments&lt;/li&gt;
  &lt;li&gt;Plan &amp;amp; Apply&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ì§€ê¸ˆê¹Œì§€ í…Œë¼í¼ ë” ìµìˆ™í•˜ê²Œ Import í¸ì„ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ì˜ëª»ëœ ë‚´ìš©ì€ ì§€ì í•´ ì£¼ì„¸ìš”! ğŸ˜ƒ&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ğŸ“š References&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Terraform Documentation &lt;a href=&quot;https://www.terraform.io/cli/commands/import&quot;&gt;Import Command&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Hashicorp Tutorial ë¬¸ì„œ &lt;a href=&quot;https://learn.hashicorp.com/tutorials/terraform/state-import?in=terraform/state&quot;&gt;Import Terraform Configuration&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;span class=&quot;table-of-contents-list&quot;&gt;Terraform Tips&lt;/span&gt;&lt;/p&gt;
&lt;ul class=&quot;table-of-contents-list&quot;&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips1&quot;&gt;Module &amp;amp; Output&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips2&quot;&gt;Data &amp;amp; Index&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips3&quot;&gt;Refresh &amp;amp; Replace&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips4&quot;&gt;Move (Refactoring)&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips5&quot;&gt;Import&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;</content>

      
      
      
      
      

      <author>
          <name>Heuristic Wave</name>
        
        
      </author>

      

      
        <category term="devops" />
      
        <category term="terraform" />
      

      
        <summary type="html">Terraform ë” ìµìˆ™í•˜ê²Œ 5 - Import</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">ECS on EC2 Walkthrough</title>
      <link href="https://heuristicwave.github.io/ECS_Walkthrough" rel="alternate" type="text/html" title="ECS on EC2 Walkthrough" />
      <published>2022-07-03T00:00:00+00:00</published>
      <updated>2022-07-03T00:00:00+00:00</updated>
      <id>https://heuristicwave.github.io/ECS_Walkthrough</id>
      <content type="html" xml:base="https://heuristicwave.github.io/ECS_Walkthrough">&lt;p&gt;EC2 ê¸°ë°˜ì˜ ECSë¥¼ ë‹¤ë£¨ê¸° ìœ„í•œ ì‚¬ì†Œí•œ ì§€ì‹ë“¤ í†±ì•„ë³´ê¸°!&lt;/p&gt;

&lt;h1 id=&quot;intro&quot;&gt;Intro&lt;/h1&gt;

&lt;p&gt;ë‹¹ì¥ Amazon Elastic Container Service(ì´í•˜ ECS)ë¥¼ ìš´ì˜í•´ì•¼ í•˜ì§€ë§Œ, ê³µì‹ ë¬¸ì„œë¥¼ ë‹¤ ì½ê¸°ì—ëŠ” ë²…ì°¨ê³  ì¤‘ìš”í•œ ìš´ì˜ í¬ì¸íŠ¸ë“¤ì„ ë¹ ë¥´ê²Œ í•™ìŠµí•˜ê¸° ìœ„í•´ ì•„ë˜ì™€ ê°™ì€ ìš”ì†Œë“¤ì„ ë‹¤ë£¹ë‹ˆë‹¤.
&lt;em&gt;ECS ë§ˆìŠ¤í„°&lt;/em&gt;ê°€ ë  ìˆ˜ ìˆëŠ” ëª¨ë“  ê²ƒì„ ë‹¤ë£¨ëŠ” ê²ƒì€ ì•„ë‹ˆì§€ë§Œ, ìµœì†Œí•œì˜ ê³ ë¯¼í•´ ë³¼ ë§Œí•œ ì§€ì ë“¤ì„ ë‹¤ë¤„ë³´ì•˜ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Amazon ECS Container Agent&lt;/li&gt;
  &lt;li&gt;ECS ë¦¬ì†ŒìŠ¤ í• ë‹¹&lt;/li&gt;
  &lt;li&gt;ECS Scaling&lt;/li&gt;
  &lt;li&gt;ECS ì„œë¹„ìŠ¤ êµ¬ì„±&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;-ecs-container-agent&quot;&gt;ğŸ•‹ ECS Container Agent&lt;/h2&gt;

&lt;p&gt;EC2 ê¸°ë°˜ì˜ ECSë¥¼ ìš´ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” &lt;a href=&quot;https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-optimized_AMI.html&quot;&gt;ECS ìµœì í™” AMI&lt;/a&gt;ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
ì¼ë°˜ EC2 ì¸ìŠ¤í„´ìŠ¤ë¡œë„ ECSë¥¼ ìš´ìš©í•  ìˆ˜ ìˆì§€ë§Œ, ECS ìµœì í™” AMIë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê´€ë¦¬ì™€ ìš´ìš© ì¸¡ë©´ì—ì„œ ìœ ë¦¬í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ì˜ˆë¥¼ ë“¤ì–´ Dockerë¥¼ ìš´ì˜í•˜ë‹¤ ë³´ë©´, ë¯¸ì‚¬ìš© ìƒíƒœì¸ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ê°€ ìŒ“ì—¬ë‚˜ê°€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;prune&lt;/code&gt; ëª…ë ¹ì–´ë¥¼ í†µí•´ ì´ë¯¸ì§€ë¥¼ ì •ë¦¬í•´ ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.
ì´ëŸ° ìƒí™©ì—ì„œ ì»¨í…Œì´ë„ˆ ì—ì´ì „íŠ¸ëŠ” ë‹¤ì–‘í•œ &lt;a href=&quot;https://docs.aws.amazon.com/AmazonECS/latest/developerguide/automated_image_cleanup.html#automated_image_cleanup_parameters&quot;&gt;ìë™í™”ëœ ì´ë¯¸ì§€ ì •ë¦¬&lt;/a&gt; ì˜µì…˜ì„ ì œê³µí•©ë‹ˆë‹¤.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ECS-optimized AMIì—ëŠ” &lt;a href=&quot;https://github.com/aws/amazon-ecs-agent&quot;&gt;Amazon ECS Container Agent&lt;/a&gt;ê°€ ê¸°ë³¸ì ìœ¼ë¡œ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
ECS ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë¶€íŠ¸ìŠ¤íŠ¸ë© í•˜ëŠ” ë‹¨ê³„ì—ì„œ EC2ì˜ user dataë¥¼ ì‚¬ìš©í•´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/ecs/ecs.config&lt;/code&gt;ì— configuration parametersì„ ì „ë‹¬í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì•„ë˜ì™€ ê°™ì´ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì§€ì •í•˜ì§€ ì•Šì•„ë„ default ê°’ì´ ì§€ì •ë˜ì–´ ìˆì–´ ìš´ìš©ìƒì˜ í° ë¬¸ì œëŠ” ì—†ì§€ë§Œ,
&lt;a href=&quot;https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-agent-config.html&quot;&gt;ê³µì‹ ë¬¸ì„œ&lt;/a&gt;ë¥¼ í™•ì¸í•´ í•„ìš”í•œ configuration ë“¤ì„ íŒŒì•…í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#!/bin/bash&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;EOF&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;' &amp;gt;&amp;gt; /etc/ecs/ecs.config
ECS_CLUSTER=MyCluster
ECS_LOGLEVEL=debug
&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;EOF
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ë‹¤ì–‘í•œ configuration ì¤‘, ìš´ì˜ í™˜ê²½(GPU, SPOT, ì„œë¹„ìŠ¤ ë“±)ì— ë”°ë¼ í•„ìš”í•œ Configuration ê°’ë“¤ì´ ë‹¤ë¥´ê² ì§€ë§Œ ì¼ë°˜ì ìœ¼ë¡œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ECS_RESERVED_MEMORY&lt;/code&gt;ëŠ” ê³ ë ¤í•˜ì—¬ ì§€ì •í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ğŸ’¡ ì¸ìŠ¤í„´ìŠ¤ì˜ ëª¨ë“  ë©”ëª¨ë¦¬ë¥¼ í…ŒìŠ¤í¬ì— ë°°ì •í•œë‹¤ë©´, í…ŒìŠ¤í¬ì™€ ì¤‘ìš”í•œ ì‹œìŠ¤í…œ í”„ë¡œì„¸ìŠ¤ ì‚¬ì´ì—ì„œ ë©”ëª¨ë¦¬ ê²½í•©ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì´ë¥¼ ì˜ˆë°©í•˜ê¸° ìœ„í•´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ECS_RESERVED_MEMORY&lt;/code&gt; configurationì„ ì‚¬ìš©í•´ ë©”ëª¨ë¦¬ë¥¼ ì˜ˆì•½í•¨ìœ¼ë¡œì¨ í’€ì—ì„œ í• ë‹¹ ê°€ëŠ¥í•œ ë©”ëª¨ë¦¬ë¥¼ ì œì™¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
í•„ìš”ë¡œ í•˜ëŠ” ìµœì†Œí•œì˜ ìš”êµ¬ ë©”ëª¨ë¦¬ê°€ ì •ì˜ë˜ì–´ ìˆì§€ëŠ” ì•Šì§€ë§Œ, ì €ëŠ” ë¬¸ì„œì˜ ì˜ˆì‹œì²˜ëŸ¼ 256MiBë¡œ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;-ecs-resource&quot;&gt;ğŸ› ECS Resource&lt;/h2&gt;

&lt;p&gt;ECSëŠ” 3ê°€ì§€ ë²”ì£¼ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ğŸ¥‡ &lt;strong&gt;Container instance&lt;/strong&gt; : ECS í´ëŸ¬ìŠ¤í„°ë¥¼ ì´ë£¨ê³  ìˆëŠ” EC2 ì¸ìŠ¤í„´ìŠ¤ì˜ ìœ í˜• &lt;br /&gt;
ğŸ¥ˆ &lt;strong&gt;Task Size&lt;/strong&gt; : Task Definitionsì„ í†µí•´ ì •ì˜í•˜ëŠ” Size &lt;br /&gt;
ğŸ¥‰ &lt;strong&gt;Container Size&lt;/strong&gt; : Task Definitionsì˜ Container ì •ì˜ ë¶€ë¶„ì—ì„œ ì •ì˜í•˜ëŠ” Size &lt;br /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ğŸ’¡ Container Sizeì˜ ë¦¬ì†ŒìŠ¤ í• ë‹¹ íŒŒë¼ë¯¸í„°ëŠ” ê°ê° ë‹¤ìŒê³¼ ê°™ì€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;docker run&lt;/code&gt; ëª…ë ¹ì–´ ì˜µì…˜ì— ë§¤í•‘ë©ë‹ˆë‹¤. &lt;br /&gt;
&lt;strong&gt;cpu&lt;/strong&gt; : &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--cpu-shares&lt;/code&gt;, &lt;strong&gt;memory&lt;/strong&gt; : &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--memory&lt;/code&gt;(hard) / &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--memory-reservation&lt;/code&gt;(soft)
&lt;br /&gt;&lt;br /&gt;
ğŸ’¡ ECS on EC2ì—ì„œëŠ” Task Sizeì™€ Container Size ë°©ì‹ ì¤‘ ì„ íƒ ê°€ëŠ¥í•˜ì§€ë§Œ, Fargate ë°©ì‹ì—ì„œ Task SizeëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;details&gt;
  &lt;summary&gt;Hard ğŸ†š Soft&lt;/summary&gt;

  &lt;p&gt;ECSì˜ Container Sizeë¥¼ ì¡°ì ˆí•˜ê¸° ìœ„í•´ Container definitionsì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë°©ë²•ìœ¼ë¡œ ì œì–´í•©ë‹ˆë‹¤.&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;CPU : Unit ë‹¨ìœ„, 1,024ê°œì˜ CPU ìœ ë‹›ì€ vCPU 1ê°œ&lt;/li&gt;
    &lt;li&gt;Memory : Hard/Soft Limits
      &lt;ul&gt;
        &lt;li&gt;Hard : Dockerì˜ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--memory&lt;/code&gt; ì˜µì…˜ì— í•´ë‹¹í•˜ë©°, ëª…ì‹œí•œ ê°’ë§Œí¼ ë¦¬ì†ŒìŠ¤ ì œì•½ì´ ìƒê¹ë‹ˆë‹¤.
ë•Œë¬¸ì— í´ëŸ¬ìŠ¤í„° ì¸ìŠ¤í„´ìŠ¤ì—ì„œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;docker stats&lt;/code&gt; ëª…ë ¹ì–´ë¥¼ ì¡°íšŒí•˜ë©´ LIMIT ê°’ì´ &lt;strong&gt;Hardë¡œ ëª…ì‹œí•œ ê°’&lt;/strong&gt;ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤.&lt;/li&gt;
        &lt;li&gt;Soft : Dockerì˜ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--memory-reservation&lt;/code&gt; ì˜µì…˜ì— í•´ë‹¹í•˜ë©°, ëª…ì‹œí•œ ê°’ì´ í´ëŸ¬ìŠ¤í„° ì¸ìŠ¤í„´ìŠ¤ì— ì˜ˆì•½ë©ë‹ˆë‹¤.
soft limitì´ë¯€ë¡œ ì»¨í…Œì´ë„ˆ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ëª…ì‹œí•œ ê°’ì˜ ì œí•œì„ ë„˜ê²¨ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.
Hardì™€ëŠ” ë‹¬ë¦¬, í´ëŸ¬ìŠ¤í„° ì¸ìŠ¤í„´ìŠ¤ì—ì„œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;docker stats&lt;/code&gt; ëª…ë ¹ì–´ë¥¼ ì¡°íšŒí•˜ë©´ LIMIT ê°’ì´ &lt;strong&gt;í´ëŸ¬ìŠ¤í„° ì¸ìŠ¤í„´ìŠ¤ì˜ ì´ ìì›&lt;/strong&gt;ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
  &lt;/ul&gt;

&lt;/details&gt;

&lt;p&gt;ğŸ¥‡ë¡œ ê°ˆìˆ˜ë¡ ë” ìƒìœ„ ê°œë…ì´ë©°, Task Definitionsì—ì„œëŠ” ğŸ¥ˆ, ğŸ¥‰ì„ í™œìš©í•´ ë¦¬ì†ŒìŠ¤ë¥¼ ì œì–´í•©ë‹ˆë‹¤.
ì„¸ë°€í•œ ì œì–´ë¥¼ í•˜ê³  ì‹¶ë‹¤ë©´ ğŸ¥ˆ, ğŸ¥‰ì„ ëª¨ë‘ ì‚¬ìš©í•˜ì—¬ ì œì–´í•  ìˆ˜ ìˆìœ¼ë‚˜,
ğŸ¥‰ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” íŠ¹ë³„í•œ ì´ìœ ê°€ ì—†ë‹¤ë©´ ğŸ¥ˆë§Œì„ ì‚¬ìš©í•´ ë¦¬ì†ŒìŠ¤ë¥¼ ì œì–´í•˜ëŠ” ê²ƒì´ ìš©ì´í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;actual-available-memory&quot;&gt;Actual available memory&lt;/h3&gt;

&lt;p&gt;16GiBì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í”„ë¡œë¹„ì €ë‹í•´ë„ &lt;strong&gt;ì‹¤ì œ ì‚¬ìš© ê°€ëŠ¥í•œ ë©”ëª¨ë¦¬(15318 MiB)&lt;/strong&gt;ëŠ” ë” ì ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Amazon EC2&lt;/th&gt;
      &lt;th&gt;ì¸ìŠ¤í„´ìŠ¤&lt;/th&gt;
      &lt;th&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;free -m&lt;/code&gt;&lt;/th&gt;
      &lt;th&gt;Registered&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;c5.2xlarge&lt;/td&gt;
      &lt;td&gt;16384 MiB&lt;/td&gt;
      &lt;td&gt;15574 MiB&lt;/td&gt;
      &lt;td&gt;15318 MiB&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;EC2 ì¸ìŠ¤í„´ìŠ¤ì™€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;free -m&lt;/code&gt; ëª…ë ¹ì–´ë¡œ í™•ì¸í•œ ì°¨ì´&lt;/p&gt;

&lt;p&gt;&lt;em&gt;ECS í”Œë«í¼ ë©”ëª¨ë¦¬ ì˜¤ë²„í—¤ë“œì™€ OS ì»¤ë„ì´ ì°¨ì§€í•˜ëŠ” ë©”ëª¨ë¦¬ë¡œ ì¸í•´ ì°¨ì´ê°€ ë°œìƒí•©ë‹ˆë‹¤.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;free -m&lt;/code&gt; ëª…ë ¹ì–´ë¡œ í™•ì¸í•œ ë©”ëª¨ë¦¬ì™€ ì»¨í…Œì´ë„ˆ ì¸ìŠ¤í„´ìŠ¤(registered)ì˜ ì°¨ì´&lt;/p&gt;

&lt;p&gt;&lt;em&gt;ì»¨í…Œì´ë„ˆ ì—ì´ì „íŠ¸ë¥¼ ì„¤ì •í•  ë•Œ, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ECS_RESERVED_MEMORY=256&lt;/code&gt;ìœ¼ë¡œ ì„¤ì •í•œ ë§Œí¼ ì°¨ì´ê°€ ë°œìƒí•©ë‹ˆë‹¤.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;-ecs-scaling&quot;&gt;ğŸ˜ ECS Scaling&lt;/h2&gt;

&lt;p&gt;ECSì˜ Scaling ë°©ë²•ì€ 2ê°€ì§€ë¡œ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•´ë‹¹ ìŠ¤ì¼€ì¼ë§ ê¸°ë²•ì€ ì„ íƒ ì‚¬í•­ì´ ì•„ë‹ˆë¼, 2ê°€ì§€ ëª¨ë‘ë¥¼ ê³ ë ¤í•´ ì ìš©í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Serviceì— ì˜í•˜ì—¬ Taskê°€ Scaling ë˜ëŠ” Horizontal Autoscaling&lt;/li&gt;
  &lt;li&gt;CapacityProviderì— ì˜í•˜ì—¬ ì»¨í…Œì´ë„ˆ ì¸ìŠ¤í„´ìŠ¤ê°€ Scaling ë˜ëŠ” Cluster Autoscaling&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;service-auto-scaling&quot;&gt;Service auto scaling&lt;/h3&gt;

&lt;p&gt;ì„œë¹„ìŠ¤ ìŠ¤ì¼€ì¼ë§ì€ ë˜ë‹¤ì‹œ &lt;a href=&quot;https://docs.aws.amazon.com/AmazonECS/latest/userguide/service-autoscaling-targettracking.html&quot;&gt;Target tracking&lt;/a&gt;ê³¼ &lt;a href=&quot;https://docs.aws.amazon.com/AmazonECS/latest/userguide/service-autoscaling-stepscaling.html&quot;&gt;Step&lt;/a&gt; scalingìœ¼ë¡œ ë‚˜ë‰©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;Target trackingì€ &lt;strong&gt;CPU/Memory ì‚¬ìš©ë¥ &lt;/strong&gt; ë° &lt;strong&gt;ALB ìš”ì²­ íšŸìˆ˜&lt;/strong&gt;ë¥¼ ê¸°ë°˜ì˜ ì •ì±…ì´ ìˆìœ¼ë©°, Step ë°©ì‹ì€ &lt;strong&gt;Alarmì„ í™œìš©í•œ Custom&lt;/strong&gt; ì •ì±…ë“¤ì„ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ğŸ’¡ Step scaling policiesì˜ ë¬¸ì„œ ì²« ë¬¸ì¥ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. &lt;br /&gt;
Although Amazon ECS service auto scaling supports using Application Auto Scaling step scaling policies, we recommend using target tracking scaling policies instead. &lt;br /&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Step scalingì€ ì¡°ê¸ˆ ë” ê³µê²©ì ì¸ ì •ì±…ì´ í•„ìš”í•  ë•Œ ëŒ€ì•ˆìœ¼ë¡œ ì‚¬ìš©í•˜ê³ , Service auto scalingì€ ë³µìˆ˜ì˜ ì¡°ì • ì •ì±…ì„ ë™ì‹œì— í™œìš©í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ í•˜ë‚˜ì˜ ì •ì±…ì— ì˜ì¡´í•˜ê¸°ë³´ë‹¤ëŠ” ë³µìˆ˜ì˜ ì •ì±…ì„ ì‚¬ìš©í•´ ë³´ë‹¤ ì„¸ë°€í•œ Scaling ì •ì±…ì„ ë§Œë“œëŠ” ê²Œ ì–´ë–¨ê¹Œìš”? ğŸ§&lt;/p&gt;

&lt;h3 id=&quot;cluster-auto-scaling&quot;&gt;Cluster auto scaling&lt;/h3&gt;

&lt;p&gt;Service auto scalingì— ì»¨í…Œì´ë„ˆ ì¸ìŠ¤í„´ìŠ¤ ë‚´ ìì›ì„ ë‹¤ í• ë‹¹í–ˆì„ ê²½ìš°, CapacityProvider EC2 Auto Scalingì„ í™œìš©í•´ í´ëŸ¬ìŠ¤í„° ìì›ì„ í™•ë³´í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://aws.amazon.com/blogs/containers/deep-dive-on-amazon-ecs-cluster-auto-scaling/&quot;&gt;AWS ë¸”ë¡œê·¸&lt;/a&gt;ì— ìì„¸í•œ ì‘ë™ì›ë¦¬ê°€ ë‚˜ì˜¤ë¯€ë¡œ ê¼­ í•œë²ˆ ì½ì–´ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤.
í•´ë‹¹ ë‚´ìš©ì„ ìš”ì•½í•˜ìë©´ &lt;strong&gt;Capacity Provider&lt;/strong&gt;ë¥¼ Cluster ì¸í”„ë¼ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.
ì´ë¥¼ ìœ„í•´ &lt;strong&gt;CapacityProviderReservation ì§€í‘œ&lt;/strong&gt;ê°€ ì¡´ì¬í•˜ê³  ì‚¬ì „ì— ì„¤ì •í•œ &lt;strong&gt;Target capacity %&lt;/strong&gt;(1~100ì‚¬ì´ì˜ ê°’)ì— ë§ì¶° EC2 AutoScalingGroup(ASG)ì— Triggerê°€ ì‘ë™í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CapacityProviderReservation(%) = M(í˜„ì¬ ì¸ìŠ¤í„´ìŠ¤+ì¶”ê°€ ìš”ì²­ ì¸ìŠ¤í„´ìŠ¤)/N(í˜„ì¬ ì¸ìŠ¤í„´ìŠ¤) * 100(%)&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;ë§Œì•½ Target capacityì„ 100ìœ¼ë¡œ ì§€ì •í–ˆì„ ë•Œ, í˜„ì¬ Clusterì˜ Node ê°œìˆ˜ê°€ 3ì´ê³  CapacityProviderReservationê°€ 200ì´ë¼ë©´
CapacityProviderReservationë¥¼ ëª©í‘œì¹˜(Target capacity)ì¸ 100ì— ë§ì¶”ê¸° ìœ„í•´ 3ê°œì˜ EC2ë¥¼ Scale-out ì‹œí‚µë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;âš ï¸ To create an empty Auto Scaling group, set the desired count to zero. &lt;br /&gt; 
Capacity ProviderëŠ” &lt;strong&gt;Desired&lt;/strong&gt; ê°’ì´ &lt;strong&gt;0&lt;/strong&gt;ì¸ ASGì™€ ì—°ê²°ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ë˜í•œ CapacityProviderì— ì˜í•˜ì—¬ ê´€ë¦¬í˜• ì¡°ì •ì„ enable í•œ ìƒíƒœì—ì„œ,
ASGë¥¼ &lt;strong&gt;ìˆ˜ë™&lt;/strong&gt;ìœ¼ë¡œ ìˆ˜ì •í•œë‹¤ë©´ CapacityProviderReservation ê³„ì‚°ì— ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆìœ¼ë¯€ë¡œ &lt;strong&gt;ì§€ì–‘&lt;/strong&gt;í•´ì•¼ í•©ë‹ˆë‹¤. 
&lt;br /&gt;&lt;br /&gt;
ğŸš«ï¸ DO NOT EDIT OR DELETE &lt;br /&gt;
í•´ë‹¹ ë©”ì‹œì§€ëŠ” Service &amp;amp; Cluster Scalingì´ CloudWatchì— ìë™ìœ¼ë¡œ ìƒì„±í•œ TargetTrackingì˜ ì£¼ì„ ë‚´ìš©ì…ë‹ˆë‹¤.
ê´€ë¦¬í˜• ì •ì±…ì˜ ê¸°ëŠ¥ì„ í™œìš© ì‹œ, ì¡°ê¸ˆ ë” ì„¸ë°€í•œ Scaling í•„ìš”í•˜ë‹¤ë©´ ì•ŒëŒ Triggerì˜ ë¹ˆë„ê°€ ì•„ë‹Œ ë‹¤ë¥¸ ë°©ì•ˆì„ ê³ ë¯¼í•˜ë„ë¡ í•©ë‹ˆë‹¤!&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;-ecs-service-configuration&quot;&gt;ğŸ§® ECS Service Configuration&lt;/h2&gt;

&lt;h3 id=&quot;deployment-configuration&quot;&gt;Deployment Configuration&lt;/h3&gt;

&lt;p&gt;ECS ì„œë¹„ìŠ¤ì—ì„œ &lt;a href=&quot;https://docs.aws.amazon.com/AmazonECS/latest/APIReference/API_DeploymentConfiguration.html&quot;&gt;ë°°í¬ì™€ ê´€ë ¨ëœ ì„¤ì •&lt;/a&gt;ì„ ë³´ë©´, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;maximumPercent&lt;/code&gt;ì™€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;minimumHealthyPercent&lt;/code&gt;ê°€ ìˆìŠµë‹ˆë‹¤.
ë¹„ìŠ·í•˜ë©´ì„œë„ í—·ê°ˆë¦¬ê¸° ì‰¬ìš´ 2ê°œì˜ ì„¤ì •ê°’ ê°œë…ì€ ì†ì— ì¡íë“¯í•˜ë©´ì„œë„ ì‰½ê²Œ ì¡íˆì§€ ì•ŠëŠ” ê²ƒ ê°™ì•„, ì˜ˆì‹œ ìƒí™©ì„ ì ì–´ë³´ì•˜ìŠµë‹ˆë‹¤.ğŸ˜‚&lt;/p&gt;

&lt;p&gt;&lt;em&gt;í•´ë‹¹ ê°œë…ì´ ì¡°ê¸ˆ ë” ì™€ë‹¿ì„ ìˆ˜ ìˆë„ë¡, ê³µì‹ ë¬¸ì„œë¥¼ ì½ì–´ë³´ì‹œê³  ì•„ë˜ ìƒí™©ì´ ì–´ë–¨ì§€ ì˜ˆìƒí•´ ë³´ì„¸ìš”!&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;ğŸ§‘ğŸ»â€ğŸ’»ëŠ” ECS &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;maximumPercent&lt;/code&gt;ê°€ 200%, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;minimumHealthyPercent&lt;/code&gt;ê°€ 100%ë¡œ ì„¤ì •ë˜ì–´ ìˆìœ¼ë©°, Rolling update ë°©ì‹ì„ ì‚¬ìš©í•˜ê³  ìˆë‹¤.
í˜„ì¬ ver01ì„ ìš´ì˜í•˜ëŠ” ğŸ§‘ğŸ»â€ğŸ’»ëŠ” ì‹¤ìˆ˜ë¡œ ì˜¤ë¥˜ë¥¼ í¬í•¨í•œ ver02ë¥¼ ë°°í¬í–ˆë‹¤. ê¸°ì¡´ Task 4ê°œì¼ ë•Œ, ì–´ë–¤ ìƒí™©ì´ ë²Œì–´ì§€ëŠ”ê°€?&lt;/p&gt;

&lt;details&gt;
  &lt;summary&gt;ğŸ– ì •ë‹µ ë³´ê¸°&lt;/summary&gt;

  &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;minimumHealthyPercent&lt;/code&gt;ê°€ 100%ì´ê¸° ë•Œë¬¸ì— ver02ì— í”„ë¡œë¹„ì €ë‹ë˜ê³  ì •ìƒ ìƒíƒœë¡œ í™•ì¸ë  ë•Œê¹Œì§€ ver01ì€ ì¤‘ë‹¨ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
ver02ëŠ” &lt;strong&gt;running&lt;/strong&gt; ìƒíƒœë¡œ ì§„ì…í•˜ì§€ ëª»í•´ &lt;strong&gt;provisioning-pending-stopped&lt;/strong&gt; ë‹¨ê³„ë¥¼ ë°˜ë³µí•©ë‹ˆë‹¤.
ì´ë•Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;maximumPercent&lt;/code&gt;ê°€ 200%ì„ì— ë”°ë¼ ver02 TaskëŠ” 4ê°œì™€ ver01 Task 4ê°œ(í•©, ìµœëŒ€ 8ê°œ)ì˜ Taskê°€ ë™ì‹œì— ì˜¬ë¼ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;/details&gt;

&lt;h3 id=&quot;task-placement&quot;&gt;Task Placement&lt;/h3&gt;

&lt;p&gt;ECSì˜ ì„œë¹„ìŠ¤ê°€ ì»¨í…Œì´ë„ˆ ì¸ìŠ¤í„´ìŠ¤ì— Taskë¥¼ ë°°ì¹˜í•˜ëŠ” ì „ëµì€ ì•„ë˜ì™€ ê°™ì´ 3ê°€ì§€ ë¶„ë¥˜ë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;binpack&lt;/code&gt;: CPU ë˜ëŠ” ë©”ëª¨ë¦¬ë¥¼ ìµœì†Œí™”í•˜ê¸° ìœ„í•´ ìœ íœ´ ìì›ì„ ê³ ë ¤í•œ ë°°ì¹˜&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;random&lt;/code&gt; : ë¬´ì‘ìœ„ ë°°ì¹˜&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;spread&lt;/code&gt; : ami-id, availability-zone, instance-type, os-type ë“±ì„ ê³ ë ¤í•œ ë°°ì¹˜&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ìœ„ 3ê°€ì§€ ì „ëµì€ ë‹¨ë… í˜¹ì€ ë³µìˆ˜ë¡œ ì„ íƒë˜ì–´ ì‚¬ìš©ë  ìˆ˜ ìˆìœ¼ë©°, ê°€ìš©ì„±ì„ í™•ë³´í•˜ê¸° ìœ„í•´ AZë¥¼ ê³ ë ¤í•˜ì—¬ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;AZ + binpack&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;AZ + spread&lt;/code&gt;ì™€ ê°™ì´ ì‚¬ìš©ë˜ê¸°ë„ í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ê³µë¶€í•´ ë³´ì‹  ë¶„ì´ë¼ë©´, í•´ë‹¹ ì „ëµì€ ë§ˆì¹˜ k8sì˜ nodeSelectorì™€ ë¹„ìŠ·í•˜ê²Œ ë™ì‘í•©ë‹ˆë‹¤.&lt;/em&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ğŸ”Š CapacityProviderReservationì— ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ë°°í¬ ì„¤ì •ê³¼ ë°°ì¹˜ ì „ëµ &lt;br /&gt;
ECS ì„œë¹„ìŠ¤ ì„¤ì •ì—ì„œ ì–¸ê¸‰í•œ ë°°í¬ ì„¤ì •ê³¼ ë°°ì¹˜ ì „ëµì€ ê°€ìš©ì„± ë¬¸ì œì™€ ì§ê²°ë˜ê³  ì´ëŠ” ë¹„ìš© ë¬¸ì œë¡œë„ ì´ì–´ì§‘ë‹ˆë‹¤.
ì•ì„œ ì–¸ê¸‰ í•œ CapacityProviderReservation ê³„ì‚°ì— í™œìš©ë˜ëŠ” M ê°’ì— ë°°í¬ ì„¤ì •ê³¼ ë°°ì¹˜ ì „ëµì´ ì˜í–¥ì„ ë¯¸ì¹œë‹¤ëŠ” ì ì„ ìœ ì˜í•˜ì„¸ìš”!&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;outro&quot;&gt;Outro&lt;/h2&gt;

&lt;p&gt;ì´ë²ˆ í¬ìŠ¤íŒ…ì„ í†µí•´ ECSì™€ ê´€ë ¨ëœ ë‚´ìš©ì„ ì •ë¦¬í•˜ë‹¤ ë³´ë‹ˆ, AWS ë‚´ì˜ ë‹¤ë¥¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ì„œë¹„ìŠ¤ì¸ EKSì˜ ìš´ìš© ì „ëµê³¼ ë¬´ì²™ì´ë‚˜ ë¹„ìŠ·í•˜ë‹¤ëŠ” ëŠë‚Œì„ ì§€ìš¸ ìˆ˜ ì—†ì—ˆìŠµë‹ˆë‹¤.
ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ HPA ìµœì í™”, Pod ë°°ì¹˜ ë° ë¦¬ì†ŒìŠ¤ í• ë‹¹ ì „ëµê³¼ ê°™ì€ í¬ì¸íŠ¸ë“¤ì€ ìš´ì˜ì„ í•˜ë©° ì§€ì†ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ê´€ë¦¬ ëŒ€ìƒì¸ ë§Œí¼,
ìœ„ì— ì–¸ê¸‰ëœ ECSì˜ ìš´ì˜ í¬ì¸íŠ¸ë“¤ë„ &lt;strong&gt;ì„œë¹„ìŠ¤ë¥¼ ë°°í¬í•œ ì´í›„ì—ë„ ì§€ì†ì ìœ¼ë¡œ ê´€ì‹¬&lt;/strong&gt;ì„ ê°€ì ¸ì•¼ í•˜ëŠ” í¬ì¸íŠ¸ì„ì„ ê°•ì¡°í•˜ë©° ë§ˆì¹©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì†Œì¤‘í•œ ì‹œê°„ì„ ë‚´ì–´ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ì˜ëª»ëœ ë‚´ìš©ì€ ì§€ì í•´ ì£¼ì„¸ìš”! ğŸ˜ƒ&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;</content>

      
      
      
      
      

      <author>
          <name>Heuristic Wave</name>
        
        
      </author>

      

      
        <category term="aws" />
      

      
        <summary type="html">EC2 ê¸°ë°˜ì˜ ECSë¥¼ ë‹¤ë£¨ê¸° ìœ„í•œ ì‚¬ì†Œí•œ ì§€ì‹ë“¤ í†±ì•„ë³´ê¸°!</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">Terraform Tips 4 - Move (Refactoring)</title>
      <link href="https://heuristicwave.github.io/TerraformTips4" rel="alternate" type="text/html" title="Terraform Tips 4 - Move (Refactoring)" />
      <published>2022-06-07T00:00:00+00:00</published>
      <updated>2022-06-07T00:00:00+00:00</updated>
      <id>https://heuristicwave.github.io/TerraformTips4</id>
      <content type="html" xml:base="https://heuristicwave.github.io/TerraformTips4">&lt;p&gt;Terraform ë” ìµìˆ™í•˜ê²Œ 4 - Move (Refactoring)&lt;/p&gt;

&lt;h2 id=&quot;intro&quot;&gt;Intro&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://heuristicwave.github.io/TerraformTips3&quot;&gt;ì§€ë‚œ 3í¸&lt;/a&gt;ì—ì„œëŠ” &lt;em&gt;ì½”ë“œì˜ ë³€ê²½ ì—†ì´&lt;/em&gt; í˜•ìƒì„ ìœ ì§€í•˜ëŠ” ê¸°ë²• ì¤‘ í•˜ë‚˜ì¸ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Refresh&lt;/code&gt;ì™€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Replace&lt;/code&gt;ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.
4í¸ì—ì„œëŠ” &lt;em&gt;ì½”ë“œë¥¼ ë³€ê²½(Refactoring)&lt;/em&gt; í•  ë•Œ í˜•ìƒì„ ìœ ì§€í•˜ëŠ” ë°©ë²•ì¸ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Move&lt;/code&gt;ì™€ ê´€ë ¨ëœ ê¸°ëŠ¥ë“¤ì„ ì†Œê°œí•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;-moving-resources&quot;&gt;ğŸ¤¹ Moving Resources&lt;/h2&gt;

&lt;p&gt;Terraformìœ¼ë¡œ ì •ì˜í•œ ì¸í”„ë¼ëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform.tfstate&lt;/code&gt;ì— ê¸°ë¡ë˜ë©°, real-worldì˜ ê°ì²´ëŠ” íŠ¹ì • &lt;a href=&quot;https://www.terraform.io/cli/state/resource-addressing&quot;&gt;ë¦¬ì†ŒìŠ¤ ì£¼ì†Œ&lt;/a&gt;ì™€ ì—°ê²°ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
ê·¸ë˜ì„œ ì •ì˜í•œ ì¸í”„ë¼ ì½”ë“œë¥¼ ë³€ê²½ í›„, ì ìš©í•˜ë©´ real-worldì˜ ê°ì²´ì™€ ìƒíƒœê°€ ë³€ê²½ë©ë‹ˆë‹¤.
ì½”ë“œë¡œ ì •ì˜ëœ ì‹¤ì œ ì¸í”„ë¼ë¥¼ ìš´ì˜í•˜ê³  ìˆë‹¤ë©´, ì½”ë“œ ë¦¬íŒ©í† ë§ ì‹œ ë°œìƒí•˜ëŠ” ë¦¬ì†ŒìŠ¤ ë³€ê²½ ì§€ì ì„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;State&lt;/code&gt; ëª…ë ¹ì–´ë¥¼ í™œìš©í•´ í•´ì†Œí•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Commands&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;state mv&lt;/code&gt; : real-world ê°ì²´ì™€ ì—°ê²°ëœ ë¦¬ì†ŒìŠ¤ ì£¼ì†Œë¥¼ ë³€ê²½&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;state rm&lt;/code&gt; : real-world ê°ì²´ë¥¼ íŒŒê´´í•˜ì§€ ì•Šê³  ì½”ë“œë¡œ ì •ì˜í•œ ë¦¬ì†ŒìŠ¤ ê´€ë¦¬ ëŒ€ìƒ ì œê±°&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;state replace-provider&lt;/code&gt; : ì¬ìƒì„± ì—†ì´, ìƒˆë¡œìš´ providerì— ê¸°ì¡´ ë¦¬ì†ŒìŠ¤ ì „&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;-state-mv&quot;&gt;ğŸ›  state mv&lt;/h3&gt;

&lt;p&gt;ìœ„ 3ê°€ì§€ ëª…ë ¹ì–´ ì¤‘ì—ì„œë„ ê°€ì¥ í™œìš©ë„ê°€ ë†’ì€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;state mv&lt;/code&gt; ëª…ë ¹ì–´ì˜ ì˜ˆì‹œë“¤ì„ í™•ì¸í•´ ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.terraform.io/cli/commands/state/mv#example-rename-a-resource&quot;&gt;ë¦¬ì†ŒìŠ¤ ì´ë¦„ ì¬ì •ì˜&lt;/a&gt; : 
ë¦¬íŒ©í† ë§ ê³¼ì •ì—ì„œ ì •ì˜ëœ ë¦¬ì†ŒìŠ¤ ëª…ì„ ë³€ê²½í•˜ëŠ” ê²½ìš° &lt;br /&gt; 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform state mv {ResourceType}.{ExistingName} {ResourceType}.{ChangedName}&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.terraform.io/cli/commands/state/mv#example-move-a-resource-into-a-module&quot;&gt;ë¦¬ì†ŒìŠ¤ë¥¼ ëª¨ë“ˆë¡œ ì´ë™&lt;/a&gt; : 
ë£¨íŠ¸ì— ìœ„ì¹˜í•œ ë¦¬ì†ŒìŠ¤ë¥¼ child ëª¨ë“ˆì— í¬í•¨ì‹œì¼œ ë¦¬íŒ©í† ë§ í•˜ëŠ” ê²½ìš° &lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform state mv {Type}.{Name} module.{ModuleName}.{Type}.{Name}&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.terraform.io/cli/commands/state/mv#example-move-a-module-into-a-module&quot;&gt;ëª¨ë“ˆì„ ë‹¤ë¥¸ ëª¨ë“ˆë¡œ ì´ë™&lt;/a&gt; &lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform state mv module.{ModuleName} module.{ParentModuleName}.module.{ModuleName}&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.terraform.io/cli/commands/state/mv#example-move-a-particular-instance-of-a-resource-using-count&quot;&gt;meta-argument &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;for_each&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;count&lt;/code&gt;ë¡œ ì •ì˜ëœ íŠ¹ì • ë¦¬ì†ŒìŠ¤ êµì²´&lt;/a&gt; &lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform state mv {ResourceType}.{Before}[0] {ResourceType}.{After}[0]&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ï¸-moved-statements&quot;&gt;ğŸƒï¸ Moved statements&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://heuristicwave.github.io/TerraformTips3&quot;&gt;ì§€ë‚œ 3í¸&lt;/a&gt;ì—ì„œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;refresh&lt;/code&gt;ì™€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;taint&lt;/code&gt;ê°€ ê°€ì§„ í•œê³„ì ìœ¼ë¡œ ì¸í•˜ì—¬
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--refresh-only&lt;/code&gt;ì™€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;replace&lt;/code&gt;ê°€ ë‚˜ì™”ë“¯ì´, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;state mv&lt;/code&gt;ë„ í•œê³„ì ì´ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform taint&lt;/code&gt; command informs Terraform that a particular object has become degraded or damaged. &lt;br /&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;problems-with-terraform-state-mv&quot;&gt;&lt;a href=&quot;https://youtu.be/bDgoGBusX0k?t=178&quot;&gt;Problems with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform state mv&lt;/code&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;ìœ„ ë§í¬ë¡œ ì²¨ë¶€í•œ Terraform 1.1 ë²„ì „ì´ ì¶œì‹œí•˜ë©´ì„œ ë°œí‘œí•œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Move&lt;/code&gt; ê¸°ëŠ¥ì— ëŒ€í•œ ë°œí‘œ ìë£Œë¥¼ ë³´ë©´ ì•„ë˜ 3ê°€ì§€ ì´ìœ ë¡œ í•œê³„ì ì„ ë‹¤ë£¹ë‹ˆë‹¤.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Risky and error prone&lt;/li&gt;
  &lt;li&gt;Terraform Cloud users couldnâ€™t refactor within core workflows&lt;/li&gt;
  &lt;li&gt;Module authors couldnâ€™t coordinate changes themselves&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;3ê°€ì§€ì˜ í•œê³„ì ì´ ì–¸ê¸‰ë˜ì—ˆì§€ë§Œ, ê²°êµ­ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;refresh&lt;/code&gt; ë•Œì™€ ë§ˆì°¬ê°€ì§€ë¡œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;plan&lt;/code&gt;ì„ í†µí•œ ì˜ˆì¸¡ ê³¼ì •ì´ ì—†ëŠ” ë™ì¼í•œ ì´ìœ ë¡œ ìœ„ì™€ ê°™ì€ ë¬¸ì œê°€ ë°œìƒí•œë‹¤ëŠ” ì‚¬ì‹¤ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;refactoring&quot;&gt;&lt;a href=&quot;https://www.terraform.io/language/modules/develop/refactoring&quot;&gt;Refactoring&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;ì•ì„œ ì–¸ê¸‰í•œ í•œê³„ì ë“¤ì€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;plan&lt;/code&gt; ê¸°ëŠ¥ì´ ì—†ëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mv&lt;/code&gt; ëª…ë ¹ì–´ ëŒ€ì‹  ê¸°ì¡´ì˜ í…Œë¼í¼ ë¬¸ë²•ì— &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;moved&lt;/code&gt; blockì´ ì¶”ê°€ë˜ë©° í•´ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.
ì•„ë˜ ì˜ˆì‹œëŠ” &lt;a href=&quot;https://www.terraform.io/language/modules/develop/refactoring#moved-block-syntax&quot;&gt;ê³µì‹ ë¬¸ì„œ&lt;/a&gt;ì— ê¸°ì¬ëœ ì˜ˆì œì…ë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-terraform highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;locals&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;instances&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;tomap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;big&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;instance_type&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;m3.large&quot;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;small&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;instance_type&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;t2.medium&quot;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;resource&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;aws_instance&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;a&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;for_each&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;local&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;instances&lt;/span&gt;

  &lt;span class=&quot;nx&quot;&gt;instance_type&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;instance_type&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# (other resource-type-specific configuration)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;moved&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;aws_instance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;to&lt;/span&gt;   &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;aws_instance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;small&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;moved&lt;/code&gt; blockì— ë³€ê²½ ì „í›„ ìƒíƒœë¥¼ ì„ ì–¸í•˜ì—¬, ê¸°ì¡´ ìƒíƒœë¥¼ ë°”ê¾¸ëŠ” ëª…ë ¹ì¡°ì°¨ë„ ì½”ë“œë¡œ ì„ ì–¸í•˜ì—¬ ìƒíƒœë¥¼ ë°”ê¾¸ëŠ” í–‰ìœ„ë¥¼ ì½”ë“œí™”í–ˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;ï¸-ê³ ë ¤ì‚¬í•­&quot;&gt;â‰ï¸ ê³ ë ¤ì‚¬í•­&lt;/h3&gt;

&lt;p&gt;í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œ ìš´ì˜ì„ í•˜ë‹¤ ë³´ë©´ ìµœì í™” ê³¼ì • ì¤‘ ë¦¬ì†ŒìŠ¤ ìŠ¤í™(ì¸ìŠ¤í„´ìŠ¤ ì¢…ë¥˜, íƒ€ì…)ì´ ìì£¼ ë³€ê²½ë©ë‹ˆë‹¤.
ê·¸ëŸ¼ ì•„ë˜ì™€ ê°™ì€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;moved&lt;/code&gt; ë¸”ë¡ì´ ì²´ì¸ê³¼ ê°™ì´ ê¸¸ì–´ì§€ê²Œ ë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-terraform highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# Block 1&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;moved&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;aws_instance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;to&lt;/span&gt;   &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;aws_instance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Block 2&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;moved&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;aws_instance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;to&lt;/span&gt;   &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;aws_instance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;c&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ì´ëŠ” ì˜¤íˆë ¤ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” í˜¹ì€ &lt;em&gt;ì¤‘ë³µëœ ì½”ë“œë¥¼ ì§€ìš°ê³  ë¡œì§ì„ ì´í•´í•˜ê¸° ì‰½ê²Œ ë””ìì¸&lt;/em&gt;í•´ì•¼ í•˜ëŠ” &lt;strong&gt;ë¦¬íŒ©í† ë§ê³¼ëŠ” ë©€ì–´ì§€ê²Œ&lt;/strong&gt; ë©ë‹ˆë‹¤.
ê·¸ëŸ¬ë¯€ë¡œ AWS ë¦¬ì†ŒìŠ¤ì˜ ê²½ìš° &lt;strong&gt;ë‹¨ìˆœ ìŠ¤í™ ë³€ê²½&lt;/strong&gt;ê³¼ ê°™ì€ ì‘ì—…ì€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Launch templates&lt;/code&gt;ì„ ì‚¬ìš©í•˜ëŠ” ê²Œ ì¢‹ìŠµë‹ˆë‹¤.
ì´ì²˜ëŸ¼ AWS ì„œë¹„ìŠ¤ ë‚´ì—ì„œ &lt;strong&gt;í˜•ìƒ ê´€ë¦¬&lt;/strong&gt; ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ í™œìš©í•´, moved ë¸”ë¡ì„ ìƒì„±í•˜ëŠ” ì‘ì—…ì„ ìµœì†Œí™”í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;outro&quot;&gt;Outro&lt;/h2&gt;

&lt;p&gt;ì§€ê¸ˆê¹Œì§€ ë¦¬íŒ©í† ë§ ì‘ì—…ì„ ìœ„í•´ í•„ìˆ˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;state mv&lt;/code&gt;ì™€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;moved&lt;/code&gt; syntax ì‚¬ìš©ë²•ì„ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Move&lt;/code&gt;ì˜ íƒ„ìƒ ê³¼ì •ì—ì„œ ì„ ì–¸í˜• ë„êµ¬ì¸ í…Œë¼í¼ì˜ ëª©ì ì— ë§ê²Œ ì§„í™”í•´ë‚˜ê°€ëŠ” ëª¨ìŠµê³¼ ì´ˆê¸° ì„¤ê³„ì˜ ì¤‘ìš”ì„±ì„ ê³ ë¯¼í•´ ë³¼ ìˆ˜ ìˆì—ˆë˜ ì¢‹ì€ ê¸°íšŒì˜€ìŠµë‹ˆë‹¤.
ì—¬ë‹´ìœ¼ë¡œ ì €ëŠ” í…Œë¼í¼ ë²„ì „ì´ 0.12ì¼ ë•Œ ë‹¤ë£¨ê¸° ì‹œì‘í–ˆëŠ”ë°, 2ë…„ ë§Œì— ë²„ì „ 1.2.2ì— ì´ë¥´ë©° ì •ì°©í•´ë‚˜ê°€ëŠ” ê³¼ì •ì„ ë³´ë‹ˆ
ì‚¬ìš©ìë„ IaC ë„êµ¬ì˜ ì² í•™ì„ ì´í•´í•˜ë©° í•¨ê»˜ ì„±ì¥í•˜ëŠ” ê¸°ë¶„ì— ê°ê²©ìŠ¤ëŸ½ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì§€ê¸ˆê¹Œì§€ í…Œë¼í¼ ë” ìµìˆ™í•˜ê²Œ Move(Refactoring) í¸ì„ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ì˜ëª»ëœ ë‚´ìš©ì€ ì§€ì í•´ ì£¼ì„¸ìš”! ğŸ˜ƒ&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;span class=&quot;table-of-contents-list&quot;&gt;Terraform Tips&lt;/span&gt;&lt;/p&gt;
&lt;ul class=&quot;table-of-contents-list&quot;&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips1&quot;&gt;Module &amp;amp; Output&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips2&quot;&gt;Data &amp;amp; Index&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips3&quot;&gt;Refresh &amp;amp; Replace&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips4&quot;&gt;Move (Refactoring)&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips5&quot;&gt;Import&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;</content>

      
      
      
      
      

      <author>
          <name>Heuristic Wave</name>
        
        
      </author>

      

      
        <category term="devops" />
      
        <category term="terraform" />
      

      
        <summary type="html">Terraform ë” ìµìˆ™í•˜ê²Œ 4 - Move (Refactoring)</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">Terraform Tips 3 - Refresh &amp;amp; Replace</title>
      <link href="https://heuristicwave.github.io/TerraformTips3" rel="alternate" type="text/html" title="Terraform Tips 3 - Refresh &amp; Replace" />
      <published>2022-05-28T00:00:00+00:00</published>
      <updated>2022-05-28T00:00:00+00:00</updated>
      <id>https://heuristicwave.github.io/TerraformTips3</id>
      <content type="html" xml:base="https://heuristicwave.github.io/TerraformTips3">&lt;p&gt;Terraform ë” ìµìˆ™í•˜ê²Œ 3 - Refresh &amp;amp; Replace&lt;/p&gt;

&lt;h2 id=&quot;intro&quot;&gt;Intro&lt;/h2&gt;

&lt;p&gt;IaC(Infrastructure as Code)ë¥¼ ìš´ìš©í•˜ë©° ì¤‘ìš”í•˜ê²Œ ìƒê°í•˜ëŠ” í¬ì¸íŠ¸ ì¤‘ í•˜ë‚˜ëŠ”, &lt;strong&gt;ì½”ë“œë¡œ ì •ì˜í•œ í˜•ìƒ&lt;/strong&gt;ê³¼ &lt;strong&gt;ì‹¤ì œ ì¸í”„ë¼ì˜ í˜•ìƒ&lt;/strong&gt;ì„ ë™ì¼í•˜ê²Œ ìœ ì§€í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.
Terraformì—ì„œëŠ” &lt;strong&gt;Configuration Drift&lt;/strong&gt;(ì •ì˜í•œ í˜•ìƒê³¼ ë‹¬ë¼ì§€ëŠ” ê²½ìš°)ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ë‹¤ì–‘í•œ ëª…ë ¹ì–´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” í˜•ìƒì„ ìœ ì§€í•˜ëŠ” ë‹¤ì–‘í•œ ê¸°ë²• ì¤‘ í•˜ë‚˜ì¸ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Refresh&lt;/code&gt;ì™€ ë¹„ìŠ·í•˜ë©´ì„œë„ í—·ê°ˆë¦¬ëŠ” ê°œë…ì¸ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Replace&lt;/code&gt;ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ï¸-refresh&quot;&gt;â™»ï¸ Refresh&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;refresh&lt;/code&gt; ëª…ë ¹ì–´ëŠ” Configuration Driftê°€ ë°œìƒí–ˆì„ ë•Œ, í˜„ì¬ ìƒíƒœë¥¼ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform.tfstate&lt;/code&gt;ì— ë°˜ì˜í•´ í˜„ì¬ ì¸í”„ë¼ì˜ ìƒíƒœë¡œ ìµœì‹ í™”ì‹œí‚¤ëŠ” ëª…ë ¹ì–´ì…ë‹ˆë‹¤.
ë¬¸ì„œì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ê¸°ì¬ë˜ì–´ ìˆì§€ë§Œ, ì²˜ìŒ ì ‘í•œë‹¤ë©´ ë¬´ì—‡ì„ ë§í•˜ëŠ”ì§€ ì‰½ê²Œ ì™€ë‹¿ì§€ ì•ŠìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform refresh&lt;/code&gt; command reads the current settings from all managed remote objects and updates the Terraform state to match. &lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform refresh&lt;/code&gt; ëª…ë ¹ì–´ëŠ” ì›ê²© ê°ì²´ì˜ í˜„ì¬ ìƒíƒœë¥¼ ì½ì–´ Terraform stateì™€ ì¼ì¹˜ì‹œí‚µë‹ˆë‹¤.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Refresh ëª…ë ¹ì–´ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ìƒí™©ì—ì„œ ì‚¬ìš©í•©ë‹ˆë‹¤. í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œ í´ëŸ¬ìŠ¤í„°ë¥¼ ìš´ìš©í•˜ë©´ ì¸ìŠ¤í„´ìŠ¤ì˜ Scaleì´ ë³€í™”í•¨ì— ë”°ë¼ ì¸ìŠ¤í„´ìŠ¤ ID ê°’ë„ ë³€í•©ë‹ˆë‹¤.
ì´ ê²½ìš° ì½”ë“œë¡œ ì •ì˜í•œ ìƒíƒœëŠ” í”„ë¡œë¹„ì €ë‹ ë‹¹ì‹œ ì‹œì ì„ ê¸°ì–µí•˜ì§€ë§Œ, ì‹¤ì œ ì¸í”„ë¼ì˜ í˜„ìƒì€ ìµœì‹  ì¸ìŠ¤í„´ìŠ¤ì˜ ìƒíƒœë¥¼ ê°€ì§€ê³  ìˆìœ¼ë¯€ë¡œ Driftê°€ ë°œìƒí•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/terraform/state.png&quot; alt=&quot;state&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ìœ„ ìƒí™©ì—ì„œ Refresh ëª…ë ¹ì–´ë¡œ &lt;em&gt;ì½”ë“œì˜ ìƒíƒœì™€ ì¸í”„ë¼ì˜ í˜„ì¬ ìƒíƒœë¥¼ ì¼ì¹˜&lt;/em&gt;ì‹œí‚¬ ìˆ˜ ìˆì§€ë§Œ, í•´ë‹¹ ëª…ë ¹ì–´ëŠ” &lt;strong&gt;deprecate&lt;/strong&gt; ë˜ì—ˆìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´ ê´€ë¦¬ìê°€ ë¬´ì—‡ì´ ë³€ê²½ë˜ëŠ”ì§€ ì•Œì§€ ëª»í•˜ê³  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tfstate&lt;/code&gt;ê°€ ìµœì‹ í™”ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
ê·¸ë˜ì„œ í…Œë¼í¼ v0.15.4.ì—ì„œë¶€í„°ëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;plan&lt;/code&gt;ê³¼ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;apply&lt;/code&gt;ì— &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-refresh-only&lt;/code&gt; ì˜µì…˜ì„ ì œê³µí•˜ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;refresh-only&quot;&gt;â€“refresh-only&lt;/h3&gt;

&lt;p&gt;ì™¼ìª½ì€ í”„ë¡œë¹„ì €ë‹ ë‹¹ì‹œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*.tfstate&lt;/code&gt;ì…ë‹ˆë‹¤. ì˜¤ë¥¸ìª½ì€ í•´ë‹¹ í™˜ê²½ì„ ì½˜ì†”ì—ì„œ health checkë¥¼ í•˜ëŠ” ê°„ê²©ì„ 120ì´ˆë¡œ ë³€ê²½í•œ í™”ë©´ì…ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/terraform/refresh.png&quot; alt=&quot;refresh&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ì˜ë„ì ìœ¼ë¡œ Drfit ìƒí™©ì„ ë§Œë“¤ì—ˆê¸° ë•Œë¬¸ì— &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform plan --refresh-only&lt;/code&gt; ëª…ë ¹ì–´ë¡œ ì ê²€í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì–´ë–¤ ë¦¬ì†ŒìŠ¤ ê°ì²´ê°€ ë³€ê²½ë  ê²ƒì¸ì§€ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/terraform/refresh-only.png&quot; alt=&quot;refresh-only&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ìœ„ ì‚¬ì§„ì—ì„œëŠ” elbì˜ AutoScalingGroup ë‚´ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ë°”ë€Œì–´ ìµœì‹ í™”ë¨ê³¼, ì œê°€ ì˜ë„ì ìœ¼ë¡œ ì½˜ì†”ì—ì„œ ë³€ê²½í•œ health_check ê°’ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì´ì²˜ëŸ¼ í•­ìƒ IaCì˜ í˜•ìƒì„ ë³€ê²½í•˜ê¸° ì „, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;plan&lt;/code&gt;ì„ í†µí•œ ì‚¬ì „ ê²€í†  ê¸°ëŠ¥ì„ ì œê³µí•˜ê¸° ìœ„í•´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--refresh-only&lt;/code&gt; ì˜µì…˜ì´ ì œê³µë˜ì—ˆìŠµë‹ˆë‹¤.
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;plan&lt;/code&gt;ìœ¼ë¡œ ë¬¸ì œì—†ìŒì„ í™•ì¸í–ˆë‹¤ë©´, ì´ì–´ì„œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform apply --refresh-only&lt;/code&gt; ëª…ë ¹ì–´ë¡œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*.tfstate&lt;/code&gt;ë¥¼ ìµœì‹ í™” ì‹œí‚µë‹ˆë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;ï¸-ì£¼ì˜&quot;&gt;âš ï¸ ì£¼ì˜&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*.tfstate&lt;/code&gt;ëŠ” Refreshë¡œ ìµœì‹ í™”ë˜ì—ˆì§€ë§Œ, ì—¬ì „íˆ ì½”ë“œë¡œ ì •ì˜í•œ interval ê°’ì€ 180ì…ë‹ˆë‹¤.
ê·¸ëŸ¬ë¯€ë¡œ ì½”ë“œë¡œ ì •ì˜ëœ ë¶€ë¶„ì„ ë³€ê²½í•˜ì§€ ì•Šì€ ìƒí™©ì—ì„œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform apply&lt;/code&gt; ëª…ë ì–´ë¥¼ ì¹˜ë©´, í˜„ì¬ 120ì˜ interval ê°’ì´ 180ìœ¼ë¡œ ì›ë³µ ë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ï¸-taint&quot;&gt;â˜ ï¸ Taint&lt;/h2&gt;

&lt;p&gt;Replaceë¥¼ ì„¤ëª…í•˜ê¸° ì•ì„œ, ê¸°ì¡´ í…Œë¼í¼ì—ëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;taint&lt;/code&gt;ë¼ëŠ” ëª…ë ¹ì–´ê°€ ìˆìŠµë‹ˆë‹¤. ë¬¸ì„œì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ê¸°ì¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform taint&lt;/code&gt; command informs Terraform that a particular object has become degraded or damaged. &lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform taint&lt;/code&gt; ëª…ë ¹ì–´ëŠ” íŠ¹ì • ê°ì²´ê°€ ì €í•˜ë˜ê±°ë‚˜ ì†ìƒë˜ì—ˆìŒì„ Terraformì— ì•Œë¦½ë‹ˆë‹¤.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Taint ëª…ë ¹ì–´ëŠ” &lt;strong&gt;ì¸í”„ë¼ë¥¼ ì •ì˜í•œ ì½”ë“œëŠ” ê·¸ëŒ€ë¡œ&lt;/strong&gt;ì¸ ìƒíƒœì—ì„œ &lt;strong&gt;ë¦¬ì†ŒìŠ¤ë§Œ êµì²´&lt;/strong&gt;í•  ê²½ìš°ì— ì‚¬ìš©í•©ë‹ˆë‹¤.
ì €ì˜ ê²½ìš° ìŠ¤íŒŒì´í¬ì„± íŠ¸ë˜í”½ì„ ê°‘ìê¸° ë°›ì•„ ë¡œë“œë°¸ëŸ°ì„œì˜ ì„±ëŠ¥ì´ ì €í•˜ë˜ì—ˆì„ ë•Œ, ELBë¥¼ êµì²´í•œ ê²½í—˜ì´ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì´ëŸ° ìƒí™©ì—ì„œ ì„±ëŠ¥ì´ ì €í•˜ëœ í˜¹ì€ &lt;strong&gt;êµì²´ê°€ í•„ìš”í•œ ë¦¬ì†ŒìŠ¤&lt;/strong&gt; ê°ì²´ë§Œì„ on/off ë°©ì‹ìœ¼ë¡œ &lt;strong&gt;ì£¼ì„ ì²˜ë¦¬ ë° í•´ì œ&lt;/strong&gt;í•˜ë©° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;apply&lt;/code&gt; ëª…ë ¹ì–´ë¡œ êµì²´í•  ìˆ˜ ìˆì§€ë§Œ,
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;taint(êµì²´ ë¦¬ì†ŒìŠ¤ë¥¼ ë§ˆí‚¹)&lt;/code&gt; ëª…ë ¹ì–´ë¡œ êµì²´í•˜ê³  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;untaint(êµì²´ ë¦¬ì†ŒìŠ¤ ë§ˆí‚¹ í•´ì œ)&lt;/code&gt; ëª…ë ¹ì–´ë¡œ êµì²´í•  í•„ìš”ê°€ ì—†ë‹¤ê³  ëª…ë ¹í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ê·¸ëŸ¬ë‚˜ ìœ„ì™€ ê°™ì€ ì›Œí¬í”Œë¡œìš°ëŠ” í…Œë¼í¼ v0.15.2.ì—ì„œ deprecate ë˜ì—ˆê³ , &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-replace&lt;/code&gt; ì˜µì…˜ì„ ì œê³µí•˜ë©° ë” ì§ê´€ì ì¸ ì‚¬ìš©ì ê²½í—˜ì„ ì œê³µí•˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;--replace&quot;&gt;ğŸŒ— -replace&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-replace&lt;/code&gt; ì˜µì…˜ì€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;taint&lt;/code&gt; ëª…ë ¹ì–´ì™€ ë™ì¼í•˜ê²Œ ì‘ìš©í•˜ë©°, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;untaint&lt;/code&gt; ëª…ë ¹ì–´ë¥¼ ì¹  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.
ì½”ë“œëŠ” ê·¸ëŒ€ë¡œì§€ë§Œ ë¦¬ì†ŒìŠ¤ ê°ì²´ê°€ ë³€ê²½ë˜ëŠ” Replace ëª…ë ¹ì–´ ì‚¬ìš©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;terraform apply &lt;span class=&quot;nt&quot;&gt;-replace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;aws_instance.example[0]&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;êµì²´í•  ë¦¬ì†ŒìŠ¤ ì¸ìê°’ë¥¼ ì°¾ê¸° ìœ„í•´, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terraform state list&lt;/code&gt; ëª…ë ¹ì–´ë¡œ targetì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/terraform/replace.png&quot; alt=&quot;replace&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ğŸ’¡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-replace&lt;/code&gt; ì˜µì…˜ ì—­ì‹œ, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--refresh-only&lt;/code&gt; ì˜µì…˜ê³¼ ë™ì¼í•˜ê²Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;plan&lt;/code&gt; ëª…ë ¹ì–´ì™€ í•¨ê»˜ ì ìš©í•˜ì—¬ ë³€ê²½ ì§€ì ì„ ë¯¸ë¦¬ íŒŒì•…í•˜ê³ 
ë³€ê²½ë˜ëŠ” ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ê²€í† ë¥¼ í•˜ëŠ” ìŠµê´€ì„ ë“¤ì…ì‹œë‹¤!&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;outro&quot;&gt;Outro&lt;/h2&gt;

&lt;p&gt;Refreshì™€ Replace ë¹„ìŠ·í•˜ë©´ì„œë„ ì „í˜€ ë‹¤ë¥¸ ë‘ ëª…ë ¹ì–´ì˜ ë³€ì²œì‚¬ë¥¼ í™•ì¸í•˜ë©° ì¸í”„ë¼ì˜ ë™ì¼í•œ í˜•ìƒì„ ìœ ì§€í•˜ê¸° ìœ„í•œ ë°©ë²•ì„ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.
ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œ ì–¸ê¸‰í•œ ë°©ë²• ì™¸ì—ë„ í˜•ìƒì„ ì¼ì¹˜ì‹œí‚¤ëŠ” ë°©ë²•ë“¤ì´ ì¡´ì¬í•˜ì§€ë§Œ, ìœ„ 2ê°€ì§€ ëª…ë ¹ì–´ë§Œ ì œëŒ€ë¡œ í™œìš©í•˜ë©´ ëŒ€ë¶€ë¶„ì˜ ì¸í”„ë¼ì˜ í˜•ìƒì´ ë‹¬ë¼ì§€ëŠ” ì‚¬íƒœë¥¼ ì˜ˆë°©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
IaCì—ì„œëŠ” í•­ìƒ í˜•ìƒì„ ë³€ê²½í•˜ê¸° ì „, ë³€ê²½ë˜ëŠ” ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ê²€í† ë¥¼ í•˜ëŠ” ìŠµê´€ì´ ë§¤ìš° ì¤‘ìš”í•˜ë‹¤ëŠ” ê²ƒì„ ê°•ì¡°í•˜ë©° ì´ë²ˆ 3í¸ì„ ë§ˆì¹©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì§€ê¸ˆê¹Œì§€ í…Œë¼í¼ ë” ìµìˆ™í•˜ê²Œ Refresh &amp;amp; Replace í¸ì„ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ì˜ëª»ëœ ë‚´ìš©ì€ ì§€ì í•´ ì£¼ì„¸ìš”! ğŸ˜ƒ&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;span class=&quot;table-of-contents-list&quot;&gt;Terraform Tips&lt;/span&gt;&lt;/p&gt;
&lt;ul class=&quot;table-of-contents-list&quot;&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips1&quot;&gt;Module &amp;amp; Output&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips2&quot;&gt;Data &amp;amp; Index&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips3&quot;&gt;Refresh &amp;amp; Replace&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips4&quot;&gt;Move (Refactoring)&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips5&quot;&gt;Import&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;</content>

      
      
      
      
      

      <author>
          <name>Heuristic Wave</name>
        
        
      </author>

      

      
        <category term="devops" />
      
        <category term="terraform" />
      

      
        <summary type="html">Terraform ë” ìµìˆ™í•˜ê²Œ 3 - Refresh &amp;amp; Replace</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">ê¸€ë˜ 7ê¸° ë‹¤ì§ê¸€</title>
      <link href="https://heuristicwave.github.io/geultto" rel="alternate" type="text/html" title="ê¸€ë˜ 7ê¸° ë‹¤ì§ê¸€" />
      <published>2022-05-05T00:00:00+00:00</published>
      <updated>2022-05-05T00:00:00+00:00</updated>
      <id>https://heuristicwave.github.io/geultto</id>
      <content type="html" xml:base="https://heuristicwave.github.io/geultto">&lt;p&gt;ê¸€ë˜ 7ê¸° ë‹¤ì§ê¸€ ì…ë‹ˆë‹¤.&lt;/p&gt;

&lt;h2 id=&quot;ê¸€ë˜ë¥¼-ì‹œì‘í•˜ë©°-&quot;&gt;ê¸€ë˜ë¥¼ ì‹œì‘í•˜ë©°â€¦ ğŸƒğŸ»&lt;/h2&gt;

&lt;p&gt;ì €ëŠ” ìµœê·¼ &lt;strong&gt;â€˜ê¸€ ì“°ëŠ” ê°œë°œì ëª¨ì„, ê¸€ë˜â€™&lt;/strong&gt; 7ê¸°ë¡œ í™œë™í•  ìˆ˜ ìˆëŠ” ê¸°íšŒë¥¼ ì–»ì—ˆìŠµë‹ˆë‹¤. &lt;br /&gt;
ê¸€ë˜ê°€ ì–´ë–¤ í™œë™ì¸ì§€ëŠ” &lt;a href=&quot;https://www.notion.so/zzsza/ac5b18a482fb4df497d4e8257ad4d516&quot;&gt;ê¸€ë˜ í˜ì´ì§€&lt;/a&gt;ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ê¸€ë˜ì˜ ì¡´ì¬ëŠ” 2ê¸° ë•Œë¶€í„° ì•Œê³  ìˆì—ˆì§€ë§Œ, ìŠ¤ìŠ¤ë¡œ í™œë™ì„ í•˜ê¸°ì—ëŠ” ì•„ì§ ë¶€ì¡±í•˜ë‹¤ ìƒê°ë˜ì–´
ì§€ë‚œ 1ë…„ê°„ í•œ ë‹¬ì— ê¸€ 1í¸ì”©ì„ ì‘ì„±í•˜ëŠ” ìŠµê´€ì„ ë§Œë“¤ê³  ë‚˜ì„œ 7ê¸°ì— ê°€ì…í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;í™œë™ì€ ì˜¬í•´ 5ì›”ë¶€í„° 10ì›”ê¹Œì§€ ì•½ 6ê°œì›”ê°„ í™œë™í•˜ê²Œ ë˜ëŠ”ë°ìš”, ì²« ë¯¸ì…˜ìœ¼ë¡œ ë‹¤ì§ê¸€ ì‘ì„±ì´ë¼ëŠ” ì£¼ì œë¥¼ ë°›ì•˜ìŠµë‹ˆë‹¤.
ê·¸ ë™ì•ˆ ì´ ê¸°ìˆ  ë¸”ë¡œê·¸ì— ê°œì¸ì ì¸ ì–˜ê¸°ëŠ” ë‹´ì§€ ì•Šì„ë¿ë”ëŸ¬,
í‰ìƒì‹œì—ë„ ì¼ê¸°ì™€ ê°™ì€ ìì‹ ì˜ ë§ˆìŒ(ë‹¤ì§ í¬í•¨)ì„ ì ì–´ ë³¸ ì ì´ ì—†ì–´ ê¸€ì„ ì¨ ë‚´ë ¤ê°€ê¸°ê°€ ë¶€ë„ëŸ½ë„¤ìš”.&lt;/p&gt;

&lt;h2 id=&quot;-ê³„íš&quot;&gt;ğŸ§© ê³„íš&lt;/h2&gt;

&lt;p&gt;ê³„íší•˜ê³  ìˆëŠ” ì½˜í…ì¸ ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;ê¸°ìˆ  ë„ì„œ ë¦¬ë·° &lt;br /&gt;
í˜„ì¬ ì œ ì±…ìƒ ìœ„ì—ëŠ” êµ¬ì…í•´ë‘ê³  ì½ì§€ ëª»í•œ ì±…ë“¤ì´ ê½¤ë‚˜ ìŒ“ì˜€ìŠµë‹ˆë‹¤.
â€˜ì»¨í…Œì´ë„ˆ ë³´ì•ˆâ€™, â€˜Go ì–¸ì–´ë¥¼ í™œìš©í•œ ë„¤íŠ¸ì›Œí¬ í”„ë¡œê·¸ë˜ë°â€™ ë“± ë°€ë¦° ê¸°ìˆ  ì„œì  ë¶€ì±„(?)ë¥¼ ì²­ì‚°í•˜ë„ë¡ ë…¸ë ¥í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;ê¸°ì¡´ ì‹œë¦¬ì¦ˆë¬¼ ë§ˆê° &lt;br /&gt;
ì‘ë…„ ì œ ë¸”ë¡œê·¸ì— â€˜í…Œë¼í¼ ë” ìµìˆ™í•˜ê²Œâ€™ ë¼ëŠ” ì‹œë¦¬ì¦ˆë¬¼ì„ ì—°ì¬í•˜ê¸°ë¡œ í•˜ê³  ê²Œìœ¼ë¥¸ íƒ“ 2í¸ ë°–ì— ì‘ì„±í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.
ë¨¸ë¦¿ì†ì—ë§Œ ë‚¨ì•„ìˆëŠ” í›„ì† ê¸€ ë“¤ì„ ì‘ì„±í•´ ì‹œë¦¬ì¦ˆë¬¼ ë‹¤ìš´ ê¸€ì„ ì‘ì„±í•´ ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. &lt;br /&gt;&lt;/p&gt;

    &lt;p&gt;&lt;em&gt;ì•„ì§ 2í¸ ë°–ì— ì—†ëŠ” ì‘ê³  ì´ˆë¼í•œ ë‚˜ì˜ ì‹œë¦¬ì¦ˆë¬¼&lt;/em&gt;
&lt;img src=&quot;../../assets/built/images/post/etc/series.png&quot; alt=&quot;posting_quality&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;ê´€ì‹¬ ê¸°ìˆ  ìŠ¤í„°ë”” &lt;br /&gt;
Kubernetes, Terraform, Istio, AWS ì„œë¹„ìŠ¤ë“¤ì— ëŒ€í•œ ê¸€ì„ ì‘ì„±í•˜ë©°, ì„±ì¥ì˜ ê¸°ë¡ë“¤ì„ ë‚¨ê¸°ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;ì£¼ì œë¥¼ ì¶”ì²œë°›ì•„ ì‘ì„± &lt;br /&gt;
ì €ëŠ” ì–´ë–»ê²Œ ë³´ë©´ ê¸€ì„ ì‘ì„±í•˜ëŠ” ê²ƒë³´ë‹¤, ì£¼ì œë¥¼ ì„ ì •í•˜ëŠ” ê²Œ ë”ìš± ì–´ë ¤ìš´ ê²ƒ ê°™ìŠµë‹ˆë‹¤.
ê¸€ë˜ë¥¼ í†µí•´ ë¹„ìŠ·í•œ ì§êµ°ì˜ ì—”ì§€ë‹ˆì–´ ë¶„ë“¤ì´ ê³ ë¯¼í•˜ëŠ” í˜¹ì€ ì•Œê³  ì‹¶ì€ ì£¼ì œë“¤ì´ ë¬´ì—‡ì¸ì§€ íŒŒì•…í•´ ê´€ë ¨ ê¸€ì„ ì‘ì„±í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;-ë‹¤ì§&quot;&gt;âœ‹ ë‹¤ì§&lt;/h2&gt;

&lt;h3 id=&quot;ìë°œì -ë²ˆì•„ì›ƒ-&quot;&gt;ìë°œì  ë²ˆì•„ì›ƒ ğŸ”¥&lt;/h3&gt;

&lt;p&gt;ê¸€ë˜ì—ëŠ” ì—¬ëŸ¬ ê¸°ìˆ˜ë¥¼ ê±¸ì³ ì§€ì†ì ìœ¼ë¡œ í™œë™í•˜ê³  ê³„ì‹  ë¶„ë“¤ì´ ê½¤ë‚˜ ë§ìŠµë‹ˆë‹¤.
ì €ë„ ì´ë²ˆ 7ê¸°ê°€ ëì´ ì•„ë‹ˆë¼ ì§€ì†ì ì¸ í™œë™ìœ¼ë¡œ ê¸€ë˜ë¥¼ ì´ì–´ê°€ê³  ì‹¶ìŠµë‹ˆë‹¤.
ê·¸ë ‡ì§€ë§Œ, 7ê¸° í™œë™ì´ ëë‚  ë¬´ë µ íšŒê³ ë¥¼ í•˜ëŠ” ì‹œì ì—ì„œ 7ê¸° í™œë™ ê°„ ìƒì‚°ëœ 12í¸ì˜ ê¸€ë¡œ ì¸í•˜ì—¬ í›„íšŒ ì—†ëŠ” í™œë™ì„ í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤.
ë‹¤ì‹œ ë°”ê¾¸ì–´ ë§í•˜ë©´, &lt;em&gt;â€œë„ˆë¬´ í˜ë“¤ì–´ì„œ 8ê¸°ëŠ” ì‰¬ì–´ì•¼ê² ë‹¤.â€&lt;/em&gt; ì‹¶ì„ ì •ë„ì˜ ê°ì •ì„ ëŠë¼ë„ë¡ ì—´ì‹¬íˆ í™œë™í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;ë¶€ë„ëŸ¬ì›€ì„-ëŠ¦ì¶”ëŠ”-ê¸€ì˜-ìœ íš¨ê¸°ê°„-&quot;&gt;ë¶€ë„ëŸ¬ì›€ì„ ëŠ¦ì¶”ëŠ” ê¸€ì˜ ìœ íš¨ê¸°ê°„ ğŸ™ˆ&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://heuristicwave.github.io/archive&quot;&gt;ì´ í˜ì´ì§€&lt;/a&gt;ë¥¼ ë³´ë©´ ì œê°€ í•œ í•´ ë™ì•ˆ, ì‘ì„±í•œ ê¸€ë“¤ì´ ë‚˜ì˜µë‹ˆë‹¤. &lt;br /&gt;
ë‹¹ì‹œì—ë„ í•œí¸ í•œí¸ ê³µë“¤ì—¬ ì‘ì„±í•˜ë©° &lt;em&gt;â€œì´ì •ë„ë©´ ê½¤ë‚˜ ê´œì°®ì€ ê¸€ ì•„ë‹ê¹Œ?â€&lt;/em&gt; ë¼ëŠ” ìƒê°ì„ ì¢…ì¢…í–ˆì—ˆëŠ”ë°,
ì‹œê°„ì´ ì§€ë‚œ ì‹œì ì— ë‹¤ì‹œ ì½ì–´ë³´ë©´ ë¶€ë„ëŸ½ë‹¤ëŠ” ìƒê°ì´ ë“¤ë•Œê°€ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì˜¨ë¼ì¸ ì–´ë””ì„ ê°€ ë³¸ ë‚´ìš©ì¸ë°, ì¢‹ì€ ê¸€ì„ ì‘ì„±í•œ ê²ƒìœ¼ë¡œ í‰ê°€ ë°›ëŠ” ì‘ê°€ë“¤ë„ ê³¼ê±° ìì‹ ì´ ì‘ì„±í•œ ê¸€ì„ ë³´ë©´ ë¶€ë„ëŸ½ë‹¤ê³  í•©ë‹ˆë‹¤.
ì´ëŸ° ê²ƒë“¤ì„ ë³´ë©´ ìì‹ ì˜ ê¸€ì„ ë¶€ë„ëŸ¬ì›Œ í•˜ëŠ”ê²Œ ë‹¹ì—°í•œ ê²ƒì¼ ìˆ˜ë„ ìˆëŠ”ë°, ë‹¤ìŒê³¼ ê°™ì€ ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/etc/graph.png&quot; alt=&quot;posting_quality&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ìœ„ ê·¸ë˜í”„ì—ì„œ ë³´ì´ë‹¤ì‹œí”¼, ê¸€ì˜ ì™„ì„±ë„ì™€ ë¶€ë„ëŸ¬ì›€ì˜ ë°œí˜„ ì‹œê¸°ëŠ” ì–‘ì˜ ìƒê´€ê´€ê³„ë¥¼ ê°–ê³  ìˆë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.
ì‘ë…„ì— ì œê°€ ì‘ì„±í•œ ê¸€ ë“¤ì˜ ê²½ìš°, ì•„ë¬´ë¦¬ ê¸¸ì–´ë„ ëŒ€ëµ í•œ ê³„ì ˆì •ë„ ì§€ë‚˜ë©´ ë¶€ë„ëŸ¬ì›€ì´ ìŠ¤ë©€ìŠ¤ë©€ ì˜¬ë¼ì˜¤ëŠ”ê²ƒ ê°™ë”êµ°ìš”.&lt;/p&gt;

&lt;p&gt;ê·¸ë˜ì„œ, ì´ë²ˆ í™œë™ ê¸°ê°„ ë™ì•ˆì—ëŠ” ê³¼ê±° ì œê°€ ì»ë˜ ê¸€ë³´ë‹¤ ë” ë¶€ë„ëŸ¬ì›€ì´ ì˜¤ëŠ” ì‹œê¸°ê°€ ëŠ¦ëŠ” ê¸€ì„ ì‘ì„±í•´ ë³´ë ¤í•©ë‹ˆë‹¤.
í™œë™ê¸°ê°„ì´ ì•½ 6ê°œì›” ì •ë„ë˜ë‹ˆ ì•„ë§ˆ 5ì›” ë§ì— ì“°ëŠ” ê¸€ì— ëŒ€í•œ ë¶€ë„ëŸ¬ì›€ì˜ ì •ë„ë¥¼ 7ê¸° í™œë™ì´ ëë‚  ë¬´ë µì¸ íšŒê³  ë•Œ ë‹¤ë¤„ë³´ë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;</content>

      
      
      
      
      

      <author>
          <name>Heuristic Wave</name>
        
        
      </author>

      

      
        <category term="extracurricular" />
      

      
        <summary type="html">ê¸€ë˜ 7ê¸° ë‹¤ì§ê¸€ ì…ë‹ˆë‹¤.</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">Export cloudwatch log data to Amazon S3 using lambda</title>
      <link href="https://heuristicwave.github.io/Export_data_to_S3_Lambda" rel="alternate" type="text/html" title="Export cloudwatch log data to Amazon S3 using lambda" />
      <published>2022-04-07T00:00:00+00:00</published>
      <updated>2022-04-07T00:00:00+00:00</updated>
      <id>https://heuristicwave.github.io/Export_data_to_S3_Lambda</id>
      <content type="html" xml:base="https://heuristicwave.github.io/Export_data_to_S3_Lambda">&lt;p&gt;ë³¸ ê¸€ì€ Cloudwatch Logs groupsì˜ ë°ì´í„°ë¥¼ Lambdaë¥¼ ì‚¬ìš©í•´ ì£¼ê¸°ì ìœ¼ë¡œ S3ë¡œ export í•˜ëŠ” ë°©ë²•ì„ ë‹¤ë£¹ë‹ˆë‹¤.&lt;/p&gt;

&lt;h1 id=&quot;intro&quot;&gt;Intro&lt;/h1&gt;

&lt;p&gt;ê¸€ì„ ì‹œì‘í•˜ê¸° ì•ì„œ, &lt;a href=&quot;https://noob2geek.in/2021/06/18/export-aws-cloudwatch-logs-to-s3-using-lambda-functions-in-node-js/&quot;&gt;Shraddha Paghdar - Export AWS CloudWatch logs to S3 using lambda functions in Node.js&lt;/a&gt;
ë¥¼ ì°¸ê³ í•˜ì—¬ í•´ë‹¹ ê¸€ì„ ì‘ì„±í–ˆìŒì„ ì•Œë¦½ë‹ˆë‹¤. ë³¸ê²©ì ìœ¼ë¡œ ë°©ë²•ì„ ì†Œê°œí•˜ê¸° ì•ì„œ, Cloudwatch Logs groupsì˜ ë°ì´í„°ë¥¼ Lambdaë¥¼ ì‚¬ìš©í•´ ì£¼ê¸°ì ìœ¼ë¡œ S3ë¡œ export í•˜ê¸° ìœ„í•œ í”Œë¡œìš°ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/background/exportLambda.png&quot; alt=&quot;imageBuilder&quot; /&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Amazon EventBridgeì— ì •ì˜í•œ Ruleì— ì˜í•´ Lambdaë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.&lt;/li&gt;
  &lt;li&gt;ì´í›„ ëŒë‹¤ê°€ ì§€ì •í•œ CloudWatchì˜ Logsì— ì ì¬ëœ ë°ì´í„°ë¥¼ ì°¾ìŠµë‹ˆë‹¤.&lt;/li&gt;
  &lt;li&gt;2ë²ˆì— ì—°ì†ë˜ì–´ ì´ê´€ë  ëŒ€ìƒì˜ ë¡œê·¸ë“¤ì´ S3ë¡œ ì´ê´€ë©ë‹ˆë‹¤.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;-workshop&quot;&gt;ğŸ“œ Workshop&lt;/h2&gt;

&lt;h3 id=&quot;1ï¸âƒ£-logë¥¼-ë‹´ì„-bucket-ë°-ì •ì±…-ìƒì„±í•˜ê¸°&quot;&gt;1ï¸âƒ£ Logë¥¼ ë‹´ì„ Bucket ë° ì •ì±… ìƒì„±í•˜ê¸°&lt;/h3&gt;

&lt;p&gt;Amazon S3 ì½˜ì†” í™”ë©´ì— ì ‘ì†í•´ Logë“¤ì´ ë‹´ê¸¸ Bucketì„ ìƒì„±í•˜ê³  ì´ì–´ì„œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Permissions&lt;/code&gt;ì—ì„œ S3 ë²„í‚·ì— ëŒ€í•œ ê¶Œí•œì„ ì„¤ì •í•©ë‹ˆë‹¤.
í•´ë‹¹ ë°©ë²•ì€ &lt;a href=&quot;https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/S3ExportTasksConsole.html&quot;&gt;ê³µì‹ ë¬¸ì„œ, 1ë‹¨ê³„ì™€ 3ë‹¨ê³„&lt;/a&gt;ì— ìì„¸íˆ ì„¤ëª…ë˜ì–´ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ğŸ’¡ ê³µì‹ ë¬¸ì„œ 3ë‹¨ê³„ì—ì„œ ê¸°ì¬ëœ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;random-string&lt;/code&gt;ì€ í•„ìš”ì— ì˜í•œ ê²½ìš° ì‚¬ìš©í•˜ì„¸ìš”. í•´ë‹¹ ê¸€ì—ì„œëŠ” í¸ì˜ìƒ ìƒëµí•˜ì˜€ìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;2ï¸âƒ£-lambda-ìƒì„±í•˜ê¸°&quot;&gt;2ï¸âƒ£ Lambda ìƒì„±í•˜ê¸°&lt;/h3&gt;

&lt;h4 id=&quot;step-1--lambdaê°€-ì‚¬ìš©í•˜ëŠ”-iam-role--policy-ìƒì„±&quot;&gt;Step 1 : Lambdaê°€ ì‚¬ìš©í•˜ëŠ” IAM Role &amp;amp; Policy ìƒì„±&lt;/h4&gt;

&lt;p&gt;Lambdaê°€ Logë¥¼ Export í•  ìˆ˜ ìˆë„ë¡ ë‹¤ìŒ ì •ì±…ì„ ìƒì„±í•©ë‹ˆë‹¤.
IAMì—ì„œ Create policyë¥¼ ì„ íƒí•˜ê³  ì•„ë˜ JSONì„ ë³µì‚¬í•˜ì—¬ ë¶™ì—¬ ë„£ê³ , &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cloudwatch_export_task&lt;/code&gt;ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì •ì±…ì„ ìƒì„±í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;Version&quot;&lt;/span&gt;: &lt;span class=&quot;s2&quot;&gt;&quot;2012-10-17&quot;&lt;/span&gt;,
    &lt;span class=&quot;s2&quot;&gt;&quot;Statement&quot;&lt;/span&gt;: &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;s2&quot;&gt;&quot;Effect&quot;&lt;/span&gt;: &lt;span class=&quot;s2&quot;&gt;&quot;Allow&quot;&lt;/span&gt;,
            &lt;span class=&quot;s2&quot;&gt;&quot;Action&quot;&lt;/span&gt;: &lt;span class=&quot;s2&quot;&gt;&quot;logs:CreateExportTask&quot;&lt;/span&gt;,
            &lt;span class=&quot;s2&quot;&gt;&quot;Resource&quot;&lt;/span&gt;: &lt;span class=&quot;s2&quot;&gt;&quot;arn:aws:logs:{Region}:{AccountNumber}:*&quot;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Lambdaì— ê¶Œí•œì„ ë¶€ì—¬í•´ ì£¼ê¸° ìœ„í•´ì„œ IAM &amp;gt; Roles &amp;gt; Create Roleì„ ì„ íƒí•©ë‹ˆë‹¤.
Use caseë¡œ Lambdaë¥¼ ì„ íƒí•˜ê³  ì•ì„œ ìƒì„±í•œ ì •ì±…ì„ ë¶€ì—¬í•œ ë’¤, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;export_S3_lambda&lt;/code&gt;ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ Roleì„ ìƒì„±í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;h4 id=&quot;step-2--ì½”ë“œ-ì‘ì„±&quot;&gt;Step 2 : ì½”ë“œ ì‘ì„±&lt;/h4&gt;

&lt;p&gt;Lambda ì½˜ì†” í™”ë©´ì—ì„œ ì•„ë˜ì™€ ê°™ì´ ë¹ˆì¹¸ì„ ì±„ìš°ê³ , Step 1ì—ì„œ ë§Œë“¤ì–´ë‘” roleì„ ë¶€ì—¬í•´ ëŒë‹¤ í•¨ìˆ˜ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/guide/exportLambda.png&quot; alt=&quot;baseimage&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ğŸ’¡ ë§Œì•½, Export ì—­í• ì„ ìˆ˜í–‰í•˜ëŠ” &lt;strong&gt;ëŒë‹¤ í•¨ìˆ˜ê°€ ìƒì„±í•˜ëŠ” ë¡œê·¸&lt;/strong&gt;ë¥¼ ìˆ˜ì§‘í•˜ê³  ì‹¶ì„ ê²½ìš°ì—ëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Create a new role with basic Lambda permissions&lt;/code&gt;ì„
ì„ íƒí•˜ê³  Consoleì— ì˜í•´ ìë™ì ìœ¼ë¡œ ìƒì„±ë˜ëŠ” Roleì— Step 1ì—ì„œ ë§Œë“  ì •ì±…ì„ ë¶€ì—¬í•˜ë©´ ë©ë‹ˆë‹¤.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ì´ì–´ì„œ ì•„ë˜ ì½”ë“œë¥¼ ë³µì‚¬í•˜ì—¬ ìƒí™©ì— ë§ëŠ” ì¸ì ê°’ì„ ë„£ì–´ì£¼ê³  Deploy í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Parameter&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;region : ë¡œê·¸ ê·¸ë£¹ê³¼ ëŒ€ìƒ ë²„í‚·ì€ ë™ì¼ ë¦¬ì „ì— ìœ„ì¹˜&lt;/li&gt;
  &lt;li&gt;destination : ë¡œê·¸ê°€ ì´ê´€ë˜ëŠ” ëŒ€ìƒ ë²„í‚·&lt;/li&gt;
  &lt;li&gt;logGroupName : Cloudwatch Log group ì´ë¦„&lt;/li&gt;
  &lt;li&gt;destinationPrefix : 1ï¸âƒ£ ì—ì„œ ì–¸ê¸‰í•œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;random-string&lt;/code&gt; ê°’&lt;/li&gt;
  &lt;li&gt;from/to : Lambda í•¨ìˆ˜ê°€ í˜¸ì¶œ ë˜ëŠ” ì‹œì ì„ ê¸°ì¤€ìœ¼ë¡œ, from/to ê¸°ê°„ì˜ ë¡œê·¸ ê·¸ë£¹ë“¤ì„ export&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;AWS&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;aws-sdk&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;cloudconfig&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;apiVersion&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;2014-03-28&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;region&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;region&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;cloudwatchlogs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;AWS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;CloudWatchLogs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;cloudconfig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;exports&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;handler&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;params&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;destination&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;bucket-name&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;logGroupName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;log-groups-name&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;destinationPrefix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;from&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;86400&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;cloudwatchlogs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;createExportTask&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;statusCode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}).&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;statusCode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;501&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ì´í›„ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ì„ ëˆŒëŸ¬ ê²°ê³¼ê°’ì„ ë³´ë©´ taskId ê°’ì´ ìƒì„±ë˜ê³  S3ì— ë¡œê·¸ê°€ ì´ê´€ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;3ï¸âƒ£-eventbridge-íŠ¸ë¦¬ê±°-ìƒì„±í•˜ê¸°&quot;&gt;3ï¸âƒ£ EventBridge íŠ¸ë¦¬ê±° ìƒì„±í•˜ê¸°&lt;/h3&gt;

&lt;p&gt;ì‘ì„±í•œ ëŒë‹¤ í•¨ìˆ˜ ì½˜ì†” í™”ë©´ ìƒë‹¨ì—ì„œ &lt;strong&gt;Add trigger&lt;/strong&gt; ë²„íŠ¼ì„ ëˆŒëŸ¬ ë‹¤ìŒê³¼ ê°™ì´ Ruleì„ ìƒì„±í•©ë‹ˆë‹¤. ì €ëŠ” ì£¼ê¸°ë¥¼ ì ê²€í•˜ê¸° ìœ„í•´ ì•„ë˜ì™€ ê°™ì´ 5ë¶„ì„ ì£¼ì—ˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/guide/eventBridgeRule.png&quot; alt=&quot;baseimage&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ğŸ’¡ &lt;a href=&quot;https://docs.aws.amazon.com/lambda/latest/dg/services-cloudwatchevents-expressions.html&quot;&gt;ìŠ¤ì¼€ì¥´ í‘œí˜„ì‹ ì‘ì„±ë²•&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;outro&quot;&gt;Outro&lt;/h2&gt;

&lt;p&gt;ì§€ê¸ˆê¹Œì§€ Lambda í•¨ìˆ˜ì™€ EventBrdigeë¥¼ ì‚¬ìš©í•˜ì—¬ ìë™ìœ¼ë¡œ ë¡œê·¸ë¥¼ S3ìœ¼ë¡œ ë°±ì—…í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.
í•´ë‹¹ ë°©ë²• ì™¸ì—ë„ ë¡œê·¸ë¥¼ ì´ê´€í•˜ëŠ” ë‹¤ì–‘í•œ ë°©ë²•ë“¤ì´ ìˆìœ¼ë¯€ë¡œ, ë” ì‰½ê³  ì¢‹ì€ ë°©ë²•ì´ ìˆë‹¤ë©´ ì•Œë ¤ì£¼ì„¸ìš”!&lt;/p&gt;

&lt;p&gt;ì†Œì¤‘í•œ ì‹œê°„ì„ ë‚´ì–´ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ì˜ëª»ëœ ë‚´ìš©ì€ ì§€ì í•´ ì£¼ì„¸ìš”! ğŸ˜ƒ&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;</content>

      
      
      
      
      

      <author>
          <name>Heuristic Wave</name>
        
        
      </author>

      

      
        <category term="aws" />
      

      
        <summary type="html">ë³¸ ê¸€ì€ Cloudwatch Logs groupsì˜ ë°ì´í„°ë¥¼ Lambdaë¥¼ ì‚¬ìš©í•´ ì£¼ê¸°ì ìœ¼ë¡œ S3ë¡œ export í•˜ëŠ” ë°©ë²•ì„ ë‹¤ë£¹ë‹ˆë‹¤.</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">Using the awslogs log driver in ECS(Fargate)</title>
      <link href="https://heuristicwave.github.io/ECS_CW_Logs" rel="alternate" type="text/html" title="Using the awslogs log driver in ECS(Fargate)" />
      <published>2022-03-01T00:00:00+00:00</published>
      <updated>2022-03-01T00:00:00+00:00</updated>
      <id>https://heuristicwave.github.io/ECS_CW_Logs</id>
      <content type="html" xml:base="https://heuristicwave.github.io/ECS_CW_Logs">&lt;p&gt;ECS Taskì˜ ì»¨í…Œì´ë„ˆê°€ ìƒì‚°í•˜ëŠ” ë¡œê·¸ë“¤ì€ CloudWatchë¥¼ í™œìš©í•˜ì—¬ ìˆ˜ì§‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
Cloudwatch Logsë¥¼ ìš´ì˜í•˜ë©° ë¡œê·¸ ì ì¬ê°€ ì œëŒ€ë¡œ ë˜ì§€ ì•Šê±°ë‚˜, Timestampê°€ ì¼ì¹˜í•˜ì§€ ì•Šê±°ë‚˜, ì§€ë‚˜ì¹œ ì§€ì—° ì‹œê°„ì´ ë°œìƒí•˜ê±°ë‚˜, ì•Œì•„ë³´ê¸° ì–´ë ¤ìš´ í˜•íƒœë¡œ ë¡œê·¸ê°€ ìŒ“ì¸ë‹¤ë©´ 
ì•„ë˜ ìš”ì†Œë“¤ì„ ê³ ë¯¼í•´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;h2 id=&quot;-references&quot;&gt;ğŸ“š References&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.aws.amazon.com/AmazonECS/latest/developerguide/using_awslogs.html&quot;&gt;Using the awslogs log driver&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Regular_expression&quot;&gt;Regular expression Wikipedia&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;fargateì—ì„œ-í•„ìš”í•œ-awslogs-ë¡œê·¸-ë“œë¼ì´ë²„&quot;&gt;Fargateì—ì„œ í•„ìš”í•œ awslogs ë¡œê·¸ ë“œë¼ì´ë²„&lt;/h2&gt;

&lt;p&gt;ê³µì‹ ë¬¸ì„œì—ì„œëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;awslogs-region&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;awslogs-group&lt;/code&gt; ë§Œì´ í•„ìš”í•˜ë‹¤ê³  í•˜ì§€ë§Œ, &lt;strong&gt;Fargate&lt;/strong&gt;ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;awslogs-stream-prefix&lt;/code&gt;ì´ ì¶”ê°€ì ìœ¼ë¡œ í•„ìš”í•©ë‹ˆë‹¤.
ë˜í•œ, ê°€ì‹œì„±ì„ í™•ë³´í•˜ê¸° ìœ„í•´ CloudWatch Logsì— ìˆ˜ì§‘ëœ ì—¬ëŸ¬ ì¤„ì˜ ë¡œê·¸ë¥¼ í•˜ë‚˜ì˜ ë©”ì‹œì§€ë¡œ ë³´ê¸° ìœ„í•´ì„œëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;awslogs-multiline-pattern&lt;/code&gt;ì´ í•„ìˆ˜ì ìœ¼ë¡œ í•„ìš”í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;awslogs-multiline-pattern&quot;&gt;awslogs-multiline-pattern&lt;/h3&gt;

&lt;p&gt;ê³µì‹ ë¬¸ì„œì˜ Note ë¶€ë¶„ì„ ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì€ ë©”ëª¨ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. &lt;em&gt;(ì •ë§ ê³µì‹ ë¬¸ì„œëŠ” í•œ ì¤„ë„ ê·¸ëƒ¥ ì§€ë‚˜ì¹  ìˆ˜ ì—†ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤!)&lt;/em&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Multiline logging performs regular expression parsing and matching of all log messages.
This may have a negative impact on logging performance.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ì‹¤ì œë¡œ ì €ëŠ” ì •ê·œ í‘œí˜„ì‹ì„ ê°„ê³¼í•˜ê³  ê²€ì¦ë˜ì§€ ì•Šì€ ì •ê·œì‹ë“¤ì„ ì ìš©í–ˆë‹¤ê°€ ë‹¤ìŒê³¼ ê°™ì€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Negative Impact&lt;/code&gt;ë¥¼ ë§Œë‚¬ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;ë¡œê·¸ê°€ ìˆ˜ì§‘ë˜ê¸°ê¹Œì§€ì˜ ì§€ë‚˜ì¹œ ì§€ì—° ì‹œê°„ ë°œìƒ (10ë¶„ ì´ìƒ)&lt;/li&gt;
  &lt;li&gt;ì§€ì—°ì‹œê°„ìœ¼ë¡œ ì¸í•œ Timestamp ë¶ˆì¼ì¹˜ (Ingestion timeê³¼ Event Timestampì˜ ê³¼ë„í•œ ì˜¤ì°¨)&lt;/li&gt;
  &lt;li&gt;1, 2ë²ˆ ì´ìœ ë¡œ ì¸í•œ ë¡œê·¸ ë¯¸ìˆ˜ì§‘&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;regular-expression-lab&quot;&gt;Regular Expression Lab&lt;/h2&gt;

&lt;p&gt;ì§€ê¸ˆë¶€í„° ì˜ˆì‹œë“¤ì„ í†µí•´, CW Logsë¥¼ ìš´ì˜í•˜ë©° ë§Œë‚  ìˆ˜ ìˆëŠ” ìƒí™©ë“¤ì„ ì²´í—˜í•´ ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;ìƒ˜í”Œ ë¡œê·¸ë¥¼ ë³µì‚¬í•˜ì—¬ &lt;a href=&quot;https://regexr.com&quot;&gt;RegExr&lt;/a&gt;ì—ì„œ match ì—¬ë¶€ë¥¼ í…ŒìŠ¤íŠ¸í•´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;case-1ï¸âƒ£&quot;&gt;Case 1ï¸âƒ£&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;awslogs-multiline-pattern&lt;/code&gt;ì˜ &lt;strong&gt;value&lt;/strong&gt;ë¡œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;^INFO&lt;/code&gt;ë¥¼ ì„¤ì •í•  ê²½ìš° 3ê°œì˜ Line ì¤‘ match ë˜ëŠ” ë¼ì¸ì€ ëª‡ ë¼ì¸ì¼ê¹Œìš”?&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;INFO | &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;pkg/trace/info/stats.go:104 &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;LogStats&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;                &lt;span class=&quot;c&quot;&gt;# Line 1&lt;/span&gt;
INFO | &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;pkg/trace/info/stats.go:104 &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;LogStats&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;                &lt;span class=&quot;c&quot;&gt;# Line 2&lt;/span&gt;
12:15:10 UTC | INFO | &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;pkg/trace/info/stats.go:104 &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;LogStats&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# Line 3&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;details&gt;
  &lt;summary&gt;ğŸ– ì •ë‹µ ë³´ê¸°&lt;/summary&gt;

  &lt;blockquote&gt;
    &lt;p&gt;&lt;strong&gt;INFO&lt;/strong&gt; | (pkg/trace/info/stats.go:104 in LogStats)                # Line 1&lt;/p&gt;
  &lt;/blockquote&gt;

  &lt;p&gt;^(caret) ì€ ì „ì²´ ë¬¸ìì—´ì˜ ì‹œì‘ ìœ„ì¹˜ì—ë§Œ ì¼ì¹˜í•˜ë¯€ë¡œ, Line 1 ë§Œì´ match ë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;/details&gt;

&lt;h3 id=&quot;case-2ï¸âƒ£&quot;&gt;Case 2ï¸âƒ£&lt;/h3&gt;

&lt;p&gt;ë‹¤ìŒì€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ì‹œ:ë¶„:ì´ˆ&lt;/code&gt;ë¥¼ í‘œí˜„í•˜ëŠ” ì •ê·œ í‘œí˜„ì‹ ì…ë‹ˆë‹¤. í•´ë‹¹ ì •ê·œ í‘œí˜„ì‹ì€ ì•„ë˜ 3ì¤„ì„ ëª¨ë‘ Match ì‹œí‚¬ ìˆ˜ ìˆì„ê¹Œìš”? &lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(0[1-9]|1[0-9]|2[0-4]):(0[1-9]|[1-5][0-9]):(0[1-9]|[1-5][0-9])&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;07:36:35 | Which line will match? Line 1
08:00:01 | I am Line 2!
08:01:00 | I am Line 3!
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;details&gt;
  &lt;summary&gt;ğŸ– ì •ë‹µ ë³´ê¸°&lt;/summary&gt;

  &lt;blockquote&gt;
    &lt;p&gt;&lt;strong&gt;07:36:35&lt;/strong&gt; | I was matched &lt;br /&gt;
08:00:01 | I was not matched! &lt;br /&gt;
08:01:00 | I was not matched! &lt;br /&gt;&lt;/p&gt;
  &lt;/blockquote&gt;

  &lt;p&gt;ê·¸ë ‡ë‹¤ë©´ ì™œ? ì²« ë²ˆì§¸ ë¼ì¸ë§Œì´ ë§¤ì¹­ë˜ì—ˆì„ê¹Œìš”? &lt;strong&gt;ë¶„, ì´ˆ&lt;/strong&gt;ì— í•´ë‹¹í•˜ëŠ” í‘œí˜„ì‹ì„ ìœ ì‹¬íˆ ì‚´í´ë³´ë©´ 00ë¶„ 00ì‹œëŠ” ë§¤ì¹­ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
ë•Œë¬¸ì— ê°ê° (ë¶„ : &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(0[0-9]|[1-5][0-9])&lt;/code&gt;, ì´ˆ : &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(0[0-9]|[1-5][0-9])&lt;/code&gt;)ë¡œ ìˆ˜ì •í•´ì•¼ ìœ„ 3ì¤„ì„ ë§¤ì¹­ ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;/details&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h3 id=&quot;other-case&quot;&gt;Other Case&lt;/h3&gt;

&lt;p&gt;ìœ„ 2ê°€ì§€ ì¼€ì´ìŠ¤ë§Œ ì¤€ë¹„ëœë‹¤ë©´ ëª¨ë“  ë¡œê·¸ë“¤ì„ ì œëŒ€ë¡œ ë¶„ë¦¬í•˜ì—¬ ìˆ˜ì§‘í•  ìˆ˜ ìˆì„ê¹Œìš”?&lt;/p&gt;

&lt;details&gt;
  &lt;summary&gt;ğŸ¤” ìƒê°í•´ë³´ê¸°&lt;/summary&gt;

  &lt;ul&gt;
    &lt;li&gt;Flagê°€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;INFO&lt;/code&gt; í˜•ì‹ì´ ì•„ë‹Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WARN&lt;/code&gt;ì´ ë°œìƒí•  ê²½ìš°&lt;/li&gt;
    &lt;li&gt;Timestampë¡œ ë§¤ì¹­ ì‘ì—…ì„ í•˜ëŠ”ë° í•œ ì¤„ì— 1íšŒ ì´ìƒ Timestampê°€ í¬í•¨ëœ ê²½ìš°
      &lt;blockquote&gt;
        &lt;p&gt;ex) &lt;strong&gt;08:00:01&lt;/strong&gt; | Itâ€™s &lt;strong&gt;08:02:03&lt;/strong&gt; right now.&lt;/p&gt;
      &lt;/blockquote&gt;
    &lt;/li&gt;
    &lt;li&gt;Application Crashë¡œ ì¸í•œ ì˜ˆìƒì¹˜ ëª»í•œ ë©”ì‹œì§€ê°€ í¬í•¨ë  ê²½ìš°&lt;/li&gt;
    &lt;li&gt;awslogs ë¡œê·¸ ë“œë¼ì´ë²„ ë‚´ì˜ ìš°ì„ ìˆœìœ„&lt;/li&gt;
  &lt;/ul&gt;

&lt;/details&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;ì•„ë§ˆë„ ìœ„ì— ê¸°ì¬í•œ ê²ƒë“¤ ì™¸ì—ë„ ë” ê³ ë ¤ í•  ê²ƒë“¤ì´ ë§ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.
ê°œë°œì´ë‚˜ ì•Œê³ ë¦¬ì¦˜ ë¬¸ì œë¥¼ í’€ ë•Œì™€ ë§ˆì°¬ê°€ì§€ë¡œ í•­ìƒ ì˜ˆìƒì¹˜ ëª»í•œ ì‹¤íŒ¨ ì§€ì ì„ ì˜ˆìƒí•˜ëŠ” ìŠµê´€ì´ í•„ìš”í•œ ê²ƒ ê°™ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;span class=&quot;table-of-contents-list&quot;&gt;ECS Error Handling and Troubleshooting&lt;/span&gt;&lt;/p&gt;
&lt;ul class=&quot;table-of-contents-list&quot;&gt;
    &lt;li&gt;&lt;a href=&quot;./ECS_Exec&quot;&gt;Using Amazon ECS Exec for debugging&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./ECS_CW_Logs&quot;&gt;Using the awslogs log driver in ECS(Fargate)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;</content>

      
      
      
      
      

      <author>
          <name>Heuristic Wave</name>
        
        
      </author>

      

      
        <category term="aws" />
      
        <category term="devops" />
      

      
        <summary type="html">ECS Taskì˜ ì»¨í…Œì´ë„ˆê°€ ìƒì‚°í•˜ëŠ” ë¡œê·¸ë“¤ì€ CloudWatchë¥¼ í™œìš©í•˜ì—¬ ìˆ˜ì§‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Cloudwatch Logsë¥¼ ìš´ì˜í•˜ë©° ë¡œê·¸ ì ì¬ê°€ ì œëŒ€ë¡œ ë˜ì§€ ì•Šê±°ë‚˜, Timestampê°€ ì¼ì¹˜í•˜ì§€ ì•Šê±°ë‚˜, ì§€ë‚˜ì¹œ ì§€ì—° ì‹œê°„ì´ ë°œìƒí•˜ê±°ë‚˜, ì•Œì•„ë³´ê¸° ì–´ë ¤ìš´ í˜•íƒœë¡œ ë¡œê·¸ê°€ ìŒ“ì¸ë‹¤ë©´ ì•„ë˜ ìš”ì†Œë“¤ì„ ê³ ë¯¼í•´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">Using Amazon ECS Exec for debugging</title>
      <link href="https://heuristicwave.github.io/ECS_Exec" rel="alternate" type="text/html" title="Using Amazon ECS Exec for debugging" />
      <published>2022-02-22T00:00:00+00:00</published>
      <updated>2022-02-22T00:00:00+00:00</updated>
      <id>https://heuristicwave.github.io/ECS_Exec</id>
      <content type="html" xml:base="https://heuristicwave.github.io/ECS_Exec">&lt;p&gt;Dockerì—ì„œëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;exec&lt;/code&gt; ëª…ë ¹ì–´ë¥¼ í†µí•´ ì‹¤í–‰ì¤‘ì¸ ì»¨í…Œì´ë„ˆì— ì ‘ì†í•˜ì—¬ ë””ë²„ê¹…ì´ ê°€ëŠ¥í•˜ë‹¤.
21ë…„ 3ì›” ë¶€í„° í•´ë‹¹ ê¸°ëŠ¥ì´ AWSì˜ ECSì—ì„œë„ ì‚¬ìš©ê°€ëŠ¥í•˜ê²Œ ë˜ì—ˆëŠ”ë°, í•´ë‹¹ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë©° ë§Œë‚¬ë˜ ë¬¸ì œë“¤ì„ ê¸°ë¡.&lt;/p&gt;

&lt;h2 id=&quot;-references&quot;&gt;ğŸ“š References&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-exec.html&quot;&gt;Using Amazon ECS Exec for debugging&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.aws.amazon.com/cli/latest/reference/ecs/execute-command.html&quot;&gt;AWS CLI Cmd Ref : excute-commnad&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;exec-í™œì„±í™”&quot;&gt;Exec í™œì„±í™”&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;SSM ì—ì´ì „íŠ¸ì™€ SSM ì„œë¹„ìŠ¤ ê°„ì˜ í†µì‹ ì— í•„ìš”í•œ ê¶Œí•œ ë¶€ì—¬&lt;/li&gt;
  &lt;li&gt;task-definition config ì¶”ê°€
    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s2&quot;&gt;&quot;linuxParameters&quot;&lt;/span&gt;: &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;initProcessEnabled&quot;&lt;/span&gt;: &lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;CLIë¡œ execute-command enable í›„, ì ê²€
    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;aws ecs create-service &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--cluster&lt;/span&gt; cluster-name &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--task-definition&lt;/span&gt; task-definition-name &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--enable-execute-command&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--service-name&lt;/span&gt; service-name &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--desired-count&lt;/span&gt; 1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;p&gt;ì•„ë˜ ëª…ë ¹ì–´ë¡œ í™œì„±í™” ì—¬ë¶€ í™•ì¸. (grep option í™œìš©, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep -F4 &quot;managedAgents&quot;&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep &quot;enableExecuteCommand&quot;&lt;/code&gt;)&lt;/p&gt;
    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;aws ecs describe-tasks &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--cluster&lt;/span&gt; cluster-name &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--tasks&lt;/span&gt; task-id 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;p&gt;í™œì„±í™” ìƒíƒœì¼ ë•Œì˜ Snippet&lt;/p&gt;
    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;tasks&quot;&lt;/span&gt;: &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            ...
            &lt;span class=&quot;s2&quot;&gt;&quot;containers&quot;&lt;/span&gt;: &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                    ...
                    &lt;span class=&quot;s2&quot;&gt;&quot;managedAgents&quot;&lt;/span&gt;: &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;
                        &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                            &lt;span class=&quot;s2&quot;&gt;&quot;lastStartedAt&quot;&lt;/span&gt;: &lt;span class=&quot;s2&quot;&gt;&quot;2021-03-01T14:49:44.574000-06:00&quot;&lt;/span&gt;,
                            &lt;span class=&quot;s2&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;s2&quot;&gt;&quot;ExecuteCommandAgent&quot;&lt;/span&gt;,
                            &lt;span class=&quot;s2&quot;&gt;&quot;lastStatus&quot;&lt;/span&gt;: &lt;span class=&quot;s2&quot;&gt;&quot;RUNNING&quot;&lt;/span&gt;
                        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
                    &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;,
            ...
            &lt;span class=&quot;s2&quot;&gt;&quot;enableExecuteCommand&quot;&lt;/span&gt;: &lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;,
            ...
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;Running ECS Exec
    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;aws ecs execute-command &lt;span class=&quot;nt&quot;&gt;--cluster&lt;/span&gt; cluster-name &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--task&lt;/span&gt; task-id &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--container&lt;/span&gt; container-name &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--interactive&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;--command&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;/bin/sh&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ë¬¸ì œ-í•´ê²°&quot;&gt;ë¬¸ì œ í•´ê²°&lt;/h2&gt;

&lt;p&gt;Exec ëª…ë ¹ì–´ ì´í›„ ì—ëŸ¬ í•¸ë“¤ (ê³µì‹ ë¬¸ì„œë“¤ì— ë‹µì´ ë‹¤ ìˆì—‡ë‹¤ ğŸ˜‚)&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;An error occurred &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;ClusterNotFoundException&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; when calling the ExecuteCommand operation: Cluster not found.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;Cluster ARN ê¸°ì… (From AWS CLI Ref : The Amazon Resource Name (ARN) or short name of the cluster from AWS CLI Ref)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;SessionManagerPlugin is not found. Please refer to SessionManager Documentation here: http://docs.aws.amazon.com/console/systems-manager/session-manager-plugin-not-found
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;í´ë¼ì´ì–¸íŠ¸ PCì— SSM Plugin ì„¤ì¹˜ (From AWS Docs : Prerequisites for using ECS Exec)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;span class=&quot;table-of-contents-list&quot;&gt;ECS Error Handling and Troubleshooting&lt;/span&gt;&lt;/p&gt;
&lt;ul class=&quot;table-of-contents-list&quot;&gt;
    &lt;li&gt;&lt;a href=&quot;./ECS_Exec&quot;&gt;Using Amazon ECS Exec for debugging&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./ECS_CW_Logs&quot;&gt;Using the awslogs log driver in ECS(Fargate)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;</content>

      
      
      
      
      

      <author>
          <name>Heuristic Wave</name>
        
        
      </author>

      

      
        <category term="aws" />
      
        <category term="devops" />
      

      
        <summary type="html">Dockerì—ì„œëŠ” exec ëª…ë ¹ì–´ë¥¼ í†µí•´ ì‹¤í–‰ì¤‘ì¸ ì»¨í…Œì´ë„ˆì— ì ‘ì†í•˜ì—¬ ë””ë²„ê¹…ì´ ê°€ëŠ¥í•˜ë‹¤. 21ë…„ 3ì›” ë¶€í„° í•´ë‹¹ ê¸°ëŠ¥ì´ AWSì˜ ECSì—ì„œë„ ì‚¬ìš©ê°€ëŠ¥í•˜ê²Œ ë˜ì—ˆëŠ”ë°, í•´ë‹¹ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë©° ë§Œë‚¬ë˜ ë¬¸ì œë“¤ì„ ê¸°ë¡.</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">Create Immutable Server using AWS Image Builder &amp;amp; Auto Scaling Group</title>
      <link href="https://heuristicwave.github.io/ImageBuilder" rel="alternate" type="text/html" title="Create Immutable Server using AWS Image Builder &amp; Auto Scaling Group" />
      <published>2022-02-21T00:00:00+00:00</published>
      <updated>2022-02-21T00:00:00+00:00</updated>
      <id>https://heuristicwave.github.io/ImageBuilder</id>
      <content type="html" xml:base="https://heuristicwave.github.io/ImageBuilder">&lt;p&gt;ë³¸ ê¸€ì€ 2021ë…„ 4ì›” 30ì¼ &lt;a href=&quot;https://aws.amazon.com/about-aws/whats-new/2021/04/ec2-image-builder-supports-auto-scaling-launch-template/&quot;&gt;EC2 Image Builder supports Auto Scaling launch template&lt;/a&gt;ì—
ì†Œê°œëœ ê¸°ëŠ¥ì„ í™œìš©í•´ Image Builderë¡œ Golden AMIë¥¼ ë§Œë“¤ê³ ,
í•´ë‹¹ ì´ë¯¸ì§€ë¡œ Auto Scaling Groupì˜ launch templateì„ ì—…ë°ì´íŠ¸í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;h1 id=&quot;intro&quot;&gt;Intro&lt;/h1&gt;

&lt;p&gt;í´ë¼ìš°ë“œë¥¼ ë‹¤ë£¨ë‹¤ ë³´ë©´ &lt;strong&gt;Netflix&lt;/strong&gt; ê°€ ì—¬ëŸ¬ ë¶„ì•¼ì—ì„œ ì•ì¥ì„œ ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ê·¸ì¤‘ì—ì„œ Immutable Server Patternì„ ì•Œë¦¬ëŠ”ë° ê¸°ì—¬í•œ 2013ë…„ì— ë°œê°„ëœ &lt;a href=&quot;https://netflixtechblog.com/ami-creation-with-aminator-98d627ca37b0&quot;&gt;AMI Creation with Aminator&lt;/a&gt;ë¥¼
ê¼­ í•œë²ˆ ì½ì–´ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤. ê³¼ê±° ë„·í”Œë¦­ìŠ¤ëŠ” AWSì˜ ì´ë¯¸ì§€ íŒŒì¼ì„ ìƒì„±í•˜ê¸° ìœ„í•´ Aminatorë¼ëŠ” ë„êµ¬ë¥¼ ì‚¬ìš©í–ˆì§€ë§Œ,
ë³¸ í¬ìŠ¤íŒ…ì—ì„œëŠ” ì´ë¯¸ì§€ ë¹Œë”ë¡œ AMIë¥¼ ë§Œë“¤ê³  Auto Scaling Groupì— ì ìš©ì‹œí‚¤ëŠ” ë°©ë²•ì„ ë°°ì›Œ Immutable Server Patternì„ í•™ìŠµí•´ ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;immutable-server&quot;&gt;Immutable Server&lt;/h2&gt;

&lt;p&gt;Immutable Server ëŒ€í•œ ë‚´ìš©ì€ martin fowler ë¸”ë¡œê·¸ì— ì†Œê°œëœ &lt;a href=&quot;https://martinfowler.com/bliki/ImmutableServer.html&quot;&gt;ImmutableServer&lt;/a&gt;
ê¸€ì„ ë³´ì‹œë©´ êµ‰ì¥íˆ ì˜ ì„¤ëª…ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ìš”ì•½ + ê·¸ë™ì•ˆì˜ ì œ ë‡Œí”¼ì…œì„ í•¨ê»˜ ë§ì”€ë“œë¦¬ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì„œë²„ë¥¼ ìš´ì˜í•˜ë‹¤ ë³´ë©´ ì—…ë°ì´íŠ¸ë¥¼ ë¹„ë¡¯í•œ ë‹¤ì–‘í•œ ì´ìŠˆë“¤ë¡œ ì¸í•´ êµ¬ì„±ìš”ì†Œê°€ ìì£¼ ë³€í•˜ê²Œ ë©ë‹ˆë‹¤.
ê·¸ë ‡ê²Œ ìš´ì˜í•˜ë‹¤ ë³´ë©´ ë¬´ì–¸ê°€ ê¼¬ì—¬ ì„œë²„ë¥¼ ì¬ ìƒì„±í•˜ëŠ” ì¼ì´ ë°œìƒí•˜ëŠ”ë° ì•„ë˜ì™€ ê°™ì€ ë¼ì´í”„ ì‚¬ì´í´ì„ ë§Œë‚˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://martinfowler.com/bliki/images/immutableServer/PhoenixServerLifecycle.png&quot; alt=&quot;phoenixServerLifecycle&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ì´ëŸ° ìƒí™©ì—ì„œ êµ¬ì„±ì´ ë‹¤ë¥¸ ì—¬ëŸ¬ ëŒ€ì˜ ì„œë²„ë¥¼ ê°€ì§€ê²Œ ë˜ë©´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Configuration drift&lt;/code&gt;ê°€ ë°œìƒí–ˆë‹¤ê³  í‘œí˜„í•©ë‹ˆë‹¤.
ë˜í•œ ìœ„ ê·¸ë¦¼ì²˜ëŸ¼ ìê¾¸ ìƒˆë¡œìš´ ì´ë¯¸ì§€ë¡œ íšŒê·€í•˜ë‹ˆê¹Œ, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Shift Left&lt;/code&gt;ë¼ê³ ë„ í‘œí˜„í•˜ê³  ì´ë¥¼ í•œêµ­ì–´ë¡œ í‘œí˜„í•˜ëŠ” ë§ì„ ì°¾ì•„ë³´ë‹ˆ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ì›ì  íšŒê·€&lt;/code&gt;ë¼ëŠ” í‘œí˜„ë„ ì“°ì…ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;êµ¬ì„± ë³€ê²½ì´ ì¦ì€ ì„œë²„ëŠ” ê¹¨ì§€ê¸°(fragile) ì‰½ê³ , ë˜ ì¥ì• ê°€ ë°œìƒí•  ê²½ìš° ì¬í˜„ì´ ì–´ë ¤ìš¸ë¿ë”ëŸ¬ ë³€ê²½ ì‹œ ì—°ì‡„ì ì¸ ì¥ì• ë¥¼ ìœ ë°œí•  ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤.
ì´ë¥¼ ë‘ê³  ê¹¨ì§€ê¸° ì‰¬ìš´ ëˆˆì†¡ì´ ê°™ë‹¤ í•˜ì—¬ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Snowflake Server&lt;/code&gt;ë¼ ë¶€ë¦…ë‹ˆë‹¤.
ì´ ìƒí™©ì„ í”¼í•˜ê¸° ìœ„í•´, Configuration driftë¥¼ í”¼í•˜ëŠ” Base Image(Configurationì´ ë°œìƒí•˜ë©´ ìƒˆë¡­ê²Œ ìƒì„±)ë¥¼ í™œìš©í•œ ë°©ë²•ì„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Phoenix Server&lt;/code&gt;
ë¼ ë¶€ë¦…ë‹ˆë‹¤. &lt;em&gt;(&lt;a href=&quot;https://martinfowler.com/bliki/PhoenixServer.html&quot;&gt;Phoenix Server&lt;/a&gt; ìš©ì–´ëŠ” ë§ˆí‹´ íŒŒìš¸ëŸ¬ì˜ ë™ë£Œ &lt;a href=&quot;https://twitter.com/kornys&quot;&gt;Kornelis Sietsma&lt;/a&gt;ê°€ ì œì•ˆí–ˆë‹¤ í•©ë‹ˆë‹¤.)&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/imagebuilder/immutableServer.png&quot; alt=&quot;immutableServer&quot; /&gt;&lt;/p&gt;

&lt;p&gt;í”¼ë‹‰ìŠ¤ ì„œë²„ì˜ ê°œë…ì€ ê¸°ë³¸ ì´ë¯¸ì§€(Base AMI, Golden AMI)ë¥¼ í†µí•´ ì–¸ì œë‚˜ ì¼ê´€ì„± ìˆëŠ” í™˜ê²½ì„ ì œê³µí–ˆê³ ,
ì´ëŸ¬í•œ ê°œë…ë“¤ì´ ìì—°ìŠ¤ëŸ½ê²Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Immutable Server&lt;/code&gt;ì˜ ê°œë…ìœ¼ë¡œ ì´ì–´ì¡ŒìŠµë‹ˆë‹¤.
&lt;em&gt;(ìµœê·¼ì—ëŠ” Immutable Serverë¥¼ ë„˜ì–´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Immutable Infrastructure&lt;/code&gt;ì˜ ê°œë…ë„ ìˆìŠµë‹ˆë‹¤!)&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ì´ë¯¸ì§€-ë¹Œë”ì™€-ì˜¤í† -ìŠ¤ì¼€ì¼-ê·¸ë£¹ìœ¼ë¡œ-ì´ë®¤í„°ë¸”-ì„œë²„-êµ¬ì¶•í•˜ê¸°&quot;&gt;ì´ë¯¸ì§€ ë¹Œë”ì™€ ì˜¤í†  ìŠ¤ì¼€ì¼ ê·¸ë£¹ìœ¼ë¡œ ì´ë®¤í„°ë¸” ì„œë²„ êµ¬ì¶•í•˜ê¸°&lt;/h2&gt;

&lt;p&gt;í´ë¼ìš°ë“œì—ì„œì˜ Immutable Server Pattern ê²€ìƒ‰í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ì¢‹ì€ ì˜ˆì‹œë“¤ì´ ë‚˜ì˜µë‹ˆë‹¤.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://aws.amazon.com/ko/blogs/mt/create-immutable-servers-using-ec2-image-builder-aws-codepipeline/&quot;&gt;Create immutable servers using EC2 Image Builder and AWS CodePipeline&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://cloudblogs.microsoft.com/opensource/2018/05/23/immutable-infrastructure-azure-vsts-terraform-packer-ansible/&quot;&gt;Tutorial: Immutable infrastructure for Azure, using VSTS, Terraform, Packer and Ansible&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://learn.hashicorp.com/tutorials/terraform/packer&quot;&gt;Provision Infrastructure with Packer&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://heuristicwave.github.io/Packer&quot;&gt;í•˜ì‹œì½”í”„ íŠœí† ë¦¬ì–¼ì„ ë³´ê³  ë§Œë“  í•„ìì˜ ë¸”ë¡œê·¸ ğŸ¥²&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ê·¸ëŸ¬ë‚˜ ì´ì œë¶€í„° ë‹¤ë£°, ì´ë¯¸ì§€ ë¹Œë”ì™€ ì˜¤í†  ìŠ¤ì¼€ì¼ ê·¸ë£¹ìœ¼ë¡œ ì´ë®¤í„°ë¸” ì„œë²„ íŒ¨í„´ì„ ë§Œì¡±ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
AWSì—ì„œ ì œê³µí•˜ëŠ” AutoScaleì€ íƒ„ë ¥ì ì¸ í™•ì¥ê³¼ ì¶•ì†Œë¥¼ ì œê³µí•˜ì§€ë§Œ Desired Capacity ê¸°ëŠ¥ì„ í™œìš©í•´ í•­ìƒ ë™ì¼í•œ ì„œë²„ì˜ ìˆ˜ë¥¼ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/background/imagebuilder.png&quot; alt=&quot;imageBuilder&quot; /&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Image Builderì˜ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Image pipelines&lt;/code&gt;ë¥¼ í™œìš©í•´ ì›ë³¸ AMIë¡œë¶€í„° ì›í•˜ëŠ” í˜•íƒœì˜ Output(Custom/Golden/Base AMI)ì„ ì œì‘í•©ë‹ˆë‹¤.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Distribution settings&lt;/code&gt;ì„ í†µí•´ lt(Launch Template)ì— 1ë²ˆì—ì„œ ìƒì„±í•œ AMIë¡œ êµì²´í•˜ì—¬ ìƒˆë¡œìš´ ë²„ì „ì„ ë§Œë“­ë‹ˆë‹¤.&lt;/li&gt;
  &lt;li&gt;ì´ì œ, ìƒˆë¡­ê²Œ ìƒì„±ë˜ëŠ” ASG(Auto Scaling Group)ì€ ìƒˆë¡­ê²Œ ë²„ì „ ì—…ëœ ltë¥¼ í†µí•´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;em&gt;3ë²ˆì˜ ASGì˜ ê²½ìš°, Refreshë¥¼ í•˜ê¸° ì „ê¹Œì§€ëŠ” ì´ì „ ìƒíƒœì˜ ltë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ê°€ ìš´ì˜ë˜ê³  ìˆìŠµë‹ˆë‹¤.
ì´ë¯¸ì§€ ìƒì„±ê³¼ ë™ì‹œì— ìƒˆë¡œìš´ AMIë¡œ EC2 Refreshë¥¼ í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ìˆì§€ë§Œ,
ìƒˆë¡­ê²Œ ìƒì„±ëœ ì¸ìŠ¤í„´ìŠ¤ê°€ ìš´ì˜í™˜ê²½ì— ë°”ë¡œ ì ìš©ë˜ëŠ” ê²ƒì€ ë°”ëŒì§í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ í•´ë‹¹ ë¶€ë¶„ì— ëŒ€í•œ ìë™í™”ëŠ” ì œì™¸í•˜ì˜€ìŠµë‹ˆë‹¤.
ë§Œì•½ ê²€ì¦ëœ AMIë¥¼ ìƒì„±í•œë‹¤ë©´, Lambda í˜¹ì€ ê¸°íƒ€ ë°©ë²• ë“±ì„ í†µí•´ Refresh í•˜ì—¬ ì´ë¯¸ì§€ ìƒì„±ë¶€í„° ë°°í¬ê¹Œì§€ ìë™í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;ì¶”í›„ ë‹¤ë¥¸ í¬ìŠ¤íŒ…ì—ì„œ ìì„¸íˆ ë‹¤ë£° ì˜ˆì •ì´ì§€ë§Œ, ì´ëŸ¬í•œ íŒ¨í„´ì€ Immutable Infrastructureì˜ í•œ ìš”ì†Œë¥¼ ì´ë£¨ê¸°ë„ í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;h2 id=&quot;-workshop&quot;&gt;ğŸ“œ Workshop&lt;/h2&gt;

&lt;h3 id=&quot;0ï¸âƒ£-launch-template--auto-scaling-groups-ìƒì„±&quot;&gt;0ï¸âƒ£ Launch Template &amp;amp; Auto Scaling groups ìƒì„±&lt;/h3&gt;

&lt;p&gt;ê¸°ì¡´ í™˜ê²½ì— 0ï¸âƒ£ì´ ì¤€ë¹„ë˜ì–´ ìˆë‹¤ë©´ ë‹¤ìŒ ë‹¨ê³„ì¸ &lt;strong&gt;Distribution settings&lt;/strong&gt;ìœ¼ë¡œ ë„˜ì–´ê°€ë„ ì¢‹ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;í•´ë‹¹ ë‹¨ê³„ëŠ” ì œê°€ êµ‰ì¥íˆ ê²Œìœ¼ë¥¸ ê´€ê³„ë¡œ AWS Documentation : &lt;a href=&quot;https://docs.aws.amazon.com/autoscaling/ec2/userguide/create-asg-launch-template.html&quot;&gt;Creating an Auto Scaling group using a launch template&lt;/a&gt;ë¡œ ëŒ€ì²´í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ğŸ’¡ ë§Œì•½ ê¸°ì¡´ í™˜ê²½ì´ Launch Templateì´ ì•„ë‹Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Launch Configurations&lt;/code&gt;ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆì„ ê²½ìš°,
ì½˜ì†” í™”ë©´ì—ì„œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Copy to launch template&lt;/code&gt; ë²„íŠ¼ì„ ëˆ„ë¥´ì‹œë©´ ì†ì‰½ê²Œ ltë¡œ ë³€ê²½ ê°€ëŠ¥í•©ë‹ˆë‹¤. &lt;br /&gt;
ğŸ’¡ Launch Templateê³¼ Launch ConfigurationsëŠ” êµ‰ì¥íˆ ìœ ì‚¬í•˜ì§€ë§Œ, Launch Templateì˜ ê²½ìš° ë” ë‹¤ì–‘í•œ ê¸°ëŠ¥ë“¤ì„ ì œê³µí•©ë‹ˆë‹¤.
íŠ¹íˆ ë²„ì „ê´€ë¦¬ ê¸°ëŠ¥ì„ í†µí•´ Rollbackì„ í•˜ê±°ë‚˜, ì—…ë°ì´íŠ¸ì‹œ ASGë¥¼ í™œìš©í•œ Rolling Updateê°€ ê°€ëŠ¥í•´ Launch Template ì‚¬ìš©ì„ ê¶Œì¥í•©ë‹ˆë‹¤.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;1ï¸âƒ£-distribution-settings&quot;&gt;1ï¸âƒ£ Distribution settings&lt;/h3&gt;

&lt;p&gt;EC2 Image Builder ì½˜ì†” í™”ë©´ì— ì ‘ì†í•´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Distribution settings&lt;/code&gt;ì—ì„œ ìƒˆë¡œìš´ ì„¸íŒ…ì„ ìƒì„±í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/imagebuilder/distribution.png&quot; alt=&quot;distribution&quot; /&gt;&lt;/p&gt;

&lt;p&gt;í•„ìˆ˜ í•­ëª©ì¸ ì´ë¦„ì„ ì‘ì„±í•˜ê³  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Region settings&lt;/code&gt;ì—ì„œ ë°°í¬í•  ë¦¬ì „ì„ í™•ì¸í•œ í›„,
í•˜ë‹¨ì˜ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Launch template configuration&lt;/code&gt;ì—ì„œ Step 0ï¸âƒ£ì—ì„œ ì‘ì„±í•œ ltë¥¼ ì§€ì •í•˜ê³  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;create settings&lt;/code&gt;ë¡œ ìƒì„±í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;2ï¸âƒ£-image-pipelines&quot;&gt;2ï¸âƒ£ Image pipelines&lt;/h3&gt;

&lt;h4 id=&quot;step-1&quot;&gt;Step 1&lt;/h4&gt;

&lt;p&gt;Distribution settings ì‘ì„±ì´ ì™„ë£Œë˜ì—ˆë‹¤ë©´, ì½˜ì†”ì—ì„œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Image pipelines&lt;/code&gt;ì— ì ‘ì†í•˜ì—¬ ì•„ë˜ ì •ë³´ë“¤ì„ ê¸°ì¬í•©ë‹ˆë‹¤.
ì•„ë˜ ì‚¬ì§„ì˜ ì¢Œì¸¡ Step 5ê¹Œì§€ì˜ ê³¼ì •ì„ ê±°ì¹˜ë©´ ëª©í‘œë¡œ í–ˆë˜ í™˜ê²½ì´ ì™„ì„±ë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/imagebuilder/imagepipeline.png&quot; alt=&quot;pipeline&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Build schedule&lt;/code&gt;ì—ì„œëŠ” ì£¼ê¸°ì ìœ¼ë¡œ íŒŒì´í”„ë¼ì¸ì„ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ë°©ë²•ë“¤ì„ ì œê³µí•˜ëŠ”ë° ìš´ì˜ìê°€ ì›í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;h4 id=&quot;step-2&quot;&gt;Step 2&lt;/h4&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Choose recipe&lt;/code&gt; ë‹¨ê³„ì—ì„œëŠ” ê¸°ì¡´ì— ë§Œë“¤ì–´ë‘” &lt;strong&gt;recipe&lt;/strong&gt;ê°€ ì—†ìœ¼ë¯€ë¡œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Create new recipe&lt;/code&gt;ë¥¼ ì„ íƒí•˜ê³ , &lt;strong&gt;Image type&lt;/strong&gt;ìœ¼ë¡œ &lt;strong&gt;AMI&lt;/strong&gt;ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ë‹¤ìŒ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Base image&lt;/code&gt;ë¥¼ ê³ ë¥´ëŠ” ë‹¨ê³„ì—ì„œëŠ” ì•„ë˜ í™”ë©´ê³¼ ê°™ì´ &lt;strong&gt;ê´€ë¦¬í˜• ì´ë¯¸ì§€&lt;/strong&gt;ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ ê¸°ì¡´ì— ì‘ì„±í•œ &lt;strong&gt;Custom AMI ID&lt;/strong&gt;ë¥¼ ì‚¬ìš©í•´ë„ ë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/imagebuilder/baseimage.png&quot; alt=&quot;baseimage&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ê·¸ë‹¤ìŒ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Instance configuration&lt;/code&gt;ì™€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Working directory&lt;/code&gt;ì—ì„œëŠ” &lt;strong&gt;ê¸°ë³¸ ê°’&lt;/strong&gt;ìœ¼ë¡œ ë‘¬ë„ ìƒê´€ì—†ì§€ë§Œ
&lt;strong&gt;SSM, User data, Working directory path&lt;/strong&gt;ì˜ í•„ìš” ì—¬ë¶€ì— ë”°ë¼ í™œìš©í•˜ì‹œë©´ ë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì´ì–´ì„œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Components&lt;/code&gt;ì—ì„œëŠ” Golden AMIë¥¼ êµ¬ì¶•í•˜ê¸° ìœ„í•´ ì„ í–‰ë˜ì–´ì•¼ í•˜ëŠ” ê°ì¢… Agentë‚˜ ì†Œí”„íŠ¸ì›¨ì–´(Apache, dotnet etc)ë¥¼ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì €ëŠ” í¸ì˜ìƒ CloudWatch Agentë¥¼ ì„ íƒí–ˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/imagebuilder/components.png&quot; alt=&quot;components&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ê·¸ë‹¤ìŒ ì´ì–´ì§€ëŠ” &lt;strong&gt;Test components, Storage, Tags&lt;/strong&gt; ì—­ì‹œ í•„ìš” ì—¬ë¶€ì— ë”°ë¼ í™œìš©í•˜ì‹œë©´ ë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;h4 id=&quot;step-3&quot;&gt;Step 3&lt;/h4&gt;

&lt;p&gt;3ë‹¨ê³„ì— ì§„ì…í•˜ë©´ ì•„ë˜ ì‚¬ì§„ê³¼ ê°™ì´ ì´ë¯¸ì§€ ë¹Œë”ì˜ ì¸í”„ë¼ Config ê°’ë“¤ì„ ì •ì˜í•  ìˆ˜ ìˆëŠ” ê³µê°„ì´ ë‚˜ì˜µë‹ˆë‹¤.
3ë²ˆì§¸ ë²„íŠ¼ì¸ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Create New infrastructure configuration&lt;/code&gt;ìœ¼ë¡œ ì§ì ‘ ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•, ë„¤íŠ¸ì›Œí¬, SNS topicì„ ì„¤ì •ì´ ê°€ëŠ¥í•˜ì§€ë§Œ,
ì €ëŠ” 1ë²ˆ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Create infrastructure configuration using service defaults&lt;/code&gt;ë¡œ ê¸°ë³¸ êµ¬ì„± ê°’ë“¤ì„ ì¡ì•„ì£¼ì—ˆìŠµë‹ˆë‹¤.
(IAM Roleê³¼ SNS Topicë„ ìë™ìœ¼ë¡œ ìƒì„±í•´ ì£¼ê³  êµ‰ì¥íˆ í¸ë¦¬í•˜ë„¤ìš”.)&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/imagebuilder/defineconfig.png&quot; alt=&quot;config&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;step-4&quot;&gt;Step 4&lt;/h4&gt;

&lt;p&gt;ë“œë””ì–´, ì´ì „ &lt;strong&gt;1ï¸âƒ£ Distribution settings&lt;/strong&gt; ê³¼ì •ì—ì„œ ë§Œë“¤ì–´ë‘” &lt;strong&gt;ë°°í¬ ì„¤ì •&lt;/strong&gt; í•´ë‹¹ ë‹¨ê³„ì—ì„œ ì„ íƒí•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/imagebuilder/associatelt.png&quot; alt=&quot;asso&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;step-5&quot;&gt;Step 5&lt;/h4&gt;

&lt;p&gt;Review ë‹¨ê³„ê¹Œì§€ êµ¬ì„± ìš”ì†Œë“¤ì„ ê²€í† í•´ ë³´ê³  Create pipelineì„ ëˆ„ë¥´ê³  Image pipelines ì½˜ì†”ë¡œ ëŒì•„ì˜¤ë©´ ì•„ë˜ì™€ ê°™ì€ í™”ë©´ì„ ë§Œë‚˜ê²Œ ë©ë‹ˆë‹¤.
ì•„ë˜ ìº¡ì²˜í™”ë©´ì˜ ê²½ìš° ì´ë¯¸ ë¹Œë“œê°€ ëë‚œ ìƒíƒœì´ì§€ë§Œ, í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ì„œ &lt;strong&gt;Actions - Run pipeline&lt;/strong&gt; ë‹¨ê³„ë¥¼ ê±°ì¹˜ë©´,
ec2 ì½˜ì†”ì—ì„œ image buildë¥¼ ìœ„í•œ builder ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ê³  ì¢…ë£Œë˜ëŠ” ê²ƒì„ ê³¼ì •ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../../assets/built/images/post/imagebuilder/imgconsole.png&quot; alt=&quot;console&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;3ï¸âƒ£-review&quot;&gt;3ï¸âƒ£ Review&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;EC2 - Images - AMIs&lt;/strong&gt;ì—ì„œ ìƒˆë¡­ê²Œ ìƒì„±ëœ AMI í™•ì¸&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;EC2 - Launch templates&lt;/strong&gt;ì—ì„œ ìƒˆë¡­ê²Œ ë²„ì „ì´ ì˜¬ë¼ê°„ lt í™•ì¸, ì—¬ê¸°ì„œ Versions ì •ë³´ë¥¼ ëˆ„ë¥´ë©´ Image Builderê°€ ìƒì„±í•œ Descriptionì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
&lt;img src=&quot;../../assets/built/images/post/imagebuilder/version.png&quot; alt=&quot;version&quot; /&gt;&lt;/li&gt;
  &lt;li&gt;ì œëŒ€ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ê¸°ì¡´ì˜ EC2 í•˜ë‚˜ë¥¼ ì¢…ë£Œì‹œí‚¤ë©´, ì €ì˜ ê²½ìš° ASGì˜ Desiredê°€ 2ë¡œ ì„¤ì •í–ˆìœ¼ë¯€ë¡œ í•˜ë‚˜ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒˆë¡œìš´ ë²„ì „ìœ¼ë¡œ ë³€ê²½ë©ë‹ˆë‹¤.
ì´ëŠ” &lt;strong&gt;EC2 - Auto Scaling groups&lt;/strong&gt;ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
&lt;img src=&quot;../../assets/built/images/post/imagebuilder/asg.png&quot; alt=&quot;asg&quot; /&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;4ï¸âƒ£-clean-up&quot;&gt;4ï¸âƒ£ Clean Up&lt;/h3&gt;

&lt;p&gt;ë¶„í•´ëŠ” ì¡°ë¦½ì˜ ì—­ìˆœìœ¼ë¡œ?! 2ï¸âƒ£ -&amp;gt; 1ï¸âƒ£ -&amp;gt; 0ï¸âƒ£ ì—­ìˆœìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ ì •ë¦¬í•˜ê³  3ï¸âƒ£ Review í•­ëª©ì„ ì ê²€í•˜ì—¬ ëª¨ë“  ë¦¬ì†ŒìŠ¤ê°€ íšŒìˆ˜ë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;outro&quot;&gt;Outro&lt;/h2&gt;

&lt;p&gt;ì§€ê¸ˆê¹Œì§€ ê°ì¢… ì´ì•¼ê¸° ê±°ë¦¬ë“¤ê³¼ EC2 Image Builderë¥¼ ì‚¬ìš©í•˜ë©° Immutable Server Patternì„ í•™ìŠµí•´ ë³´ì•˜ìŠµë‹ˆë‹¤.
ê³¼ê±° ì œê°€ Packerë¡œ ê´€ë ¨ í™˜ê²½ì„ êµ¬ì¶•í•œ ì ì´ ìˆëŠ”ë°, ì—­ì‹œ AWS í™˜ê²½ì—ì„œëŠ” AWSì˜ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²Œ ì—°ê³„ë„ ìš©ì´í•˜ê³  êµ¬ì¶•ë„ ì‰½ë„¤ìš”.&lt;/p&gt;

&lt;p&gt;ì†Œì¤‘í•œ ì‹œê°„ì„ ë‚´ì–´ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ì˜ëª»ëœ ë‚´ìš©ì€ ì§€ì í•´ ì£¼ì„¸ìš”! ğŸ˜ƒ&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ğŸ“š References&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ê¸€ ì¤‘ê°„ì¤‘ê°„ í•˜ì´í¼ ë§í¬ë¡œ Reference ë“¤ì„ ë‹¬ì•„ë‘ì—ˆìŠµë‹ˆë‹¤.
íŠ¹íˆ, ì´ë²ˆ í¬ìŠ¤íŒ… ë ˆí¼ëŸ°ìŠ¤ë“¤ì€ ì¢‹ì€ ë‚´ìš©ë“¤ì´ ë§ìœ¼ë‹ˆ ì›ë³¸ë“¤ì„ ì½ì–´ë³´ì‹œê³  ë‹¹ì‹œ ì œê°€ ëŠë‚€ ê¸°ì¨ë“¤ì„ í•¨ê»˜ ëŠë‚„ìˆ˜ ìˆìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;</content>

      
      
      
      
      

      <author>
          <name>Heuristic Wave</name>
        
        
      </author>

      

      
        <category term="aws" />
      
        <category term="devops" />
      

      
        <summary type="html">ë³¸ ê¸€ì€ 2021ë…„ 4ì›” 30ì¼ EC2 Image Builder supports Auto Scaling launch templateì— ì†Œê°œëœ ê¸°ëŠ¥ì„ í™œìš©í•´ Image Builderë¡œ Golden AMIë¥¼ ë§Œë“¤ê³ , í•´ë‹¹ ì´ë¯¸ì§€ë¡œ Auto Scaling Groupì˜ launch templateì„ ì—…ë°ì´íŠ¸í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤.</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">Terraform Tips 2 - Data &amp;amp; Index</title>
      <link href="https://heuristicwave.github.io/TerraformTips2" rel="alternate" type="text/html" title="Terraform Tips 2 - Data &amp; Index" />
      <published>2022-01-02T00:00:00+00:00</published>
      <updated>2022-01-02T00:00:00+00:00</updated>
      <id>https://heuristicwave.github.io/TerraformTips2</id>
      <content type="html" xml:base="https://heuristicwave.github.io/TerraformTips2">&lt;p&gt;Terraform ë” ìµìˆ™í•˜ê²Œ 2 - Data &amp;amp; Index &lt;br /&gt;
AWS ë¦¬ì†ŒìŠ¤ë¡œ ì•Œì•„ë³´ëŠ” terraform Data í™œìš© íŒ&lt;/p&gt;

&lt;h2 id=&quot;intro&quot;&gt;Intro&lt;/h2&gt;

&lt;p&gt;ì´ë²ˆ í¬ìŠ¤íŒ…ì€ Tipì´ë¼ í•˜ê¸°ì—ëŠ” ë¶€ë„ëŸ¬ìš´ ì‚¬ì†Œí•œ ì§€ì‹ì´ì§€ë§Œ, ì œê°€ ìì£¼ ìŠì–´ë²„ë¦¬ëŠ” ë‚´ìš©ì´ë¼ ê¸€ë¡œ ë‚¨ê¸°ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. &lt;strong&gt;Terraform Data&lt;/strong&gt;ë¥¼ ì˜ í™œìš©í•˜ë©´ ë””ìŠ¤í¬ ì´ë¯¸ì§€, ì½”ë“œë¡œ ì •ì˜í•œ ë‹¤ì–‘í•œ ë¦¬ì†ŒìŠ¤ ë° í´ë¼ìš°ë“œ ê³µê¸‰ì APIì—ì„œ ê°€ì ¸ì˜¨ ì •ë³´ë“¤ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ëª¨ë“  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Data Sources&lt;/code&gt;ê°€ ë™ì¼í•œ ë°©ë²•ìœ¼ë¡œ ê°„í¸í•˜ê²Œ ì¡°íšŒí•  ìˆ˜ ìˆìœ¼ë©´ ì¢‹ê² ì§€ë§Œ, ë§‰ìƒ ì‚¬ìš©í•˜ë ¤ê³  í•˜ë©´ ì´ëŸ° ì €ëŸ° ë¬¸ì œë“¤ì„ ë§Œë‚˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ê³µì‹ë¬¸ì„œ(&lt;a href=&quot;https://learn.hashicorp.com/tutorials/terraform/data-sources&quot;&gt;Tutorial : Query Data Sources&lt;/a&gt;)ì—ì„œë„ Data í™œìš©ë°©ë²•ì„ ë°°ìš¸ ìˆ˜ ìˆì§€ë§Œ,
ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” 3ê°€ì§€ ì˜ˆì œì™€ í•¨ê»˜ ë¦¬ì†ŒìŠ¤ë¥¼ Query í•˜ëŠ” ë°©ë²•ì„ ë°°ì›Œ ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;query-ami&quot;&gt;Query AMI&lt;/h2&gt;

&lt;p&gt;AWSì˜ ìµœì‹  AMIëŠ” ì£¼ê¸°ì ìœ¼ë¡œ ê°±ì‹ ë©ë‹ˆë‹¤. ë”°ë¼ì„œ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì½”ë“œë¥¼ ì‘ì„±í•˜ê¸° ìœ„í•´, í•­ìƒ ìµœì‹  AMIë¥¼ ì°¸ì¡°í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ”ë° ë‹¤ìŒê³¼ ê°™ì€ ë°©ë²•ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;data &lt;span class=&quot;s2&quot;&gt;&quot;aws_ami&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;amazon_linux&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  most_recent &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;true

  &lt;/span&gt;owners &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;amazon&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;

  filter &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    name   &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;name&quot;&lt;/span&gt;
    values &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;amzn2-ami-kernel-*-hvm-*-x86_64-gp2&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

output &lt;span class=&quot;s2&quot;&gt;&quot;name&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  value &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; data.aws_ami.amazon_linux.id
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ìœ„ì™€ ê°™ì€ ë°©ë²•ìœ¼ë¡œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;filter&lt;/code&gt;ì™€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;owners&lt;/code&gt; ê°’ì„ ì¡°ì •í•˜ë©° ì–´ë–¤ ì´ë¯¸ì§€ë“ ì§€ id ê°’(output)ì„ ì–»ì–´ ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì˜ˆë¥¼ ë“¤ì–´ ECSì˜ Optimized AMIë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, ë‹¤ìŒê³¼ ê°™ì€ filter ê°’ì„ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;values = [â€œamzn2-ami-ecs-hvm-*-x86_64-ebsâ€]&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ECSì™€ ë‹¬ë¦¬ EKSëŠ” AMI ëª…ëª… ê·œì¹™ì´ ì•½ê°„ ë‹¬ë¼ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;filter&lt;/code&gt; ê¸°ëŠ¥ì„ í™œìš©í•´ì•¼, ì¡°ê±´ì— ë§ëŠ” Optimized ì´ë¯¸ì§€ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
EKS ì´ë¯¸ì§€ì˜ ê²½ìš° ëª¨ë“  ì´ë¯¸ì§€ì˜ ì²« ë¬¸ìì—´ì´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;amazon-eks-&lt;/code&gt;ìœ¼ë¡œ ì‹œì‘í•˜ê¸° ë•Œë¬¸ì—, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*&lt;/code&gt;ë¥¼ í•¨ê»˜ ë„£ì–´ Optimized AMIë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;data &lt;span class=&quot;s2&quot;&gt;&quot;aws_ami&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;amazon_linux_eks&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  most_recent &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;true

  &lt;/span&gt;owners &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;amazon&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;

  filter &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    name   &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;name&quot;&lt;/span&gt;
    values &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;amazon-eks-*&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

  filter &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    name   &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;architecture&quot;&lt;/span&gt;
    values &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;x86_64&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ê·¸ëŸ¬ë‚˜ ìœ„ Queryì˜ ê²°ê³¼ ê°’ì„ &lt;a href=&quot;https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/eks-optimized-ami.html&quot;&gt;ê³µì‹ ë¬¸ì„œ&lt;/a&gt;ì— ê¸°ì¬ëœ AMI IDì™€ ë¹„êµí•´ ë³´ë©´,
&lt;strong&gt;x86&lt;/strong&gt; IDê°€ ì•„ë‹Œ, &lt;strong&gt;x86 ê°€ì†&lt;/strong&gt; ID ê°’ê³¼ ì¼ì¹˜í•œ ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆì„ ê²ë‹ˆë‹¤.
ë¬¸ì„œì— ê¸°ì¬ëœ &lt;strong&gt;x86 ê°€ì†&lt;/strong&gt;ì€ gpuê°€ ì‚¬ìš© ê°€ëŠ¥í•œ Optimized AMIì…ë‹ˆë‹¤. gpuë¥¼ ì‚¬ìš©í•˜ëŠ” ë…¸ë“œì˜ ëª…ëª… ê·œì¹™ì´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;amazon-eks-gpu&lt;/code&gt;ë¡œ ì‹œì‘í•˜ê¸° ë•Œë¬¸ì— ìœ„ filter ì¡°ê±´ìœ¼ë¡œëŠ” gpu ë…¸ë“œê°€ ì¡°íšŒë©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ê·¸ë ‡ë‹¤ë©´ ì¼ë°˜ x86 ë…¸ë“œëŠ” ì–´ë–»ê²Œ ì¡°íšŒí•´ì•¼ í• ê¹Œìš”? ğŸ§ ì–´ëŠ ë¬¸ì„œì—ë„ ê¸°ì¬ë˜ì–´ ìˆì§€ ì•Šì§€ë§Œ,
ëŒ€ëµì ì¸ ëª…ëª… ê·œì¹™ì„ ìœ ì¶”í•˜ì—¬ ë³´ë‹ˆ ì¼ë°˜ EKS ë…¸ë“œëŠ” ë‹¤ìŒê³¼ ê°™ì€ í•„í„°ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;values = [â€œamazon-eks-node-1.22-*â€]&lt;/p&gt;

  &lt;p&gt;value ê°’ì˜ &lt;em&gt;prefix&lt;/em&gt; ê·œì¹™ì„ ë³´ë‹ˆ EKSì˜ ë²„ì „ë„ &lt;em&gt;prefix&lt;/em&gt; ì•ˆì— í¬í•¨ë˜ì–´, &lt;br /&gt;
ì´ ê°’ì„ ì‘ìš©í•˜ë©´ ë‹¤ì–‘í•œ ë²„ì „ì˜ EKS Optimized AMIë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì¶”ì¸¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ì´ì™¸ì—ë„ ë¦¬ì „ë§ˆë‹¤ ë‹¤ë¥¸ Optimized AMIëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;data&lt;/code&gt;ì—ëŠ” ëª…ì‹œí•˜ì§€ ì•Šì•˜ì§€ë§Œ, &lt;strong&gt;Providerì— ëª…ì‹œí•œ ë¦¬ì „ì— ì¢…ì†ì„±&lt;/strong&gt;ì„ ê°–ê²Œ ë©ë‹ˆë‹¤.
ë˜ í•˜ë‚˜ì˜ íŒì„ ë“œë¦¬ìë©´, ë§Œì•½ Filterì—ì„œ ì§€ì›í•˜ì§€ ì•ŠëŠ” ëª…ëª… ê·œì¹™ì„ ê°€ì§„ AMIë¼ë©´ ì •ê·œì‹ìœ¼ë¡œë„ ì¡°íšŒê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤!&lt;/p&gt;

&lt;p&gt;ì—¬ê¸°ê¹Œì§€ ì œê°€ ìì£¼ ì‚¬ìš©í•˜ëŠ” ë‹¤ì–‘í•œ AMI IDë¥¼ ì¡°íšŒí•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤. ì´ì œ ì–´ë–¤ AMIë¼ë„ ì¡°íšŒê°€ ê°€ëŠ¥í•˜ê² ì£ ? ğŸ˜&lt;/p&gt;

&lt;h2 id=&quot;query-az&quot;&gt;Query AZ&lt;/h2&gt;

&lt;p&gt;AWSì˜ ë¦¬ì „ë§ˆë‹¤ ì‚¬ìš©ê°€ëŠ¥í•œ azê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸ì—, ì¡°ê¸ˆ ë” ìœ ì—°í•œ ì½”ë“œë¥¼ ì‘ì„±í•˜ê¸° ìœ„í•´ ë‹¤ìŒ ì½”ë“œë¥¼ ì‚¬ìš©í•´ ì‚¬ìš©ê°€ëŠ¥í•œ azë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤.
ì´í›„, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;data.&amp;lt;NAME&amp;gt;.&amp;lt;ATTRIBUTE&amp;gt;.names&lt;/code&gt; ë¡œ ì‚¬ìš©ê°€ëŠ¥í•œ az ê°’ë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;data &lt;span class=&quot;s2&quot;&gt;&quot;aws_availability_zones&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;available&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  state &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;available&quot;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;output &lt;span class=&quot;s2&quot;&gt;&quot;azs&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
 value &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; data.aws_availability_zones.available.names
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;names&lt;/code&gt;ì—ëŠ” ì‚¬ìš©ê°€ëŠ¥í•œ azê°€ ë°°ì—´ í˜•íƒœë¡œ ë“¤ì–´ê°€ ìˆì–´, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;names[0]&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;names[1]&lt;/code&gt;ê³¼ ê°™ì´ Index ê°’ìœ¼ë¡œ íŠ¹ì • ê°’ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ê·¸ëŸ¬ë‚˜, ëª¨ë“  dataê°€ Index ê°’ì„ ê°€ì§€ê³  ìˆëŠ” ê²ƒì€ ì•„ë‹™ë‹ˆë‹¤.&lt;/p&gt;

&lt;h2 id=&quot;query-vpc_id&quot;&gt;Query vpc_id&lt;/h2&gt;

&lt;p&gt;ë‹¤ë¥¸ ë¦¬ì†ŒìŠ¤ì™€ AWS ì†”ë£¨ì…˜ë“¤ì„ ì—°ê³„í•˜ê¸° ìœ„í•´ì„œëŠ” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;vpc_id&lt;/code&gt; ê°’ì´ í•„ìˆ˜ì ìœ¼ë¡œ ë“¤ì–´ê°‘ë‹ˆë‹¤.
vpcì˜ idë¥¼ êµ¬í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë°©ë²•ìœ¼ë¡œ idë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
(tags ê°’ì„ í™œìš©í•´ ì¼ì¢…ì˜ í•„í„°ë§ì„ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.)&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;data &lt;span class=&quot;s2&quot;&gt;&quot;aws_vpcs&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;vpcs&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    tags &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        Name &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; var.vpc_name
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

output &lt;span class=&quot;s2&quot;&gt;&quot;vpc_id&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    value &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; data.aws_vpcs.vpcs.ids
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ìœ„ ì½”ë“œë¡œ ë‹¤ìŒê³¼ ê°™ì´ Output ê°’ì„ ì–»ì„ ìˆ˜ ìˆì§€ë§Œ, í•˜ë‚˜ì˜ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;az&lt;/code&gt; ê°’ì„ ì–»ì„ë•Œì™€ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ids[0]&lt;/code&gt; í˜•ì‹ìœ¼ë¡œ ê°’ì„ ì¡°íšŒí•˜ë ¤ í•˜ë©´,
â€œThis value does not have any indices.â€ ë¼ëŠ” ì—ëŸ¬ ë©”ì‹œì§€ì™€ í•¨ê»˜ ì¶œë ¥ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Changes to Outputs:
  + vpc_id &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;
      + &lt;span class=&quot;s2&quot;&gt;&quot;vpc-0x1234567890&quot;&lt;/span&gt;,
    &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ë„ëŒ€ì²´ ë¬´ì—‡ì´ ì˜ëª»ëœ ê²ƒì¼ê¹Œìš”? azì™€ ë™ì¼í•œ ë°©ë²•ìœ¼ë¡œ ì ‘ê·¼í–ˆì§€ë§Œ, ì™œ ì§€ì›í•˜ì§€ ì•ŠëŠ”ì§€ëŠ” ì•„ì§ê¹Œì§€ë„ ëª¨ë¥´ê² ìŠµë‹ˆë‹¤â€¦
ëˆ„êµ¬ ì•„ì‹œëŠ” ë¶„ì´ ìˆë‹¤ë©´ ì•Œë ¤ì£¼ì„¸ìš”.&lt;/p&gt;

&lt;h3 id=&quot;countë¡œ-index-ë¶€ì—¬í•˜ê¸°&quot;&gt;countë¡œ index ë¶€ì—¬í•˜ê¸°&lt;/h3&gt;

&lt;p&gt;ìœ„ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” azë¥¼ ê²€ìƒ‰í•  ë•Œë³´ë‹¤ëŠ” ë¶ˆí¸í•˜ì§€ë§Œ, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;count&lt;/code&gt;ë¥¼ ì‚¬ìš©í•´ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;data &lt;span class=&quot;s2&quot;&gt;&quot;aws_vpc&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;target&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  count &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; length&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;data.aws_vpcs.vpcs.ids&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;    &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; tolist&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;data.aws_vpcs.vpcs.ids&lt;span class=&quot;o&quot;&gt;)[&lt;/span&gt;count.index]
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# sample code using vpc_id&lt;/span&gt;
resource &lt;span class=&quot;s2&quot;&gt;&quot;aws_lb_target_group&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;sample_resource&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  count &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; length&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;data.aws_vpcs.vpcs.ids&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;c&quot;&gt;# Skip Config&lt;/span&gt;
  vpc_id      &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; data.aws_vpc.target[count.index].id
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;aws_vpcs&lt;/code&gt;ê°€ ì•„ë‹Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;aws_vpc&lt;/code&gt;ë¥¼ ì¶”ê°€í•˜ê³  index ë¥¼ ë¶€ì—¬í•˜ê¸° ìœ„í•œ ë‚´ì¥ í•¨ìˆ˜ë“¤ì„ ì‚¬ìš©í•´ indexë¥¼ ë¶€ì—¬í•©ë‹ˆë‹¤.
ì´í›„, ë¦¬ì†ŒìŠ¤ì—ì„œ data ê°’ë“¤ì„ ì‹ë³„í•˜ê¸° ìœ„í•œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;count&lt;/code&gt;ë¥¼ ê¸°ì…í•˜ê³  ìœ„ì™€ ê°™ì´ index ê°’ìœ¼ë¡œ ì¡°íšŒê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;outro&quot;&gt;Outro&lt;/h2&gt;

&lt;p&gt;ì§€ê¸ˆê¹Œì§€ Dataë¥¼ í™œìš©í•´ ê°ì¢… ë¦¬ì†ŒìŠ¤ë“¤ì„ ê²€ìƒ‰í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ ë³´ì•˜ìŠµë‹ˆë‹¤.&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;vpc_id&lt;/code&gt;ë„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;az&lt;/code&gt;ì™€ ê°™ì´ ë³„ë„ì˜ index ê³¼ì • ì—†ì´,
ê°„í¸í•œ ì¡°íšŒê°€ ê°€ëŠ¥í•˜ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤. (ì œê°€ ì•„ì§ ë°©ë²•ì„ ëª¨ë¥´ëŠ” ê²ƒì¼ ìˆ˜ë„ ìˆì–´ìš”!)&lt;/p&gt;

&lt;p&gt;ì§€ê¸ˆê¹Œì§€ í…Œë¼í¼ ë” ìµìˆ™í•˜ê²Œ Data &amp;amp; Index í¸ì„ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ì˜ëª»ëœ ë‚´ìš©ì€ ì§€ì í•´ ì£¼ì„¸ìš”! ğŸ˜ƒ&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;span class=&quot;table-of-contents-list&quot;&gt;Terraform Tips&lt;/span&gt;&lt;/p&gt;
&lt;ul class=&quot;table-of-contents-list&quot;&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips1&quot;&gt;Module &amp;amp; Output&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips2&quot;&gt;Data &amp;amp; Index&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips3&quot;&gt;Refresh &amp;amp; Replace&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips4&quot;&gt;Move (Refactoring)&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;./TerraformTips5&quot;&gt;Import&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;</content>

      
      
      
      
      

      <author>
          <name>Heuristic Wave</name>
        
        
      </author>

      

      
        <category term="devops" />
      
        <category term="terraform" />
      

      
        <summary type="html">Terraform ë” ìµìˆ™í•˜ê²Œ 2 - Data &amp;amp; Index AWS ë¦¬ì†ŒìŠ¤ë¡œ ì•Œì•„ë³´ëŠ” terraform Data í™œìš© íŒ</summary>
      

      
      
    </entry>
  
</feed>
