<!DOCTYPE html>
<html>
<head>

    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Base Meta -->
    <!-- dynamically fixing the title for tag/author pages -->



    <title>Terraform Tips 5 - Import</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.edited.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/syntax.css" />

    <!-- Custom.css -->
    <link rel="stylesheet" type="text/css" href="/assets/built/custom.css" />

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- webfont -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/earlyaccess/nanumgothic.css">

    <!-- syntax.css -->
    <link rel="stylesheet" type="text/css" href="/assets/built/syntax.css" />

    <!-- highlight.js -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>

    <!--[if IE]>
        <style>
            p, ol, ul{
                width: 100%;
            }
            blockquote{
                width: 100%;
            }
        </style>
    <![endif]-->
    
    <!-- This tag outputs SEO meta+structured data and other important settings -->
    <meta name="description" content="Careful Writer" />
    <link rel="shortcut icon" href="https://heuristicwave.github.io/assets/built/images/water-wave-48.png" type="image/png" />
    <link rel="canonical" href="https://heuristicwave.github.io/TerraformTips5" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

     <!--title below is coming from _includes/dynamic_title-->
    <meta property="og:site_name" content="Heuristic Wave Blog" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Terraform Tips 5 - Import" />
    <meta property="og:description" content="Terraform 더 익숙하게 5 - Import Intro IaC를 도입하기 위해 구축 단계부터 코드로 인프라를 작성할 수도 있지만, 기 구축된 인프라를 코드화할 수도 있습니다. 이때 사용하는 Terraform의 기능이 바로 Import입니다. 하지만 저는 구축 단계에도 종종 Import 기능을 활용합니다. Terraform으로 코드를 작성하기 위해 registry.terraform.io에서 가이드 하는 대로 코드를 작성하는 것이 생각보다 어려운" />
    <meta property="og:url" content="https://heuristicwave.github.io/TerraformTips5" />
    <meta property="og:image" content="https://heuristicwave.github.io/assets/built/images/background/terraform.png" />
    <meta property="article:publisher" content="https://www.facebook.com/" />
    <meta property="article:author" content="https://www.facebook.com/" />
    <meta property="article:published_time" content="2022-07-23T09:00:00+09:00" />
    <meta property="article:modified_time" content="2022-07-23T09:00:00+09:00" />
    <meta property="article:tag" content="Devops" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Terraform Tips 5 - Import" />
    <meta name="twitter:description" content="Terraform 더 익숙하게 5 - Import Intro IaC를 도입하기 위해 구축 단계부터 코드로 인프라를 작성할 수도 있지만, 기 구축된 인프라를 코드화할 수도 있습니다. 이때 사용하는 Terraform의 기능이 바로 Import입니다. 하지만 저는 구축 단계에도 종종 Import 기능을 활용합니다. Terraform으로 코드를 작성하기 위해 registry.terraform.io에서 가이드 하는 대로 코드를 작성하는 것이 생각보다 어려운" />
    <meta name="twitter:url" content="https://heuristicwave.github.io/" />
    <meta name="twitter:image" content="https://heuristicwave.github.io/assets/built/images/background/terraform.png" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Heuristic Wave Blog" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Devops" />
    <meta name="twitter:site" content="@" />
    <meta name="twitter:creator" content="@" />
    <meta property="og:image:width" content="1400" />
    <meta property="og:image:height" content="933" />

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "Heuristic Wave Blog",
        "logo": "https://heuristicwave.github.io/"
    },
    "url": "https://heuristicwave.github.io/TerraformTips5",
    "image": {
        "@type": "ImageObject",
        "url": "https://heuristicwave.github.io/assets/built/images/background/terraform.png",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://heuristicwave.github.io/TerraformTips5"
    },
    "description": "Terraform 더 익숙하게 5 - Import Intro IaC를 도입하기 위해 구축 단계부터 코드로 인프라를 작성할 수도 있지만, 기 구축된 인프라를 코드화할 수도 있습니다. 이때 사용하는 Terraform의 기능이 바로 Import입니다. 하지만 저는 구축 단계에도 종종 Import 기능을 활용합니다. Terraform으로 코드를 작성하기 위해 registry.terraform.io에서 가이드 하는 대로 코드를 작성하는 것이 생각보다 어려운"
}
    </script>
    <script data-ad-client="ca-pub-6093187208665634" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <!-- <script type="text/javascript" src="https://demo.ghost.io/public/ghost-sdk.min.js?v=724281a32e"></script>
    <script type="text/javascript">
    ghost.init({
    	clientId: "ghost-frontend",
    	clientSecret: "f84a07a72b17"
    });
    </script> -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-0FTXSPJZFY"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-0FTXSPJZFY');
    </script>
    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="Terraform Tips 5 - Import" href="https://heuristicwave.github.io/feed.xml" />


</head>
<body class="post-template">

    <div class="site-wrapper">
        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template -->

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
        
            
                <a class="site-nav-logo" href="https://heuristicwave.github.io/">Heuristic Wave Blog</a>
            
        
        
            <ul class="nav" role="menu">
    <li class="nav-home" role="menuitem"><a href="/">Home</a></li>
    <li class="nav-about" role="menuitem"><a href="/about/">About</a></li>
    <li class="nav-extracurricular" role="menuitem"><a href="/tag/uncategorized/">Uncategorized</a></li>
    <li class="nav-aws" role="menuitem"><a href="/tag/aws/">AWS</a></li>
    <li class="nav-backend" role="menuitem"><a href="/tag/backend/">Back-end</a></li>
    <li class="nav-devops" role="menuitem"><a href="/tag/devops/">DevOps</a></li>
    <li class="nav-backend" role="menuitem"><a href="/tag/security/">Security</a></li>
    <li class="nav-archive" role="menuitem">
        <a href="/archive">All Posts</a>
    </li>
    <li class="nav-archive" role="menuitem">
        <a href="/author_archive.html">Tag별 Posts</a>
    </li>
</ul>

        
    </div>
    <div class="site-nav-right">
        <div class="social-links">
            
            
        </div>
        
            <a class="subscribe-button" href="#subscribe">Search</a>
        
    </div>
</nav>

    </div>
</header>

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full  tag-devops tag-terraform post tag-devops ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="23 July 2022">23 July 2022</time>
                    
                        <span class="date-divider">/</span>
                        
                            
                               <a href='/tag/devops/'>DEVOPS</a>,
                            
                        
                            
                               <a href='/tag/terraform/'>TERRAFORM</a>
                            
                        
                    
                </section>
                <h1 class="post-full-title">Terraform Tips 5 - Import</h1>
            </header>

            
            <figure class="post-full-image" style="background-image: url(/assets/built/images/background/terraform.png)">
            </figure>
            

            <section class="post-full-content">
                <div class="kg-card-markdown">
                    <p>Terraform 더 익숙하게 5 - Import</p>

<h2 id="intro">Intro</h2>

<p>IaC를 도입하기 위해 구축 단계부터 코드로 인프라를 작성할 수도 있지만, 기 구축된 인프라를 코드화할 수도 있습니다.
이때 사용하는 Terraform의 기능이 바로 <code class="language-plaintext highlighter-rouge">Import</code>입니다.</p>

<p>하지만 저는 구축 단계에도 종종 <code class="language-plaintext highlighter-rouge">Import</code> 기능을 활용합니다. Terraform으로 코드를 작성하기 위해 <a href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs">registry.terraform.io</a>에서
가이드 하는 대로 코드를 작성하는 것이 생각보다 어려운 작업이기 때문이죠. 🥲</p>

<p>그래서 저는 먼저 구축하고자 하는 인프라를 콘솔상에서 구성한 다음, 구축에 필요한 Attribute 들을 파악합니다.
그다음 <code class="language-plaintext highlighter-rouge">Import</code>를 사용해 동작하는 IaC 코드를 얻고 수정합니다.
즉, 저는 <code class="language-plaintext highlighter-rouge">Import</code> 기능을 Cheat Sheet처럼 사용하고 있습니다. 😅</p>

<p>이번 포스팅에서는 실제 제가 Cheat Sheet으로 활용하는 <em>‘Import 시나리오’</em>를 통해 <code class="language-plaintext highlighter-rouge">Import</code>를 학습해 보겠습니다.</p>

<p><br /></p>

<h2 id="-조립은-분해의-역순">⏮ 조립은 분해의 역순</h2>

<p>AWS Systems Manager의 인스턴스 운영 자동화를 위한 State Manager 기능을 사용하기 위해 <a href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/ssm_association">문서</a>를
확인해 보았지만, 다음과 같은 사용법 만이 기재되어 있습니다.</p>

<div class="language-terraform highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">resource</span> <span class="s2">"aws_ssm_association"</span> <span class="s2">"example"</span> <span class="p">{</span>
  <span class="nx">name</span> <span class="p">=</span> <span class="nx">aws_ssm_document</span><span class="p">.</span><span class="nx">example</span><span class="p">.</span><span class="nx">name</span>

  <span class="nx">targets</span> <span class="p">{</span>
    <span class="nx">key</span>    <span class="p">=</span> <span class="s2">"InstanceIds"</span>
    <span class="nx">values</span> <span class="p">=</span> <span class="p">[</span><span class="nx">aws_instance</span><span class="p">.</span><span class="nx">example</span><span class="p">.</span><span class="nx">id</span><span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>해당 코드를 apply 해도 무수한 Error만 만날 뿐 빠르게 진도가 나가지 않기에, 우선 AWS 웹 콘솔을 활용해 인스턴스 운영 자동화를 위한 State Manager 기능을 구현해 두었습니다.</p>

<h3 id="0️⃣-준비-작업">0️⃣ 준비 작업</h3>

<p>이번 포스팅의 작업 공간(~/terraform)을 생성하고 해당 위치에서 아래 코드 블록을 터미널에 복사합니다. (리소스가 위치한 리전 명에 맞게 세팅해 주세요)</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> &gt; provider.tf
provider "aws" {
  region  = "ap-northeast-2"
}
</span><span class="no">EOF
</span></code></pre></div></div>
<p>이후, <code class="language-plaintext highlighter-rouge">terraform init</code> 명령어를 실행시켜주세요.</p>

<h3 id="1️⃣-skeleton-code-작성">1️⃣ Skeleton Code 작성</h3>

<p>웹 콘솔로 작업한 State Manager를 코드화하기 위해 아래와 같이 Skeleton Code를 작성합니다.
(import 후, 생성되는 <code class="language-plaintext highlighter-rouge">*.tfstate</code>를 담는 일종의 빵틀을 제작하는 단계입니다.)</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> &gt; main.tf
resource "aws_ssm_association" "copycat" {}
</span><span class="no">EOF
</span></code></pre></div></div>

<h3 id="2️⃣-import-configuration">2️⃣ Import Configuration</h3>

<p>사용법(<code class="language-plaintext highlighter-rouge">terraform import [options] ADDRESS ID</code>)에 따라 아래 명령어를 실행시키면 <strong>root directory</strong>에 미리 생성된 인프라가 <code class="language-plaintext highlighter-rouge">*.tfstate</code> 파일에 담깁니다.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>terraform import aws_ssm_association.copycat &lt;Association ID&gt;
</code></pre></div></div>

<p>생성된 <code class="language-plaintext highlighter-rouge">*.tfstate</code> 파일을 확인하면 json 형태로 <code class="language-plaintext highlighter-rouge">aws_ssm_association</code> resource block에 작성해야 하는 각종 Config 값들을 알 수 있습니다.
그러나, <code class="language-plaintext highlighter-rouge">show</code> 명령어를 사용해 HCL Syntax에 맞춰 <strong>human-readable</strong>한 형태로 출력합니다.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>terraform show <span class="nt">-no-color</span> <span class="o">&gt;</span> main.tf
</code></pre></div></div>

<p>본래 <code class="language-plaintext highlighter-rouge">-no-color</code> 옵션은 coloring 작업을 비활성화하지만, Editor에 format 맞추기 위해 필수적으로 해당 옵션을 사용합니다.</p>

<h3 id="3️⃣-modify-arguments">3️⃣ Modify Arguments</h3>

<p>이제서야 얼추 모양을 갖춘 <code class="language-plaintext highlighter-rouge">main.tf</code>의 <strong>resource block</strong>에는 리소스가 인프라에 <strong>반영된 이후 단계에 생성되는 각종 result</strong> 값(<code class="language-plaintext highlighter-rouge">arn</code>, <code class="language-plaintext highlighter-rouge">association_id</code>, <code class="language-plaintext highlighter-rouge">id</code>)
이 포함되어 있습니다. 해당 값들은 <code class="language-plaintext highlighter-rouge">terraform plan</code> 명령어를 수행해 Error 메시지에 명시되므로 지워야 하는 Arguments들을 찾아 코드를 수정합니다.</p>

<p>이때, Instancd Id, IAM Role ARN 등과 같이 <strong>절대적인 값</strong>도 <strong>재사용 가능한 변수</strong>로 처리하는 것이 좋습니다.
해당 작업을 마치고 나면, <code class="language-plaintext highlighter-rouge">plan</code>, <code class="language-plaintext highlighter-rouge">apply</code> 명령어를 수행하여 다음 메시지를 얻으면 정상적으로 Import 작업이 완료된 것입니다.</p>

<blockquote>
  <p>Apply complete! Resources: 0 added, 0 changed, 0 destroyed.</p>
</blockquote>

<p><br /></p>

<h2 id="-import-into-module">🥵 Import into Module</h2>

<p>지금까지 학습한 절차는 단순 <strong>Resource</strong>에 Import 시키므로 비교적 수월한 과정이었습니다.</p>

<blockquote>
  <p>Resource configured with count <br />
➡️ <code class="language-plaintext highlighter-rouge">terraform import 'aws_instance.baz[0]' i-abcd1234</code> <br />
Resource configured with for_each <br />
➡️ <code class="language-plaintext highlighter-rouge">terraform import 'aws_instance.baz["example"]' i-abcd1234</code> <br />
Module <br />
➡️ <code class="language-plaintext highlighter-rouge">terraform import module.foo.aws_instance.bar i-abcd1234</code></p>
</blockquote>

<p>Module을 Import 하는 절차도 Resource와 동일하지만, 명백한 <strong>한계점</strong>이 있습니다.</p>

<p>흔하게 사용되는 <a href="https://registry.terraform.io/modules/terraform-aws-modules/ec2-instance/aws/latest">ec2-instance</a> 모듈을 사용한다고 가정하겠습니다.
Resource 때와 동일하게 아래와 같은 Skeleton Code를 작성하고 Import 명령어를 수행하는 부분은 동일합니다. (1️⃣ &amp; 2️⃣ 과정 동일)</p>

<div class="language-terraform highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="s2">"ec2_instance"</span> <span class="p">{</span>
  <span class="nx">source</span>  <span class="p">=</span> <span class="s2">"terraform-aws-modules/ec2-instance/aws"</span>
  <span class="nx">version</span> <span class="p">=</span> <span class="s2">"~&gt; 3.0"</span>

  <span class="nx">name</span> <span class="p">=</span> <span class="s2">"single-instance"</span>
<span class="p">}</span>
</code></pre></div></div>

<p>이때, <code class="language-plaintext highlighter-rouge">foo</code>는 <code class="language-plaintext highlighter-rouge">ec2_instance</code>가 되고 <code class="language-plaintext highlighter-rouge">bar</code>는 해당 모듈의 <strong>aws_instance</strong>에서 정의한 <code class="language-plaintext highlighter-rouge">this</code>가 됩니다.</p>

<p>문제는 <strong>3️⃣ Modify Arguments</strong> 단계에서 발생합니다. Single Resource에서는 <code class="language-plaintext highlighter-rouge">plan</code>을 통해 수정해야 하는 <strong>Arguments</strong>들을 알 수 있지만, 
module에서 skeleton code 이외에 더 기재해야 하는 variable 값들을 알 수 없습니다.
즉, module import 이후 생성되는 <code class="language-plaintext highlighter-rouge">*.tfstate</code> 파일의 <strong>json 값을 일일이 확인</strong>하여 module의 <strong>input parameter에 해당하는 값</strong>들을 알아내 <strong>하나씩 다 기재</strong>하는 방법 외에는 
온전하게 import 명령어를 사용할 수 없습니다.</p>

<p>Reverse Engineering으로 원래의 코드를 완벽하게 재현하기 어려운 것처럼, 구성이 복잡한 모듈은 Reverse Terraforming이 매우 어렵습니다.</p>

<p><br /></p>

<h2 id="-reverse-terraform-open-source">🌏 Reverse Terraform Open Source</h2>

<p><strong>2️⃣ Import Configuration</strong> 단계에서 수행한 작업은 <a href="https://github.com/GoogleCloudPlatform/terraformer">Terraformer</a>(작성 시점 기준 ★ 8.1k),
<a href="https://github.com/dtan4/terraforming">Terraforming</a>(업데이트 종료) 등과 같은 오픈소스 도구를 활용할 수도 있습니다.</p>

<p><strong>⚠️ 고려 사항</strong><br />
<strong>Terraformer</strong>는 <a href="https://github.com/GoogleCloudPlatform/terraformer/blob/master/docs/aws.md#profiles-support">AWS configuration Profiles Select</a>와 <a href="https://github.com/GoogleCloudPlatform/terraformer/blob/master/docs/aws.md#attribute-filters">Attribute filters</a>과 같은 편리한 기능들을 제공합니다. <br />
그러나 <a href="https://github.com/GoogleCloudPlatform/terraformer/blob/master/docs/aws.md#supported-services">terraformer AWS 리소스 지원 범위</a>에서도 확인할 수 있다시피,
위에서 작업한 <code class="language-plaintext highlighter-rouge">aws_ssm_association</code>과 같이 지원하지 않는 리소스들도 존재합니다.</p>

<p><br /></p>

<h2 id="outro">Outro</h2>

<p>마지막으로 Import Workflow를 다시 한번 정리하면서 마치겠습니다.</p>

<ol>
  <li>Import 대상(이미 프로비저닝 된 인프라)이 되는 Skeleton Code 작성</li>
  <li>Write Config : Import &amp; Show 명령어 수행</li>
  <li>Modify Arguments</li>
  <li>Plan &amp; Apply</li>
</ol>

<p>지금까지 테라폼 더 익숙하게 Import 편을 읽어주셔서 감사합니다! 잘못된 내용은 지적해 주세요! 😃</p>

<p><br /></p>

<p><strong>📚 References</strong></p>

<ul>
  <li>Terraform Documentation <a href="https://www.terraform.io/cli/commands/import">Import Command</a></li>
  <li>Hashicorp Tutorial 문서 <a href="https://learn.hashicorp.com/tutorials/terraform/state-import?in=terraform/state">Import Terraform Configuration</a></li>
</ul>

<hr />

<p><span class="table-of-contents-list">Terraform Tips</span></p>
<ul class="table-of-contents-list">
    <li><a href="./TerraformTips1">Module &amp; Output</a></li>
    <li><a href="./TerraformTips2">Data &amp; Index</a></li>
    <li><a href="./TerraformTips3">Refresh &amp; Replace</a></li>
    <li><a href="./TerraformTips4">Move (Refactoring)</a></li>
    <li><a href="./TerraformTips5">Import</a></li>
</ul>

<p><br /></p>

                </div>
            </section>

            <!-- Email subscribe form at the bottom of the page -->
            
                <section class="subscribe-form">
                    <h3 class="subscribe-form-title">Subscribe to Heuristic Wave Blog</h3>
                    <p>Get the latest posts delivered right via RSS</p>
                    <form method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm"  />
    <input class="location" type="hidden" name="location"  />
    <input class="referrer" type="hidden" name="referrer"  />

    <div class="form-group">
        <input class="subscribe-email" type="url" name="rss url" value="https://heuristicwave.github.io" readonly />
    </div>
    <!--To Do Rss Web Font <i class="fas fa-rss"></i> -->
    <button class="" type="submit" disabled><span>Copy</span></button>
    <script type="text/javascript">(function(g,h,o,s,t){h[o]('.location')[s]=h[o]('.location')[s] || g.location.href;h[o]('.referrer')[s]=h[o]('.referrer')[s] || h.referrer;})(window,document,'querySelector','value');</script>
</form>

                </section>
            

            <footer class="post-full-footer">
                <!-- Everything inside the #author tags pulls data from the author -->
                <!-- #author-->
                
                    
                
                <!-- /author  -->
            </footer>

            <!-- If you use Disqus comments, just uncomment this block.
            The only thing you need to change is "test-apkdzgmqhj" - which
            should be replaced with your own Disqus site-id. -->
            
                <section class="post-full-comments">
                    <div id="disqus_thread"></div>
                    <script>
                        var disqus_config = function () {
                            this.page.url = 'https://heuristicwave.github.io/TerraformTips5';
                            this.page.identifier = '/TerraformTips5';
                            this.page.title = 'Terraform Tips 5 - Import';
                        };
                        (function() {
                            var d = document, s = d.createElement('script');
                            s.src = 'https://heuristicwave-github-io.disqus.com/embed.js';
                            s.setAttribute('data-timestamp', +new Date());
                            (d.head || d.body).appendChild(s);
                        })();
                    </script>
                </section>
            

        </article>

    </div>
</main>

<!-- Links to Previous/Next posts -->
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
                
                
                
                
                    <article class="read-next-card"
                        
                            style="background-image: url(/assets/built/images/blog-cover.jpg)"
                        
                    >
                        <header class="read-next-card-header">
                            <small class="read-next-card-header-sitetitle">&mdash; Heuristic Wave Blog &mdash;</small>
                            
                                <h3 class="read-next-card-header-title"><a href="/tag/devops/">Devops</a></h3>
                            
                        </header>
                        <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
</div>
                        <div class="read-next-card-content">
                            <ul>
                                
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/eksctl_ppt">DIY Amazon EKS with eksctl</a></li>
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/DeclarativeVSImperativeinK8s">Declarative vs Imperative in Kubernetes</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/TerraformTips4">Terraform Tips 4 - Move (Refactoring)</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                            </ul>
                        </div>
                        <footer class="read-next-card-footer">
                            <a href="/tag/devops/">
                                
                                    See all 16 posts  →
                                
                            </a>
                        </footer>
                    </article>
                
            

            <!-- If there's a next post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/DeclarativeVSImperativeinK8s">
                <div class="post-card-image" style="background-image: url(/assets/built/images/background/k8s-horizontal.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/DeclarativeVSImperativeinK8s">
                <header class="post-card-header">
                    
                        
                            
                               <span class="post-card-tags">Devops</span>
                            
                        
                            
                                <span class="post-card-tags">Container</span>
                            
                        
                    

                    <h2 class="post-card-title">Declarative vs Imperative in Kubernetes</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p></p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                
                <span class="reading-time">
                    
                    
                      1 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

            <!-- If there's a previous post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/ECS_Walkthrough">
                <div class="post-card-image" style="background-image: url(/assets/built/images/background/ecs.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/ECS_Walkthrough">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Aws</span>
                            
                        
                    

                    <h2 class="post-card-title">ECS on EC2 Walkthrough</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p></p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                
                <span class="reading-time">
                    
                    
                      1 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

        </div>
    </div>
</aside>

<!-- Floating header which appears on-scroll, included from includes/floating-header.hbs -->
<div class="floating-header">
    <div class="floating-header-logo">
        <a href="https://heuristicwave.github.io/">
            
            <span>Heuristic Wave Blog</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">Terraform Tips 5 - Import</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=Terraform+Tips+5+-+Import&amp;url=https://heuristicwave.github.ioTerraformTips5"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>

        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://heuristicwave.github.ioTerraformTips5"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>

        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>


<!-- /post -->

<!-- The #contentFor helper here will send everything inside it up to the matching #block helper found in default.hbs -->


        <!-- Previous/next page links - displayed on every page -->
        

        <!-- The footer at the very bottom of the screen -->
        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="https://heuristicwave.github.io/">Heuristic Wave Blog</a> &copy; 2023</section>
                <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> &
                    <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a> using
                    <a href="https://github.com/jekyller/jasper2" target="_blank" rel="noopener">Jasper2</a></section>
                <nav class="site-footer-nav">
                    <a href="/">Latest Posts</a>
                    
                    
                    <a href="https://ghost.org" target="_blank" rel="noopener">Ghost</a>
                </nav>
            </div>
        </footer>

    </div>

    <!-- The big email subscribe modal content -->
    
        <div id="subscribe" class="subscribe-overlay">
            <a class="subscribe-overlay-close" href="#"></a>
            <div class="subscribe-overlay-content">
                
                <h1 class="subscribe-overlay-title">Search on Heuristic Wave Blog</h1>
                <p class="subscribe-overlay-description">lunr.js를 이용한 posts 검색</p>
                <span id="searchform" method="post" action="/search/" class="">
    <input class="confirm" type="hidden" name="confirm"  />
    <input class="location" type="hidden" name="location"  />
    <input class="referrer" type="hidden" name="referrer"  />

    <div class="form-group">
        <input class="subscribe-email" onkeyup="myFunc()"
               id="searchtext" type="text" name="searchtext"
               placeholder="Search..." />
    </div>
    <script type="text/javascript">
        function myFunc() {
            if(event.keyCode == 13) {
                var url = encodeURIComponent($("#searchtext").val());
                location.href = "/search.html?query=" + url;
            }
        }
    </script>
</span>
                <br>
            </div>
        </div>
    

    <!-- highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.10.0/components/prism-abap.min.js"></script>
    <script>$(document).ready(function() {
      $('pre code').each(function(i, block) {
        hljs.highlightBlock(block);
      });
    });</script>

    <!-- jQuery + Fitvids, which makes all video embeds responsive -->
    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://demo.ghost.io/assets/js/jquery.fitvids.js?v=724281a32e"></script>


    <!-- Paginator increased to "infinit" in _config.yml -->
    <!-- if paginator.posts  -->
    <!-- <script>
        var maxPages = parseInt('');
    </script>
    <script src="/assets/js/infinitescroll.js"></script> -->
    <!-- /endif -->

    


    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'G-0FTXSPJZFY', 'auto');
  ga('send', 'pageview');

 </script>


    <!-- The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in post.hbs, but it needs to be included down here, after jQuery has already loaded. -->
    
        <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>

    

    <!-- Ghost outputs important scripts and data with this tag - it should always be the very last thing before the closing body tag -->
    <!-- ghost_foot -->

</body>
</html>
